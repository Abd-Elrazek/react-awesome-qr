{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///react-awesome-qr.js","webpack:///webpack/bootstrap ade934dec7f75529e8f0","webpack:///./src/lib/gif.worker.js","webpack:///./src/qr.js","webpack:///external \"react\"","webpack:///./src/lib/util.js","webpack:///./src/lib/awesome-qr.js","webpack:///./src/lib/Gif.js","webpack:///./src/lib/DataParser.js","webpack:///./src/lib/ByteStream.js","webpack:///./src/lib/schemaGIF.js","webpack:///./src/lib/Parsers.js","webpack:///./src/lib/gifjs.js","webpack:///./node_modules/worker-loader/dist/workers/InlineWorker.js","webpack:///./src/lib/imgLoaded.js","webpack:///./src/lib/readAsArrayBuffer.js"],"names":["root","factory","exports","module","require","define","amd","self","this","__WEBPACK_EXTERNAL_MODULE_3__","modules","__webpack_require__","moduleId","installedModules","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","__webpack_exports__","_asyncToGenerator","fn","gen","apply","arguments","Promise","resolve","reject","step","key","arg","info","value","error","done","then","err","ReactAwesomeQr","props","_useState","useState","_useState2","_slicedToArray","imgSrc","setImgSrc","gifBgSrc","regeneratorRuntime","mark","_callee","gifImg","logoImg","wrap","_context","prev","next","readAsArrayBuffer","sent","imgLoaded","logoSrc","renderQr","undefined","dataURI","qid","stop","_callee2","bgImg","_context2","bgSrc","__WEBPACK_IMPORTED_MODULE_0_react___default","a","createElement","src","alt","img","cb","AwesomeQRCode","create","gifBackground","text","size","margin","colorDark","colorLight","backgroundColor","backgroundImage","backgroundDimming","logoImage","logoScale","logoBackgroundColor","correctLevel","logoMargin","logoCornerRadius","whiteMargin","toBoolean","dotScale","autoColor","binarize","binarizeThreshold","callback","__WEBPACK_IMPORTED_MODULE_0_react__","__WEBPACK_IMPORTED_MODULE_1__lib_util_js__","__WEBPACK_IMPORTED_MODULE_2__lib_awesome_qr__","__WEBPACK_IMPORTED_MODULE_3__lib_imgLoaded__","__WEBPACK_IMPORTED_MODULE_4__lib_readAsArrayBuffer__","sliceIterator","arr","_arr","_n","_d","_e","_s","_i","Symbol","iterator","push","length","Array","isArray","TypeError","val","QR8bitByte","data","mode","QRMode","MODE_8BIT_BYTE","parsedData","byteArray","code","charCodeAt","concat","unshift","QRCodeModel","typeNumber","errorCorrectLevel","moduleCount","dataCache","dataList","QRPolynomial","num","shift","Error","offset","QRRSBlock","totalCount","dataCount","QRBitBuffer","buffer","_prepareRoundedCornerClip","ctx","x","y","w","h","r","beginPath","moveTo","arcTo","closePath","_greyscale","g","b","_fillRectWithMask","canvas","maskSrc","bDark","fillRect","drawImage","fill_","fillStyle","_drawAlignProtector","context","centerX","centerY","nWidth","nHeight","clearRect","_drawAlign","getAverageRGB","imgEl","width","height","defaultRGB","document","getContext","rgb","count","naturalHeight","offsetHeight","naturalWidth","offsetWidth","getImageData","e","blockSize","__WEBPACK_IMPORTED_MODULE_0__Gif__","__WEBPACK_IMPORTED_MODULE_1__gifjs__","getLength","write","put","addData","newData","isDark","row","col","getModuleCount","make","rsBlocks","getRSBlocks","totalDataCount","QRUtil","getLengthInBits","makeImpl","getBestMaskPattern","test","maskPattern","setupPositionProbePattern","setupPositionAdjustPattern","setupTimingPattern","setupTypeInfo","setupTypeNumber","createData","mapData","minLostPoint","pattern","lostPoint","getLostPoint","createMovieClip","target_mc","instance_name","depth","qr_mc","createEmptyMovieClip","dark","beginFill","lineTo","endFill","pos","getPatternPosition","j","bits","getBCHTypeNumber","mod","Math","floor","getBCHTypeInfo","inc","bitIndex","byteIndex","mask","getMask","PAD0","PAD1","putBit","createBytes","maxDcCount","maxEcCount","dcdata","ecdata","dcCount","ecCount","max","rsPoly","getErrorCorrectPolynomial","rawPoly","modPoly","modIndex","totalCodeCount","index","MODE_NUMBER","MODE_ALPHA_NUM","MODE_KANJI","QRErrorCorrectLevel","L","M","Q","H","QRMaskPattern","PATTERN000","PATTERN001","PATTERN010","PATTERN011","PATTERN100","PATTERN101","PATTERN110","PATTERN111","PATTERN_POSITION_TABLE","G15","G18","G15_MASK","getBCHDigit","digit","errorCorrectLength","multiply","QRMath","gexp","type","qrCode","sameCount","darkCount","abs","glog","LOG_TABLE","EXP_TABLE","ratio","RS_BLOCK_TABLE","rsBlock","getRsBlockTable","list","bufIndex","bit","Drawing","_onMakeImage","_elImage","_elCanvas","toDataURL","style","display","_safeSetDataURI","fSuccess","fFail","_fFail","_fSuccess","_bSupportDataURI","el","fOnError","fOnSuccess","onabort","onerror","onload","htOption","_bIsPainted","_htOption","_oContext","_callback","_bindElement","bindElement","draw","oQRCode","_tCanvas","nCount","rawSize","rawMargin","ceil","rawViewportSize","nSize","viewportSize","gifFrames","clear","save","translate","_bkgCanvas","_bContext","_maskCanvas","_mContext","gif","GIF","raw","hasImages","decompressFrames","colorTable","avgRGB","maskedDots","rect","fill","agnPatternCenter","xyOffset","bIsDark","isBlkPosCtr","bProtected","nLeft","nTop","strokeStyle","lineWidth","inAgnRange","protectorStyle","edgeCenter","agnX","agnY","restore","logoSize","clip","pixels","threshold","parseInt","putImageData","_fCanvas","_fContext","getElementById","nodeName","elStyle","console","gifOutput","rawBkg","hRawBkg","patchData","patchCanvas","hPatchCanvas","forEach","frame","GIFE","workers","quality","dims","createImageData","set","patch","left","top","stdCanvas","hStdCanvas","addFrame","copy","delay","ref","on","blob","FileReader","target","result","readAsDataURL","render","makeImage","isPainted","round","nNumber","vOption","_oQRCode","_oDrawing","makeCode","sText","CorrectLevel","arrayBuffer","byteData","Uint8Array","parser","DataParser","parse","gifSchema","f","frames","image","__WEBPACK_IMPORTED_MODULE_0__DataParser__","__WEBPACK_IMPORTED_MODULE_1__schemaGIF__","decompressFrame","buildPatch","totalPixels","descriptor","minCodeSize","pixelCount","available","code_mask","code_size","end_of_information","in_code","old_code","datum","data_size","first","bi","pi","npix","dstPixels","prefix","suffix","pixelStack","MAX_STACK_SIZE","blocks","lct","interlaced","newPixels","rows","offsets","steps","fromRow","pass","toRow","fromPixels","slice","splice","exists","gct","gce","disposalType","extras","disposal","transparentColorGiven","transparentIndex","transparentColorIndex","Uint8ClampedArray","colorIndex","color","stream","ByteStream","output","bitsToNum","bitArray","reduce","__WEBPACK_IMPORTED_MODULE_0__ByteStream__","schema","parseParts","obj","part","parsePart","label","requires","loop","items","item","parts","skip","parseBits","details","out","readBitArray","readByte","peekByte","readBytes","bytes","peekBytes","readString","len","str","String","fromCharCode","bite","readUnsigned","littleEndian","__WEBPACK_IMPORTED_MODULE_0__Parsers__","subBlocks","codes","Parsers","future","userInput","sort","parent","readArray","pow","application","comment","nextCode","schemaGIF","resolution","lsd","countFunc","EventEmitter","_events","_maxListeners","isFunction","isNumber","isObject","_typeof","isUndefined","constructor","defaultMaxListeners","setMaxListeners","isNaN","emit","er","handler","args","listeners","addListener","listener","newListener","warned","trace","once","removeListener","fired","position","removeAllListeners","listenerCount","evlistener","emitter","UA","browser","platform","ua","navigator","userAgent","toLowerCase","match","documentMode","version","parseFloat","extend","child","ctor","hasProp","__super__","indexOf","superClass","options","base","running","freeWorkers","activeWorkers","setOptions","defaults","frameDefaults","gifWorker","workerScript","repeat","background","transparent","debug","dither","setOption","_canvas","results","ImageData","CanvasRenderingContext2D","WebGLRenderingContext","getContextData","childNodes","numWorkers","nextFrame","finishedFrames","imageParts","spawnWorkers","globalPalette","renderNextFrame","abort","worker","log","terminate","min","_this","Worker","onmessage","event","frameFinished","finishRendering","k","len1","len2","len3","page","ref1","ref2","pageSize","cursor","Blob","task","getTask","postMessage","setFill","last","canTransfer","URL","window","webkitURL","content","url","BlobBuilder","WebKitBlobBuilder","MozBlobBuilder","MSBlobBuilder","append","getBlob","createObjectURL","encodeURIComponent","Image","xhr","XMLHttpRequest","newUrl","response","revokeObjectURL","open","responseType","send","reader","onloadend"],"mappings":"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I,KACnB,EAAG,IAAK,GAAI,EAAG,IAAK,KACpB,EAAG,GAAI,GAAI,EAAG,GAAI,KAClB,EAAG,GAAI,GAAI,EAAG,GAAI,KAClB,GAAI,GAAI,KACR,EAAG,IAAK,GAAI,EAAG,IAAK,KACpB,EAAG,GAAI,GAAI,EAAG,GAAI,KAClB,GAAI,GAAI,GAAI,EAAG,GAAI,KACnB,EAAG,GAAI,GAAI,GAAI,GAAI,KACnB,EAAG,IAAK,IAAK,EAAG,IAAK,MACrB,GAAI,GAAI,GAAI,EAAG,GAAI,KACnB,EAAG,GAAI,GAAI,GAAI,GAAI,KACnB,EAAG,GAAI,GAAI,GAAI,GAAI,KACnB,EAAG,IAAK,IAAK,EAAG,IAAK,MACrB,EAAG,GAAI,GAAI,EAAG,GAAI,KAClB,GAAI,GAAI,GAAI,EAAG,GAAI,KACnB,EAAG,GAAI,GAAI,GAAI,GAAI,KACnB,EAAG,IAAK,IAAK,EAAG,IAAK,MACrB,EAAG,GAAI,GAAI,GAAI,GAAI,KACnB,GAAI,GAAI,GAAI,EAAG,GAAI,KACnB,EAAG,GAAI,GAAI,GAAI,GAAI,KACnB,EAAG,IAAK,IAAK,EAAG,IAAK,MACrB,EAAG,GAAI,GAAI,GAAI,GAAI,KACnB,GAAI,GAAI,GAAI,EAAG,GAAI,KACnB,GAAI,GAAI,GAAI,GAAI,GAAI,KACpB,EAAG,IAAK,IAAK,EAAG,IAAK,MACrB,GAAI,GAAI,KACR,GAAI,GAAI,GAAI,EAAG,GAAI,KACnB,GAAI,GAAI,GAAI,EAAG,GAAI,KACnB,EAAG,IAAK,IAAK,EAAG,IAAK,MACrB,GAAI,GAAI,KACR,EAAG,GAAI,GAAI,GAAI,GAAI,KACnB,GAAI,GAAI,KACR,EAAG,IAAK,IAAK,EAAG,IAAK,MACrB,EAAG,GAAI,GAAI,GAAI,GAAI,KACnB,GAAI,GAAI,GAAI,GAAI,GAAI,KACpB,GAAI,GAAI,GAAI,GAAI,GAAI,KACpB,EAAG,IAAK,IAAK,EAAG,IAAK,MACrB,EAAG,GAAI,GAAI,GAAI,GAAI,KACnB,GAAI,GAAI,GAAI,GAAI,GAAI,KACpB,GAAI,GAAI,GAAI,EAAG,GAAI,KACnB,EAAG,IAAK,IAAK,EAAG,IAAK,MACrB,EAAG,GAAI,GAAI,GAAI,GAAI,KACnB,EAAG,GAAI,GAAI,GAAI,GAAI,KACnB,GAAI,GAAI,GAAI,GAAI,GAAI,KACpB,GAAI,IAAK,IAAK,EAAG,IAAK,MACtB,GAAI,GAAI,GAAI,EAAG,GAAI,KACnB,GAAI,GAAI,GAAI,EAAG,GAAI,KACnB,GAAI,GAAI,GAAI,EAAG,GAAI,KACnB,EAAG,IAAK,IAAK,EAAG,IAAK,MACrB,GAAI,GAAI,GAAI,EAAG,GAAI,KACnB,EAAG,GAAI,GAAI,GAAI,GAAI,KACnB,GAAI,GAAI,GAAI,GAAI,GAAI,KACpB,EAAG,IAAK,IAAK,GAAI,IAAK,MACtB,EAAG,GAAI,GAAI,GAAI,GAAI,KACnB,EAAG,GAAI,GAAI,GAAI,GAAI,KACnB,GAAI,GAAI,GAAI,GAAI,GAAI,KACpB,EAAG,IAAK,IAAK,EAAG,IAAK,MACrB,GAAI,GAAI,GAAI,EAAG,GAAI,KACnB,EAAG,GAAI,GAAI,GAAI,GAAI,KACnB,GAAI,GAAI,GAAI,GAAI,GAAI,KACpB,EAAG,IAAK,IAAK,GAAI,IAAK,MACtB,GAAI,GAAI,GAAI,GAAI,GAAI,KACpB,GAAI,GAAI,GAAI,GAAI,GAAI,KACpB,GAAI,GAAI,GAAI,GAAI,GAAI,KACpB,GAAI,IAAK,IAAK,EAAG,IAAK,MACtB,EAAG,GAAI,GAAI,GAAI,GAAI,KACnB,GAAI,GAAI,GAAI,EAAG,GAAI,KACnB,GAAI,GAAI,GAAI,GAAI,GAAI,KACpB,GAAI,IAAK,MACT,GAAI,GAAI,GAAI,GAAI,GAAI,KACpB,GAAI,GAAI,GAAI,GAAI,GAAI,KACpB,GAAI,GAAI,GAAI,GAAI,GAAI,KACpB,GAAI,IAAK,IAAK,EAAG,IAAK,MACtB,GAAI,GAAI,GAAI,GAAI,GAAI,KACpB,GAAI,GAAI,GAAI,GAAI,GAAI,KACpB,GAAI,GAAI,GAAI,GAAI,GAAI,KACpB,GAAI,IAAK,IAAK,EAAG,IAAK,MACtB,GAAI,GAAI,GAAI,GAAI,GAAI,KACpB,GAAI,GAAI,GAAI,EAAG,GAAI,KACnB,GAAI,GAAI,GAAI,EAAG,GAA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","file":"react-awesome-qr.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"react\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"react-awesome-qr\", [\"react\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"react-awesome-qr\"] = factory(require(\"react\"));\n\telse\n\t\troot[\"react-awesome-qr\"] = factory(root[\"react\"]);\n})(typeof self !== 'undefined' ? self : this, function(__WEBPACK_EXTERNAL_MODULE_3__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"react\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"react-awesome-qr\", [\"react\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"react-awesome-qr\"] = factory(require(\"react\"));\n\telse\n\t\troot[\"react-awesome-qr\"] = factory(root[\"react\"]);\n})(typeof self !== 'undefined' ? self : this, function(__WEBPACK_EXTERNAL_MODULE_3__) {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"/dist/\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 1);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = function() {\n  return __webpack_require__(12)(\"!function(t){function e(r){if(i[r])return i[r].exports;var s=i[r]={i:r,l:!1,exports:{}};return t[r].call(s.exports,s,s.exports,e),s.l=!0,s.exports}var i={};e.m=t,e.c=i,e.d=function(t,i,r){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,\\\"a\\\",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p=\\\"/dist/\\\",e(e.s=0)}([function(t,e){~function(){function t(t,e,i,r){function a(t,e){F[P++]=t,P>=254&&d(e)}function f(t){c(u),D=S+2,G=!0,b(S,t)}function c(t){for(var e=0;e<t;++e)A[e]=-1}function y(t,e){var i,r,s,o,a,p,y;for(m=t,G=!1,n=m,B=g(n),S=1<<t-1,T=S+1,D=S+2,P=0,o=x(),y=0,i=u;i<65536;i*=2)++y;y=8-y,p=u,c(p),b(S,e);t:for(;(r=x())!=h;)if(i=(r<<l)+o,s=r<<y^o,A[s]!==i){if(A[s]>=0){a=p-s,0===s&&(a=1);do{if((s-=a)<0&&(s+=p),A[s]===i){o=C[s];continue t}}while(A[s]>=0)}b(o,e),o=r,D<1<<l?(C[s]=D++,A[s]=i):f(e)}else o=C[s];b(o,e),b(T,e)}function w(i){i.writeByte(M),s=t*e,o=0,y(M+1,i),i.writeByte(0)}function d(t){P>0&&(t.writeByte(P),t.writeBytes(F,0,P),P=0)}function g(t){return(1<<t)-1}function x(){return 0===s?h:(--s,255&i[o++])}function b(t,e){for(v&=p[I],I>0?v|=t<<I:v=t,I+=n;I>=8;)a(255&v,e),v>>=8,I-=8;if((D>B||G)&&(G?(B=g(n=m),G=!1):(++n,B=n==l?1<<l:g(n))),t==T){for(;I>0;)a(255&v,e),v>>=8,I-=8;d(e)}}var v,P,B,m,S,T,M=Math.max(2,r),F=new Uint8Array(256),A=new Int32Array(u),C=new Int32Array(u),I=0,D=0,G=!1;this.encode=w}function e(t,e){function i(){B=[],S=new Int32Array(256),R=new Int32Array(c),U=new Int32Array(c),Q=new Int32Array(c>>3);var t,e;for(t=0;t<c;t++)e=(t<<w+8)/c,B[t]=new Float64Array([e,e,e,0]),U[t]=g/c,R[t]=0}function r(){for(var t=0;t<c;t++)B[t][0]>>=w,B[t][1]>>=w,B[t][2]>>=w,B[t][3]=t}function s(t,e,i,r,s){B[e][0]-=t*(B[e][0]-i)/F,B[e][1]-=t*(B[e][1]-r)/F,B[e][2]-=t*(B[e][2]-s)/F}function o(t,e,i,r,s){for(var o,n,a=Math.abs(e-t),h=Math.min(e+t,c),l=e+1,u=e-1,p=1;l<h||u>a;)n=Q[p++],l<h&&(o=B[l++],o[0]-=n*(o[0]-i)/C,o[1]-=n*(o[1]-r)/C,o[2]-=n*(o[2]-s)/C),u>a&&(o=B[u--],o[0]-=n*(o[0]-i)/C,o[1]-=n*(o[1]-r)/C,o[2]-=n*(o[2]-s)/C)}function n(t,e,i){var r,s,o,n,a,h=~(1<<31),l=h,u=-1,p=u;for(r=0;r<c;r++)s=B[r],o=Math.abs(s[0]-t)+Math.abs(s[1]-e)+Math.abs(s[2]-i),o<h&&(h=o,u=r),n=o-(R[r]>>d-w),n<l&&(l=n,p=r),a=U[r]>>b,U[r]-=a,R[r]+=a<<x;return U[u]+=v,R[u]-=P,p}function a(){var t,e,i,r,s,o,n=0,a=0;for(t=0;t<c;t++){for(i=B[t],s=t,o=i[1],e=t+1;e<c;e++)r=B[e],r[1]<o&&(s=e,o=r[1]);if(r=B[s],t!=s&&(e=r[0],r[0]=i[0],i[0]=e,e=r[1],r[1]=i[1],i[1]=e,e=r[2],r[2]=i[2],i[2]=e,e=r[3],r[3]=i[3],i[3]=e),o!=n){for(S[n]=a+t>>1,e=n+1;e<o;e++)S[e]=t;n=o,a=t}}for(S[n]=a+y>>1,e=n+1;e<256;e++)S[e]=y}function h(t,e,i){for(var r,s,o,n=1e3,a=-1,h=S[e],l=h-1;h<c||l>=0;)h<c&&(s=B[h],o=s[1]-e,o>=n?h=c:(h++,o<0&&(o=-o),r=s[0]-t,r<0&&(r=-r),(o+=r)<n&&(r=s[2]-i,r<0&&(r=-r),(o+=r)<n&&(n=o,a=s[3])))),l>=0&&(s=B[l],o=e-s[1],o>=n?l=-1:(l--,o<0&&(o=-o),r=s[0]-t,r<0&&(r=-r),(o+=r)<n&&(r=s[2]-i,r<0&&(r=-r),(o+=r)<n&&(n=o,a=s[3]))));return a}function l(){var i,r=t.length,a=30+(e-1)/3,h=r/(3*e),l=~~(h/f),u=F,p=T,c=p>>m;for(c<=1&&(c=0),i=0;i<c;i++)Q[i]=u*((c*c-i*i)*A/(c*c));var y;r<E?(e=1,y=3):y=r%I!=0?3*I:r%D!=0?3*D:r%G!=0?3*G:3*z;var d,g,x,b,v=0;for(i=0;i<h;)if(d=(255&t[v])<<w,g=(255&t[v+1])<<w,x=(255&t[v+2])<<w,b=n(d,g,x),s(u,b,d,g,x),0!==c&&o(c,b,d,g,x),v+=y,v>=r&&(v-=r),i++,0===l&&(l=1),i%l==0)for(u-=u/a,p-=p/M,c=p>>m,c<=1&&(c=0),b=0;b<c;b++)Q[b]=u*((c*c-b*b)*A/(c*c))}function u(){i(),l(),r(),a()}function p(){for(var t=[],e=[],i=0;i<c;i++)e[B[i][3]]=i;for(var r=0,s=0;s<c;s++){var o=e[s];t[r++]=B[o][0],t[r++]=B[o][1],t[r++]=B[o][2]}return t}var B,S,R,U,Q;this.buildColormap=u,this.getColormap=p,this.lookupRGB=h}function i(){this.page=-1,this.pages=[],this.newPage()}function r(t,e){this.width=~~t,this.height=~~e,this.transparent=null,this.transIndex=0,this.repeat=-1,this.delay=0,this.image=null,this.pixels=null,this.indexedPixels=null,this.colorDepth=null,this.colorTab=null,this.neuQuant=null,this.usedEntry=new Array,this.palSize=7,this.dispose=-1,this.firstFrame=!0,this.sample=10,this.dither=!1,this.globalPalette=!1,this.out=new i}var s,o,n,a,h=-1,l=12,u=5003,p=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],f=100,c=256,y=c-1,w=4,d=16,g=1<<d,x=10,b=10,v=g>>b,P=g<<x-b,B=c>>3,m=6,S=1<<m,T=B*S,M=30,F=1024,A=256,C=1<<18,I=499,D=491,G=487,z=503,E=3*z;a=function(t){var e,i,s,o;return e=new r(t.width,t.height),0===t.index?e.writeHeader():e.firstFrame=!1,e.setTransparent(t.transparent),e.setRepeat(t.repeat),e.setDelay(t.delay),e.setQuality(t.quality),e.setDither(t.dither),e.setGlobalPalette(t.globalPalette),e.addFrame(t.data),t.last&&e.finish(),!0===t.globalPalette&&(t.globalPalette=e.getGlobalPalette()),s=e.stream(),t.data=s.pages,t.cursor=s.cursor,t.pageSize=s.constructor.pageSize,t.canTransfer?(o=function(){var e,r,s,o;for(s=t.data,o=[],e=0,r=s.length;e<r;e++)i=s[e],o.push(i.buffer);return o}(),self.postMessage(t,o)):self.postMessage(t)},self.onmessage=function(t){return a(t.data)},i.pageSize=4096,i.charMap={};for(var R=0;R<256;R++)i.charMap[R]=String.fromCharCode(R);i.prototype.newPage=function(){this.pages[++this.page]=new Uint8Array(i.pageSize),this.cursor=0},i.prototype.getData=function(){for(var t=\\\"\\\",e=0;e<this.pages.length;e++)for(var r=0;r<i.pageSize;r++)t+=i.charMap[this.pages[e][r]];return t},i.prototype.writeByte=function(t){this.cursor>=i.pageSize&&this.newPage(),this.pages[this.page][this.cursor++]=t},i.prototype.writeUTFBytes=function(t){for(var e=t.length,i=0;i<e;i++)this.writeByte(t.charCodeAt(i))},i.prototype.writeBytes=function(t,e,i){for(var r=i||t.length,s=e||0;s<r;s++)this.writeByte(t[s])},r.prototype.setDelay=function(t){this.delay=Math.round(t/10)},r.prototype.setFrameRate=function(t){this.delay=Math.round(100/t)},r.prototype.setDispose=function(t){t>=0&&(this.dispose=t)},r.prototype.setRepeat=function(t){this.repeat=t},r.prototype.setTransparent=function(t){this.transparent=t},r.prototype.addFrame=function(t){this.image=t,this.colorTab=this.globalPalette&&this.globalPalette.slice?this.globalPalette:null,this.getImagePixels(),this.analyzePixels(),!0===this.globalPalette&&(this.globalPalette=this.colorTab),this.firstFrame&&(this.writeLSD(),this.writePalette(),this.repeat>=0&&this.writeNetscapeExt()),this.writeGraphicCtrlExt(),this.writeImageDesc(),this.firstFrame||this.globalPalette||this.writePalette(),this.writePixels(),this.firstFrame=!1},r.prototype.finish=function(){this.out.writeByte(59)},r.prototype.setQuality=function(t){t<1&&(t=1),this.sample=t},r.prototype.setDither=function(t){!0===t&&(t=\\\"FloydSteinberg\\\"),this.dither=t},r.prototype.setGlobalPalette=function(t){this.globalPalette=t},r.prototype.getGlobalPalette=function(){return this.globalPalette&&this.globalPalette.slice&&this.globalPalette.slice(0)||this.globalPalette},r.prototype.writeHeader=function(){this.out.writeUTFBytes(\\\"GIF89a\\\")},r.prototype.analyzePixels=function(){this.colorTab||(this.neuQuant=new e(this.pixels,this.sample),this.neuQuant.buildColormap(),this.colorTab=this.neuQuant.getColormap()),this.dither?this.ditherPixels(this.dither.replace(\\\"-serpentine\\\",\\\"\\\"),null!==this.dither.match(/-serpentine/)):this.indexPixels(),this.pixels=null,this.colorDepth=8,this.palSize=7,null!==this.transparent&&(this.transIndex=this.findClosest(this.transparent,!0))},r.prototype.indexPixels=function(t){var e=this.pixels.length/3;this.indexedPixels=new Uint8Array(e);for(var i=0,r=0;r<e;r++){var s=this.findClosestRGB(255&this.pixels[i++],255&this.pixels[i++],255&this.pixels[i++]);this.usedEntry[s]=!0,this.indexedPixels[r]=s}},r.prototype.ditherPixels=function(t,e){var i={FalseFloydSteinberg:[[3/8,1,0],[3/8,0,1],[.25,1,1]],FloydSteinberg:[[7/16,1,0],[3/16,-1,1],[5/16,0,1],[1/16,1,1]],Stucki:[[8/42,1,0],[4/42,2,0],[2/42,-2,1],[4/42,-1,1],[8/42,0,1],[4/42,1,1],[2/42,2,1],[1/42,-2,2],[2/42,-1,2],[4/42,0,2],[2/42,1,2],[1/42,2,2]],Atkinson:[[1/8,1,0],[1/8,2,0],[1/8,-1,1],[1/8,0,1],[1/8,1,1],[1/8,0,2]]};if(!t||!i[t])throw\\\"Unknown dithering kernel: \\\"+t;var r=i[t],s=0,o=this.height,n=this.width,a=this.pixels,h=e?-1:1;this.indexedPixels=new Uint8Array(this.pixels.length/3);for(var l=0;l<o;l++){e&&(h*=-1);for(var u=1==h?0:n-1,p=1==h?n:0;u!==p;u+=h){s=l*n+u;var f=3*s,c=a[f],y=a[f+1],w=a[f+2];f=this.findClosestRGB(c,y,w),this.usedEntry[f]=!0,this.indexedPixels[s]=f,f*=3;for(var d=this.colorTab[f],g=this.colorTab[f+1],x=this.colorTab[f+2],b=c-d,v=y-g,P=w-x,B=1==h?0:r.length-1,m=1==h?r.length:0;B!==m;B+=h){var S=r[B][1],T=r[B][2];if(S+u>=0&&S+u<n&&T+l>=0&&T+l<o){var M=r[B][0];f=s+S+T*n,f*=3,a[f]=Math.max(0,Math.min(255,a[f]+b*M)),a[f+1]=Math.max(0,Math.min(255,a[f+1]+v*M)),a[f+2]=Math.max(0,Math.min(255,a[f+2]+P*M))}}}}},r.prototype.findClosest=function(t,e){return this.findClosestRGB((16711680&t)>>16,(65280&t)>>8,255&t,e)},r.prototype.findClosestRGB=function(t,e,i,r){if(null===this.colorTab)return-1;if(this.neuQuant&&!r)return this.neuQuant.lookupRGB(t,e,i);for(var s=0,o=16777216,n=this.colorTab.length,a=0,h=0;a<n;h++){var l=t-(255&this.colorTab[a++]),u=e-(255&this.colorTab[a++]),p=i-(255&this.colorTab[a++]),f=l*l+u*u+p*p;(!r||this.usedEntry[h])&&f<o&&(o=f,s=h)}return s},r.prototype.getImagePixels=function(){var t=this.width,e=this.height;this.pixels=new Uint8Array(t*e*3);for(var i=this.image,r=0,s=0,o=0;o<e;o++)for(var n=0;n<t;n++)this.pixels[s++]=i[r++],this.pixels[s++]=i[r++],this.pixels[s++]=i[r++],r++},r.prototype.writeGraphicCtrlExt=function(){this.out.writeByte(33),this.out.writeByte(249),this.out.writeByte(4);var t,e;null===this.transparent?(t=0,e=0):(t=1,e=2),this.dispose>=0&&(e=7&dispose),e<<=2,this.out.writeByte(0|e|t),this.writeShort(this.delay),this.out.writeByte(this.transIndex),this.out.writeByte(0)},r.prototype.writeImageDesc=function(){this.out.writeByte(44),this.writeShort(0),this.writeShort(0),this.writeShort(this.width),this.writeShort(this.height),this.firstFrame||this.globalPalette?this.out.writeByte(0):this.out.writeByte(128|this.palSize)},r.prototype.writeLSD=function(){this.writeShort(this.width),this.writeShort(this.height),this.out.writeByte(240|this.palSize),this.out.writeByte(0),this.out.writeByte(0)},r.prototype.writeNetscapeExt=function(){this.out.writeByte(33),this.out.writeByte(255),this.out.writeByte(11),this.out.writeUTFBytes(\\\"NETSCAPE2.0\\\"),this.out.writeByte(3),this.out.writeByte(1),this.writeShort(this.repeat),this.out.writeByte(0)},r.prototype.writePalette=function(){this.out.writeBytes(this.colorTab);for(var t=768-this.colorTab.length,e=0;e<t;e++)this.out.writeByte(0)},r.prototype.writeShort=function(t){this.out.writeByte(255&t),this.out.writeByte(t>>8&255)},r.prototype.writePixels=function(){new t(this.width,this.height,this.indexedPixels,this.colorDepth).encode(this.out)},r.prototype.stream=function(){return this.out}}()}]);\\n//# sourceMappingURL=7340f9193e3b24ac5930.worker.js.map\", __webpack_require__.p + \"7340f9193e3b24ac5930.worker.js\");\n};\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__(2);\n\n\n/***/ }),\n/* 2 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__lib_util_js__ = __webpack_require__(4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__lib_awesome_qr__ = __webpack_require__(5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__lib_imgLoaded__ = __webpack_require__(13);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__lib_readAsArrayBuffer__ = __webpack_require__(14);\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\n\n\n\n\n\n// class ReactAwesomeQr extends Component {\n//   constructor(props) {\n//     super(props);\n//     this.state = {\n//       imgSrc: \"\"\n//     };\n//   }\n//   componentDidMount(){\n//     this.renderQr()\n//   }\n\n\n//   async renderQr() {\n//     const props = this.props;\n//     if (props.gifBgSrc) {\n//       const gifImg = await readAsArrayBuffer(props.gifBgSrc);\n//       const logoImg = await imgLoaded(props.logoSrc);\n\n//       renderQr(props, undefined, logoImg, gifImg, (dataURI, qid) => {\n//         this.setState({\n//           imgSrc: dataURI\n//         });\n//       });\n//     } else {\n//       const bgImg = await imgLoaded(props.bgSrc);\n//       const logoImg = await imgLoaded(props.logoSrc);\n//       renderQr(props, bgImg, logoImg, null, (dataURI, qid) => {\n//         this.setState({\n//           imgSrc: dataURI\n//         });\n//       });\n//     }\n//   }\n//   render() {\n//     if (this.state.imgSrc) {\n//       return <img src={this.state.imgSrc} alt=\"qr\" />;\n//     } else {\n//       return false;\n//     }\n//   }\n// }\nfunction ReactAwesomeQr(props) {\n  var _useState = Object(__WEBPACK_IMPORTED_MODULE_0_react__[\"useState\"])(\"\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      imgSrc = _useState2[0],\n      setImgSrc = _useState2[1];\n\n  if (props.gifBgSrc) {\n    _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n      var gifImg, logoImg;\n      return regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return Object(__WEBPACK_IMPORTED_MODULE_4__lib_readAsArrayBuffer__[\"a\" /* default */])(props.gifBgSrc);\n\n            case 2:\n              gifImg = _context.sent;\n              _context.next = 5;\n              return Object(__WEBPACK_IMPORTED_MODULE_3__lib_imgLoaded__[\"a\" /* default */])(props.logoSrc);\n\n            case 5:\n              logoImg = _context.sent;\n\n\n              renderQr(props, undefined, logoImg, gifImg, function (dataURI, qid) {\n                setImgSrc(dataURI);\n              });\n\n            case 7:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, this);\n    }))();\n  } else {\n    _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2() {\n      var bgImg, logoImg;\n      return regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return Object(__WEBPACK_IMPORTED_MODULE_3__lib_imgLoaded__[\"a\" /* default */])(props.bgSrc);\n\n            case 2:\n              bgImg = _context2.sent;\n              _context2.next = 5;\n              return Object(__WEBPACK_IMPORTED_MODULE_3__lib_imgLoaded__[\"a\" /* default */])(props.logoSrc);\n\n            case 5:\n              logoImg = _context2.sent;\n\n              renderQr(props, bgImg, logoImg, null, function (dataURI, qid) {\n                setImgSrc(dataURI);\n              });\n\n            case 7:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, this);\n    }))();\n  }\n\n  if (imgSrc) {\n    return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"img\", { src: imgSrc, alt: \"qr\" });\n  } else {\n    return false;\n  }\n}\n\nfunction renderQr(props, img, logoImg, gifBgSrc, cb) {\n  new __WEBPACK_IMPORTED_MODULE_2__lib_awesome_qr__[\"a\" /* default */]().create({\n    gifBackground: gifBgSrc || undefined,\n    text: props.text,\n    size: props.size || 200,\n    margin: props.margin === 0 ? 0 : 20,\n    colorDark: props.colorDark || \"#000000\",\n    colorLight: props.colorLight || \"#FFFFFF\",\n    backgroundColor: props.backgroundColor || \"#FFFFFF\",\n    backgroundImage: img || undefined,\n    backgroundDimming: props.backgroundDimming || \"rgba(0,0,0,0)\",\n    logoImage: logoImg || undefined,\n    logoScale: props.logoScale || 0.2,\n    logoBackgroundColor: props.logoBackgroundColor || \"rgb(255,255,255)\",\n    correctLevel: props.correctLevel || 1,\n    logoMargin: props.logoMargin || 0,\n    logoCornerRadius: props.logoCornerRadius || 8,\n    whiteMargin: Object(__WEBPACK_IMPORTED_MODULE_1__lib_util_js__[\"a\" /* toBoolean */])(props.whiteMargin) || true,\n    dotScale: props.dotScale || 1,\n    autoColor: Object(__WEBPACK_IMPORTED_MODULE_1__lib_util_js__[\"a\" /* toBoolean */])(props.autoColor) || true,\n    binarize: Object(__WEBPACK_IMPORTED_MODULE_1__lib_util_js__[\"a\" /* toBoolean */])(props.binarize) || false,\n    binarizeThreshold: props.binarizeThreshold || 128,\n    callback: function callback(dataURI) {\n      cb(dataURI, props.qid);\n    }\n  });\n}\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (ReactAwesomeQr);\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports) {\n\nmodule.exports = __WEBPACK_EXTERNAL_MODULE_3__;\n\n/***/ }),\n/* 4 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = toBoolean;\n/* eslint-disable */\nfunction toBoolean(val) {\n  if (val === '') return val;\n  return val === 'true' || val == '1';\n}\n\n/***/ }),\n/* 5 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Gif__ = __webpack_require__(6);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__gifjs__ = __webpack_require__(11);\n/* eslint-disable */\n\n\nvar AwesomeQRCode;\n\nfunction QR8bitByte(data) {\n  this.mode = QRMode.MODE_8BIT_BYTE;\n  this.data = data;\n  this.parsedData = [];\n  for (var i = 0, l = this.data.length; i < l; i++) {\n    var byteArray = [];\n    var code = this.data.charCodeAt(i);\n    if (code > 0x10000) {\n      byteArray[0] = 0xf0 | (code & 0x1c0000) >>> 18;\n      byteArray[1] = 0x80 | (code & 0x3f000) >>> 12;\n      byteArray[2] = 0x80 | (code & 0xfc0) >>> 6;\n      byteArray[3] = 0x80 | code & 0x3f;\n    } else if (code > 0x800) {\n      byteArray[0] = 0xe0 | (code & 0xf000) >>> 12;\n      byteArray[1] = 0x80 | (code & 0xfc0) >>> 6;\n      byteArray[2] = 0x80 | code & 0x3f;\n    } else if (code > 0x80) {\n      byteArray[0] = 0xc0 | (code & 0x7c0) >>> 6;\n      byteArray[1] = 0x80 | code & 0x3f;\n    } else {\n      byteArray[0] = code;\n    }\n    this.parsedData.push(byteArray);\n  }\n  this.parsedData = Array.prototype.concat.apply([], this.parsedData);\n  if (this.parsedData.length != this.data.length) {\n    this.parsedData.unshift(191);\n    this.parsedData.unshift(187);\n    this.parsedData.unshift(239);\n  }\n}\n\nQR8bitByte.prototype = {\n  getLength: function getLength(buffer) {\n    return this.parsedData.length;\n  },\n  write: function write(buffer) {\n    for (var i = 0, l = this.parsedData.length; i < l; i++) {\n      buffer.put(this.parsedData[i], 8);\n    }\n  }\n};\n\nfunction QRCodeModel(typeNumber, errorCorrectLevel) {\n  this.typeNumber = typeNumber;\n  this.errorCorrectLevel = errorCorrectLevel;\n  this.modules = null;\n  this.moduleCount = 0;\n  this.dataCache = null;\n  this.dataList = [];\n}\n\nQRCodeModel.prototype = {\n  addData: function addData(data) {\n    var newData = new QR8bitByte(data);\n    this.dataList.push(newData);\n    this.dataCache = null;\n  },\n  isDark: function isDark(row, col) {\n    if (row < 0 || this.moduleCount <= row || col < 0 || this.moduleCount <= col) {\n      throw new Error(row + \",\" + col);\n    }\n    return this.modules[row][col];\n  },\n  getModuleCount: function getModuleCount() {\n    return this.moduleCount;\n  },\n  make: function make() {\n    /////////////////////////////////////////////\n    if (this.typeNumber < 1) {\n      var typeNumber = 1;\n      for (typeNumber = 1; typeNumber < 40; typeNumber++) {\n        var rsBlocks = QRRSBlock.getRSBlocks(typeNumber, this.errorCorrectLevel);\n\n        var buffer = new QRBitBuffer();\n        var totalDataCount = 0;\n        for (var i = 0; i < rsBlocks.length; i++) {\n          totalDataCount += rsBlocks[i].dataCount;\n        }\n\n        for (var i = 0; i < this.dataList.length; i++) {\n          var data = this.dataList[i];\n          buffer.put(data.mode, 4);\n          buffer.put(data.getLength(), QRUtil.getLengthInBits(data.mode, typeNumber));\n          data.write(buffer);\n        }\n        if (buffer.getLengthInBits() <= totalDataCount * 8) break;\n      }\n      this.typeNumber = typeNumber;\n    }\n    /////////////////////////////////////////////\n    this.makeImpl(!1, this.getBestMaskPattern());\n  },\n  makeImpl: function makeImpl(test, maskPattern) {\n    this.moduleCount = this.typeNumber * 4 + 17;\n    this.modules = new Array(this.moduleCount);\n    for (var row = 0; row < this.moduleCount; row++) {\n      this.modules[row] = new Array(this.moduleCount);\n      for (var col = 0; col < this.moduleCount; col++) {\n        this.modules[row][col] = null;\n      }\n    }\n    this.setupPositionProbePattern(0, 0);\n    this.setupPositionProbePattern(this.moduleCount - 7, 0);\n    this.setupPositionProbePattern(0, this.moduleCount - 7);\n    this.setupPositionAdjustPattern();\n    this.setupTimingPattern();\n    this.setupTypeInfo(test, maskPattern);\n    if (this.typeNumber >= 7) {\n      this.setupTypeNumber(test);\n    }\n    if (this.dataCache == null) {\n      this.dataCache = QRCodeModel.createData(this.typeNumber, this.errorCorrectLevel, this.dataList);\n    }\n    this.mapData(this.dataCache, maskPattern);\n  },\n  setupPositionProbePattern: function setupPositionProbePattern(row, col) {\n    for (var r = -1; r <= 7; r++) {\n      if (row + r <= -1 || this.moduleCount <= row + r) continue;\n      for (var c = -1; c <= 7; c++) {\n        if (col + c <= -1 || this.moduleCount <= col + c) continue;\n        if (0 <= r && r <= 6 && (c == 0 || c == 6) || 0 <= c && c <= 6 && (r == 0 || r == 6) || 2 <= r && r <= 4 && 2 <= c && c <= 4) {\n          this.modules[row + r][col + c] = !0;\n        } else {\n          this.modules[row + r][col + c] = !1;\n        }\n      }\n    }\n  },\n  getBestMaskPattern: function getBestMaskPattern() {\n    var minLostPoint = 0;\n    var pattern = 0;\n    for (var i = 0; i < 8; i++) {\n      this.makeImpl(!0, i);\n      var lostPoint = QRUtil.getLostPoint(this);\n      if (i == 0 || minLostPoint > lostPoint) {\n        minLostPoint = lostPoint;\n        pattern = i;\n      }\n    }\n    return pattern;\n  },\n  createMovieClip: function createMovieClip(target_mc, instance_name, depth) {\n    var qr_mc = target_mc.createEmptyMovieClip(instance_name, depth);\n    var cs = 1;\n    this.make();\n    for (var row = 0; row < this.modules.length; row++) {\n      var y = row * cs;\n      for (var col = 0; col < this.modules[row].length; col++) {\n        var x = col * cs;\n        var dark = this.modules[row][col];\n        if (dark) {\n          qr_mc.beginFill(0, 100);\n          qr_mc.moveTo(x, y);\n          qr_mc.lineTo(x + cs, y);\n          qr_mc.lineTo(x + cs, y + cs);\n          qr_mc.lineTo(x, y + cs);\n          qr_mc.endFill();\n        }\n      }\n    }\n    return qr_mc;\n  },\n  setupTimingPattern: function setupTimingPattern() {\n    for (var r = 8; r < this.moduleCount - 8; r++) {\n      if (this.modules[r][6] != null) {\n        continue;\n      }\n      this.modules[r][6] = r % 2 == 0;\n    }\n    for (var c = 8; c < this.moduleCount - 8; c++) {\n      if (this.modules[6][c] != null) {\n        continue;\n      }\n      this.modules[6][c] = c % 2 == 0;\n    }\n  },\n  setupPositionAdjustPattern: function setupPositionAdjustPattern() {\n    var pos = QRUtil.getPatternPosition(this.typeNumber);\n    for (var i = 0; i < pos.length; i++) {\n      for (var j = 0; j < pos.length; j++) {\n        var row = pos[i];\n        var col = pos[j];\n        if (this.modules[row][col] != null) {\n          continue;\n        }\n        for (var r = -2; r <= 2; r++) {\n          for (var c = -2; c <= 2; c++) {\n            if (r == -2 || r == 2 || c == -2 || c == 2 || r == 0 && c == 0) {\n              this.modules[row + r][col + c] = !0;\n            } else {\n              this.modules[row + r][col + c] = !1;\n            }\n          }\n        }\n      }\n    }\n  },\n  setupTypeNumber: function setupTypeNumber(test) {\n    var bits = QRUtil.getBCHTypeNumber(this.typeNumber);\n    for (var i = 0; i < 18; i++) {\n      var mod = !test && (bits >> i & 1) == 1;\n      this.modules[Math.floor(i / 3)][i % 3 + this.moduleCount - 8 - 3] = mod;\n    }\n    for (var i = 0; i < 18; i++) {\n      var mod = !test && (bits >> i & 1) == 1;\n      this.modules[i % 3 + this.moduleCount - 8 - 3][Math.floor(i / 3)] = mod;\n    }\n  },\n  setupTypeInfo: function setupTypeInfo(test, maskPattern) {\n    var data = this.errorCorrectLevel << 3 | maskPattern;\n    var bits = QRUtil.getBCHTypeInfo(data);\n    for (var i = 0; i < 15; i++) {\n      var mod = !test && (bits >> i & 1) == 1;\n      if (i < 6) {\n        this.modules[i][8] = mod;\n      } else if (i < 8) {\n        this.modules[i + 1][8] = mod;\n      } else {\n        this.modules[this.moduleCount - 15 + i][8] = mod;\n      }\n    }\n    for (var i = 0; i < 15; i++) {\n      var mod = !test && (bits >> i & 1) == 1;\n      if (i < 8) {\n        this.modules[8][this.moduleCount - i - 1] = mod;\n      } else if (i < 9) {\n        this.modules[8][15 - i - 1 + 1] = mod;\n      } else {\n        this.modules[8][15 - i - 1] = mod;\n      }\n    }\n    this.modules[this.moduleCount - 8][8] = !test;\n  },\n  mapData: function mapData(data, maskPattern) {\n    var inc = -1;\n    var row = this.moduleCount - 1;\n    var bitIndex = 7;\n    var byteIndex = 0;\n    for (var col = this.moduleCount - 1; col > 0; col -= 2) {\n      if (col == 6) col--;\n      while (!0) {\n        for (var c = 0; c < 2; c++) {\n          if (this.modules[row][col - c] == null) {\n            var dark = !1;\n            if (byteIndex < data.length) {\n              dark = (data[byteIndex] >>> bitIndex & 1) == 1;\n            }\n            var mask = QRUtil.getMask(maskPattern, row, col - c);\n            if (mask) {\n              dark = !dark;\n            }\n            this.modules[row][col - c] = dark;\n            bitIndex--;\n            if (bitIndex == -1) {\n              byteIndex++;\n              bitIndex = 7;\n            }\n          }\n        }\n        row += inc;\n        if (row < 0 || this.moduleCount <= row) {\n          row -= inc;\n          inc = -inc;\n          break;\n        }\n      }\n    }\n  }\n};\nQRCodeModel.PAD0 = 0xec;\nQRCodeModel.PAD1 = 0x11;\nQRCodeModel.createData = function (typeNumber, errorCorrectLevel, dataList) {\n  var rsBlocks = QRRSBlock.getRSBlocks(typeNumber, errorCorrectLevel);\n  var buffer = new QRBitBuffer();\n  for (var i = 0; i < dataList.length; i++) {\n    var data = dataList[i];\n    buffer.put(data.mode, 4);\n    buffer.put(data.getLength(), QRUtil.getLengthInBits(data.mode, typeNumber));\n    data.write(buffer);\n  }\n  var totalDataCount = 0;\n  for (var i = 0; i < rsBlocks.length; i++) {\n    totalDataCount += rsBlocks[i].dataCount;\n  }\n  if (buffer.getLengthInBits() > totalDataCount * 8) {\n    throw new Error(\"code length overflow. (\" + buffer.getLengthInBits() + \">\" + totalDataCount * 8 + \")\");\n  }\n  if (buffer.getLengthInBits() + 4 <= totalDataCount * 8) {\n    buffer.put(0, 4);\n  }\n  while (buffer.getLengthInBits() % 8 != 0) {\n    buffer.putBit(!1);\n  }\n  while (!0) {\n    if (buffer.getLengthInBits() >= totalDataCount * 8) {\n      break;\n    }\n    buffer.put(QRCodeModel.PAD0, 8);\n    if (buffer.getLengthInBits() >= totalDataCount * 8) {\n      break;\n    }\n    buffer.put(QRCodeModel.PAD1, 8);\n  }\n  return QRCodeModel.createBytes(buffer, rsBlocks);\n};\nQRCodeModel.createBytes = function (buffer, rsBlocks) {\n  var offset = 0;\n  var maxDcCount = 0;\n  var maxEcCount = 0;\n  var dcdata = new Array(rsBlocks.length);\n  var ecdata = new Array(rsBlocks.length);\n  for (var r = 0; r < rsBlocks.length; r++) {\n    var dcCount = rsBlocks[r].dataCount;\n    var ecCount = rsBlocks[r].totalCount - dcCount;\n    maxDcCount = Math.max(maxDcCount, dcCount);\n    maxEcCount = Math.max(maxEcCount, ecCount);\n    dcdata[r] = new Array(dcCount);\n    for (var i = 0; i < dcdata[r].length; i++) {\n      dcdata[r][i] = 0xff & buffer.buffer[i + offset];\n    }\n    offset += dcCount;\n    var rsPoly = QRUtil.getErrorCorrectPolynomial(ecCount);\n    var rawPoly = new QRPolynomial(dcdata[r], rsPoly.getLength() - 1);\n    var modPoly = rawPoly.mod(rsPoly);\n    ecdata[r] = new Array(rsPoly.getLength() - 1);\n    for (var i = 0; i < ecdata[r].length; i++) {\n      var modIndex = i + modPoly.getLength() - ecdata[r].length;\n      ecdata[r][i] = modIndex >= 0 ? modPoly.get(modIndex) : 0;\n    }\n  }\n  var totalCodeCount = 0;\n  for (var i = 0; i < rsBlocks.length; i++) {\n    totalCodeCount += rsBlocks[i].totalCount;\n  }\n  var data = new Array(totalCodeCount);\n  var index = 0;\n  for (var i = 0; i < maxDcCount; i++) {\n    for (var r = 0; r < rsBlocks.length; r++) {\n      if (i < dcdata[r].length) {\n        data[index++] = dcdata[r][i];\n      }\n    }\n  }\n  for (var i = 0; i < maxEcCount; i++) {\n    for (var r = 0; r < rsBlocks.length; r++) {\n      if (i < ecdata[r].length) {\n        data[index++] = ecdata[r][i];\n      }\n    }\n  }\n  return data;\n};\nvar QRMode = {\n  MODE_NUMBER: 1 << 0,\n  MODE_ALPHA_NUM: 1 << 1,\n  MODE_8BIT_BYTE: 1 << 2,\n  MODE_KANJI: 1 << 3\n};\nvar QRErrorCorrectLevel = { L: 1, M: 0, Q: 3, H: 2 };\nvar QRMaskPattern = {\n  PATTERN000: 0,\n  PATTERN001: 1,\n  PATTERN010: 2,\n  PATTERN011: 3,\n  PATTERN100: 4,\n  PATTERN101: 5,\n  PATTERN110: 6,\n  PATTERN111: 7\n};\nvar QRUtil = {\n  PATTERN_POSITION_TABLE: [[], [6, 18], [6, 22], [6, 26], [6, 30], [6, 34], [6, 22, 38], [6, 24, 42], [6, 26, 46], [6, 28, 50], [6, 30, 54], [6, 32, 58], [6, 34, 62], [6, 26, 46, 66], [6, 26, 48, 70], [6, 26, 50, 74], [6, 30, 54, 78], [6, 30, 56, 82], [6, 30, 58, 86], [6, 34, 62, 90], [6, 28, 50, 72, 94], [6, 26, 50, 74, 98], [6, 30, 54, 78, 102], [6, 28, 54, 80, 106], [6, 32, 58, 84, 110], [6, 30, 58, 86, 114], [6, 34, 62, 90, 118], [6, 26, 50, 74, 98, 122], [6, 30, 54, 78, 102, 126], [6, 26, 52, 78, 104, 130], [6, 30, 56, 82, 108, 134], [6, 34, 60, 86, 112, 138], [6, 30, 58, 86, 114, 142], [6, 34, 62, 90, 118, 146], [6, 30, 54, 78, 102, 126, 150], [6, 24, 50, 76, 102, 128, 154], [6, 28, 54, 80, 106, 132, 158], [6, 32, 58, 84, 110, 136, 162], [6, 26, 54, 82, 110, 138, 166], [6, 30, 58, 86, 114, 142, 170]],\n  G15: 1 << 10 | 1 << 8 | 1 << 5 | 1 << 4 | 1 << 2 | 1 << 1 | 1 << 0,\n  G18: 1 << 12 | 1 << 11 | 1 << 10 | 1 << 9 | 1 << 8 | 1 << 5 | 1 << 2 | 1 << 0,\n  G15_MASK: 1 << 14 | 1 << 12 | 1 << 10 | 1 << 4 | 1 << 1,\n  getBCHTypeInfo: function getBCHTypeInfo(data) {\n    var d = data << 10;\n    while (QRUtil.getBCHDigit(d) - QRUtil.getBCHDigit(QRUtil.G15) >= 0) {\n      d ^= QRUtil.G15 << QRUtil.getBCHDigit(d) - QRUtil.getBCHDigit(QRUtil.G15);\n    }\n    return (data << 10 | d) ^ QRUtil.G15_MASK;\n  },\n  getBCHTypeNumber: function getBCHTypeNumber(data) {\n    var d = data << 12;\n    while (QRUtil.getBCHDigit(d) - QRUtil.getBCHDigit(QRUtil.G18) >= 0) {\n      d ^= QRUtil.G18 << QRUtil.getBCHDigit(d) - QRUtil.getBCHDigit(QRUtil.G18);\n    }\n    return data << 12 | d;\n  },\n  getBCHDigit: function getBCHDigit(data) {\n    var digit = 0;\n    while (data != 0) {\n      digit++;\n      data >>>= 1;\n    }\n    return digit;\n  },\n  getPatternPosition: function getPatternPosition(typeNumber) {\n    return QRUtil.PATTERN_POSITION_TABLE[typeNumber - 1];\n  },\n  getMask: function getMask(maskPattern, i, j) {\n    switch (maskPattern) {\n      case QRMaskPattern.PATTERN000:\n        return (i + j) % 2 == 0;\n      case QRMaskPattern.PATTERN001:\n        return i % 2 == 0;\n      case QRMaskPattern.PATTERN010:\n        return j % 3 == 0;\n      case QRMaskPattern.PATTERN011:\n        return (i + j) % 3 == 0;\n      case QRMaskPattern.PATTERN100:\n        return (Math.floor(i / 2) + Math.floor(j / 3)) % 2 == 0;\n      case QRMaskPattern.PATTERN101:\n        return i * j % 2 + i * j % 3 == 0;\n      case QRMaskPattern.PATTERN110:\n        return (i * j % 2 + i * j % 3) % 2 == 0;\n      case QRMaskPattern.PATTERN111:\n        return (i * j % 3 + (i + j) % 2) % 2 == 0;\n      default:\n        throw new Error(\"bad maskPattern:\" + maskPattern);\n    }\n  },\n  getErrorCorrectPolynomial: function getErrorCorrectPolynomial(errorCorrectLength) {\n    var a = new QRPolynomial([1], 0);\n    for (var i = 0; i < errorCorrectLength; i++) {\n      a = a.multiply(new QRPolynomial([1, QRMath.gexp(i)], 0));\n    }\n    return a;\n  },\n  getLengthInBits: function getLengthInBits(mode, type) {\n    if (1 <= type && type < 10) {\n      switch (mode) {\n        case QRMode.MODE_NUMBER:\n          return 10;\n        case QRMode.MODE_ALPHA_NUM:\n          return 9;\n        case QRMode.MODE_8BIT_BYTE:\n          return 8;\n        case QRMode.MODE_KANJI:\n          return 8;\n        default:\n          throw new Error(\"mode:\" + mode);\n      }\n    } else if (type < 27) {\n      switch (mode) {\n        case QRMode.MODE_NUMBER:\n          return 12;\n        case QRMode.MODE_ALPHA_NUM:\n          return 11;\n        case QRMode.MODE_8BIT_BYTE:\n          return 16;\n        case QRMode.MODE_KANJI:\n          return 10;\n        default:\n          throw new Error(\"mode:\" + mode);\n      }\n    } else if (type < 41) {\n      switch (mode) {\n        case QRMode.MODE_NUMBER:\n          return 14;\n        case QRMode.MODE_ALPHA_NUM:\n          return 13;\n        case QRMode.MODE_8BIT_BYTE:\n          return 16;\n        case QRMode.MODE_KANJI:\n          return 12;\n        default:\n          throw new Error(\"mode:\" + mode);\n      }\n    } else {\n      throw new Error(\"type:\" + type);\n    }\n  },\n  getLostPoint: function getLostPoint(qrCode) {\n    var moduleCount = qrCode.getModuleCount();\n    var lostPoint = 0;\n    for (var row = 0; row < moduleCount; row++) {\n      for (var col = 0; col < moduleCount; col++) {\n        var sameCount = 0;\n        var dark = qrCode.isDark(row, col);\n        for (var r = -1; r <= 1; r++) {\n          if (row + r < 0 || moduleCount <= row + r) {\n            continue;\n          }\n          for (var c = -1; c <= 1; c++) {\n            if (col + c < 0 || moduleCount <= col + c) {\n              continue;\n            }\n            if (r == 0 && c == 0) {\n              continue;\n            }\n            if (dark == qrCode.isDark(row + r, col + c)) {\n              sameCount++;\n            }\n          }\n        }\n        if (sameCount > 5) {\n          lostPoint += 3 + sameCount - 5;\n        }\n      }\n    }\n    for (var row = 0; row < moduleCount - 1; row++) {\n      for (var col = 0; col < moduleCount - 1; col++) {\n        var count = 0;\n        if (qrCode.isDark(row, col)) count++;\n        if (qrCode.isDark(row + 1, col)) count++;\n        if (qrCode.isDark(row, col + 1)) count++;\n        if (qrCode.isDark(row + 1, col + 1)) count++;\n        if (count == 0 || count == 4) {\n          lostPoint += 3;\n        }\n      }\n    }\n    for (var row = 0; row < moduleCount; row++) {\n      for (var col = 0; col < moduleCount - 6; col++) {\n        if (qrCode.isDark(row, col) && !qrCode.isDark(row, col + 1) && qrCode.isDark(row, col + 2) && qrCode.isDark(row, col + 3) && qrCode.isDark(row, col + 4) && !qrCode.isDark(row, col + 5) && qrCode.isDark(row, col + 6)) {\n          lostPoint += 40;\n        }\n      }\n    }\n    for (var col = 0; col < moduleCount; col++) {\n      for (var row = 0; row < moduleCount - 6; row++) {\n        if (qrCode.isDark(row, col) && !qrCode.isDark(row + 1, col) && qrCode.isDark(row + 2, col) && qrCode.isDark(row + 3, col) && qrCode.isDark(row + 4, col) && !qrCode.isDark(row + 5, col) && qrCode.isDark(row + 6, col)) {\n          lostPoint += 40;\n        }\n      }\n    }\n    var darkCount = 0;\n    for (var col = 0; col < moduleCount; col++) {\n      for (var row = 0; row < moduleCount; row++) {\n        if (qrCode.isDark(row, col)) {\n          darkCount++;\n        }\n      }\n    }\n    var ratio = Math.abs(100 * darkCount / moduleCount / moduleCount - 50) / 5;\n    lostPoint += ratio * 10;\n    return lostPoint;\n  }\n};\nvar QRMath = {\n  glog: function glog(n) {\n    if (n < 1) {\n      throw new Error(\"glog(\" + n + \")\");\n    }\n    return QRMath.LOG_TABLE[n];\n  },\n  gexp: function gexp(n) {\n    while (n < 0) {\n      n += 255;\n    }\n    while (n >= 256) {\n      n -= 255;\n    }\n    return QRMath.EXP_TABLE[n];\n  },\n  EXP_TABLE: new Array(256),\n  LOG_TABLE: new Array(256)\n};\nfor (var i = 0; i < 8; i++) {\n  QRMath.EXP_TABLE[i] = 1 << i;\n}\nfor (var i = 8; i < 256; i++) {\n  QRMath.EXP_TABLE[i] = QRMath.EXP_TABLE[i - 4] ^ QRMath.EXP_TABLE[i - 5] ^ QRMath.EXP_TABLE[i - 6] ^ QRMath.EXP_TABLE[i - 8];\n}\nfor (var i = 0; i < 255; i++) {\n  QRMath.LOG_TABLE[QRMath.EXP_TABLE[i]] = i;\n}\n\nfunction QRPolynomial(num, shift) {\n  if (num.length == undefined) {\n    throw new Error(num.length + \"/\" + shift);\n  }\n  var offset = 0;\n  while (offset < num.length && num[offset] == 0) {\n    offset++;\n  }\n  this.num = new Array(num.length - offset + shift);\n  for (var i = 0; i < num.length - offset; i++) {\n    this.num[i] = num[i + offset];\n  }\n}\n\nQRPolynomial.prototype = {\n  get: function get(index) {\n    return this.num[index];\n  },\n  getLength: function getLength() {\n    return this.num.length;\n  },\n  multiply: function multiply(e) {\n    var num = new Array(this.getLength() + e.getLength() - 1);\n    for (var i = 0; i < this.getLength(); i++) {\n      for (var j = 0; j < e.getLength(); j++) {\n        num[i + j] ^= QRMath.gexp(QRMath.glog(this.get(i)) + QRMath.glog(e.get(j)));\n      }\n    }\n    return new QRPolynomial(num, 0);\n  },\n  mod: function mod(e) {\n    if (this.getLength() - e.getLength() < 0) {\n      return this;\n    }\n    var ratio = QRMath.glog(this.get(0)) - QRMath.glog(e.get(0));\n    var num = new Array(this.getLength());\n    for (var i = 0; i < this.getLength(); i++) {\n      num[i] = this.get(i);\n    }\n    for (var i = 0; i < e.getLength(); i++) {\n      num[i] ^= QRMath.gexp(QRMath.glog(e.get(i)) + ratio);\n    }\n    return new QRPolynomial(num, 0).mod(e);\n  }\n};\n\nfunction QRRSBlock(totalCount, dataCount) {\n  this.totalCount = totalCount;\n  this.dataCount = dataCount;\n}\n\nQRRSBlock.RS_BLOCK_TABLE = [[1, 26, 19], [1, 26, 16], [1, 26, 13], [1, 26, 9], [1, 44, 34], [1, 44, 28], [1, 44, 22], [1, 44, 16], [1, 70, 55], [1, 70, 44], [2, 35, 17], [2, 35, 13], [1, 100, 80], [2, 50, 32], [2, 50, 24], [4, 25, 9], [1, 134, 108], [2, 67, 43], [2, 33, 15, 2, 34, 16], [2, 33, 11, 2, 34, 12], [2, 86, 68], [4, 43, 27], [4, 43, 19], [4, 43, 15], [2, 98, 78], [4, 49, 31], [2, 32, 14, 4, 33, 15], [4, 39, 13, 1, 40, 14], [2, 121, 97], [2, 60, 38, 2, 61, 39], [4, 40, 18, 2, 41, 19], [4, 40, 14, 2, 41, 15], [2, 146, 116], [3, 58, 36, 2, 59, 37], [4, 36, 16, 4, 37, 17], [4, 36, 12, 4, 37, 13], [2, 86, 68, 2, 87, 69], [4, 69, 43, 1, 70, 44], [6, 43, 19, 2, 44, 20], [6, 43, 15, 2, 44, 16], [4, 101, 81], [1, 80, 50, 4, 81, 51], [4, 50, 22, 4, 51, 23], [3, 36, 12, 8, 37, 13], [2, 116, 92, 2, 117, 93], [6, 58, 36, 2, 59, 37], [4, 46, 20, 6, 47, 21], [7, 42, 14, 4, 43, 15], [4, 133, 107], [8, 59, 37, 1, 60, 38], [8, 44, 20, 4, 45, 21], [12, 33, 11, 4, 34, 12], [3, 145, 115, 1, 146, 116], [4, 64, 40, 5, 65, 41], [11, 36, 16, 5, 37, 17], [11, 36, 12, 5, 37, 13], [5, 109, 87, 1, 110, 88], [5, 65, 41, 5, 66, 42], [5, 54, 24, 7, 55, 25], [11, 36, 12], [5, 122, 98, 1, 123, 99], [7, 73, 45, 3, 74, 46], [15, 43, 19, 2, 44, 20], [3, 45, 15, 13, 46, 16], [1, 135, 107, 5, 136, 108], [10, 74, 46, 1, 75, 47], [1, 50, 22, 15, 51, 23], [2, 42, 14, 17, 43, 15], [5, 150, 120, 1, 151, 121], [9, 69, 43, 4, 70, 44], [17, 50, 22, 1, 51, 23], [2, 42, 14, 19, 43, 15], [3, 141, 113, 4, 142, 114], [3, 70, 44, 11, 71, 45], [17, 47, 21, 4, 48, 22], [9, 39, 13, 16, 40, 14], [3, 135, 107, 5, 136, 108], [3, 67, 41, 13, 68, 42], [15, 54, 24, 5, 55, 25], [15, 43, 15, 10, 44, 16], [4, 144, 116, 4, 145, 117], [17, 68, 42], [17, 50, 22, 6, 51, 23], [19, 46, 16, 6, 47, 17], [2, 139, 111, 7, 140, 112], [17, 74, 46], [7, 54, 24, 16, 55, 25], [34, 37, 13], [4, 151, 121, 5, 152, 122], [4, 75, 47, 14, 76, 48], [11, 54, 24, 14, 55, 25], [16, 45, 15, 14, 46, 16], [6, 147, 117, 4, 148, 118], [6, 73, 45, 14, 74, 46], [11, 54, 24, 16, 55, 25], [30, 46, 16, 2, 47, 17], [8, 132, 106, 4, 133, 107], [8, 75, 47, 13, 76, 48], [7, 54, 24, 22, 55, 25], [22, 45, 15, 13, 46, 16], [10, 142, 114, 2, 143, 115], [19, 74, 46, 4, 75, 47], [28, 50, 22, 6, 51, 23], [33, 46, 16, 4, 47, 17], [8, 152, 122, 4, 153, 123], [22, 73, 45, 3, 74, 46], [8, 53, 23, 26, 54, 24], [12, 45, 15, 28, 46, 16], [3, 147, 117, 10, 148, 118], [3, 73, 45, 23, 74, 46], [4, 54, 24, 31, 55, 25], [11, 45, 15, 31, 46, 16], [7, 146, 116, 7, 147, 117], [21, 73, 45, 7, 74, 46], [1, 53, 23, 37, 54, 24], [19, 45, 15, 26, 46, 16], [5, 145, 115, 10, 146, 116], [19, 75, 47, 10, 76, 48], [15, 54, 24, 25, 55, 25], [23, 45, 15, 25, 46, 16], [13, 145, 115, 3, 146, 116], [2, 74, 46, 29, 75, 47], [42, 54, 24, 1, 55, 25], [23, 45, 15, 28, 46, 16], [17, 145, 115], [10, 74, 46, 23, 75, 47], [10, 54, 24, 35, 55, 25], [19, 45, 15, 35, 46, 16], [17, 145, 115, 1, 146, 116], [14, 74, 46, 21, 75, 47], [29, 54, 24, 19, 55, 25], [11, 45, 15, 46, 46, 16], [13, 145, 115, 6, 146, 116], [14, 74, 46, 23, 75, 47], [44, 54, 24, 7, 55, 25], [59, 46, 16, 1, 47, 17], [12, 151, 121, 7, 152, 122], [12, 75, 47, 26, 76, 48], [39, 54, 24, 14, 55, 25], [22, 45, 15, 41, 46, 16], [6, 151, 121, 14, 152, 122], [6, 75, 47, 34, 76, 48], [46, 54, 24, 10, 55, 25], [2, 45, 15, 64, 46, 16], [17, 152, 122, 4, 153, 123], [29, 74, 46, 14, 75, 47], [49, 54, 24, 10, 55, 25], [24, 45, 15, 46, 46, 16], [4, 152, 122, 18, 153, 123], [13, 74, 46, 32, 75, 47], [48, 54, 24, 14, 55, 25], [42, 45, 15, 32, 46, 16], [20, 147, 117, 4, 148, 118], [40, 75, 47, 7, 76, 48], [43, 54, 24, 22, 55, 25], [10, 45, 15, 67, 46, 16], [19, 148, 118, 6, 149, 119], [18, 75, 47, 31, 76, 48], [34, 54, 24, 34, 55, 25], [20, 45, 15, 61, 46, 16]];\nQRRSBlock.getRSBlocks = function (typeNumber, errorCorrectLevel) {\n  var rsBlock = QRRSBlock.getRsBlockTable(typeNumber, errorCorrectLevel);\n  if (rsBlock == undefined) {\n    throw new Error(\"bad rs block @ typeNumber:\" + typeNumber + \"/errorCorrectLevel:\" + errorCorrectLevel);\n  }\n  var length = rsBlock.length / 3;\n  var list = [];\n  for (var i = 0; i < length; i++) {\n    var count = rsBlock[i * 3 + 0];\n    var totalCount = rsBlock[i * 3 + 1];\n    var dataCount = rsBlock[i * 3 + 2];\n    for (var j = 0; j < count; j++) {\n      list.push(new QRRSBlock(totalCount, dataCount));\n    }\n  }\n  return list;\n};\nQRRSBlock.getRsBlockTable = function (typeNumber, errorCorrectLevel) {\n  switch (errorCorrectLevel) {\n    case QRErrorCorrectLevel.L:\n      return QRRSBlock.RS_BLOCK_TABLE[(typeNumber - 1) * 4 + 0];\n    case QRErrorCorrectLevel.M:\n      return QRRSBlock.RS_BLOCK_TABLE[(typeNumber - 1) * 4 + 1];\n    case QRErrorCorrectLevel.Q:\n      return QRRSBlock.RS_BLOCK_TABLE[(typeNumber - 1) * 4 + 2];\n    case QRErrorCorrectLevel.H:\n      return QRRSBlock.RS_BLOCK_TABLE[(typeNumber - 1) * 4 + 3];\n    default:\n      return undefined;\n  }\n};\n\nfunction QRBitBuffer() {\n  this.buffer = [];\n  this.length = 0;\n}\n\nQRBitBuffer.prototype = {\n  get: function get(index) {\n    var bufIndex = Math.floor(index / 8);\n    return (this.buffer[bufIndex] >>> 7 - index % 8 & 1) == 1;\n  },\n  put: function put(num, length) {\n    for (var i = 0; i < length; i++) {\n      this.putBit((num >>> length - i - 1 & 1) == 1);\n    }\n  },\n  getLengthInBits: function getLengthInBits() {\n    return this.length;\n  },\n  putBit: function putBit(bit) {\n    var bufIndex = Math.floor(this.length / 8);\n    if (this.buffer.length <= bufIndex) {\n      this.buffer.push(0);\n    }\n    if (bit) {\n      this.buffer[bufIndex] |= 0x80 >>> this.length % 8;\n    }\n    this.length++;\n  }\n};\nvar QRCodeLimitLength = [[17, 14, 11, 7], [32, 26, 20, 14], [53, 42, 32, 24], [78, 62, 46, 34], [106, 84, 60, 44], [134, 106, 74, 58], [154, 122, 86, 64], [192, 152, 108, 84], [230, 180, 130, 98], [271, 213, 151, 119], [321, 251, 177, 137], [367, 287, 203, 155], [425, 331, 241, 177], [458, 362, 258, 194], [520, 412, 292, 220], [586, 450, 322, 250], [644, 504, 364, 280], [718, 560, 394, 310], [792, 624, 442, 338], [858, 666, 482, 382], [929, 711, 509, 403], [1003, 779, 565, 439], [1091, 857, 611, 461], [1171, 911, 661, 511], [1273, 997, 715, 535], [1367, 1059, 751, 593], [1465, 1125, 805, 625], [1528, 1190, 868, 658], [1628, 1264, 908, 698], [1732, 1370, 982, 742], [1840, 1452, 1030, 790], [1952, 1538, 1112, 842], [2068, 1628, 1168, 898], [2188, 1722, 1228, 958], [2303, 1809, 1283, 983], [2431, 1911, 1351, 1051], [2563, 1989, 1423, 1093], [2699, 2099, 1499, 1139], [2809, 2213, 1579, 1219], [2953, 2331, 1663, 1273]];\n\n// END OF QR CODE CORE LIBRARY DEFINITION\n\nvar Drawing = function () {\n  // Drawing in Canvas\n  function _onMakeImage() {\n    this._elImage.src = this._elCanvas.toDataURL(\"image/png\");\n    this._elImage.style.display = \"block\";\n    this._elCanvas.style.display = \"none\";\n  }\n\n  function _safeSetDataURI(fSuccess, fFail) {\n    var self = this;\n    self._fFail = fFail;\n    self._fSuccess = fSuccess;\n\n    // Check it just once\n    if (self._bSupportDataURI === null) {\n      var el = document.createElement(\"img\");\n      var fOnError = function fOnError() {\n        self._bSupportDataURI = false;\n\n        if (self._fFail) {\n          self._fFail.call(self);\n        }\n      };\n      var fOnSuccess = function fOnSuccess() {\n        self._bSupportDataURI = true;\n\n        if (self._fSuccess) {\n          self._fSuccess.call(self);\n        }\n      };\n\n      el.onabort = fOnError;\n      el.onerror = fOnError;\n      el.onload = fOnSuccess;\n      el.src = \"data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg==\"; // the Image contains 1px data.\n      return;\n    } else if (self._bSupportDataURI === true && self._fSuccess) {\n      self._fSuccess.call(self);\n    } else if (self._bSupportDataURI === false && self._fFail) {\n      self._fFail.call(self);\n    }\n  }\n\n  var Drawing = function Drawing(htOption) {\n    this._bIsPainted = false;\n\n    this._htOption = htOption;\n    this._elCanvas = document.createElement(\"canvas\");\n    this._elCanvas.width = htOption.size;\n    this._elCanvas.height = htOption.size;\n    this._oContext = this._elCanvas.getContext(\"2d\");\n    this._bIsPainted = false;\n    this._elImage = document.createElement(\"img\");\n    this._elImage.alt = \"Scan me!\";\n    this._elImage.style.display = \"none\";\n    this._bSupportDataURI = null;\n    this._callback = htOption.callback;\n    this._bindElement = htOption.bindElement;\n  };\n\n  Drawing.prototype.draw = function (oQRCode) {\n    var _elImage = this._elImage;\n    var _tCanvas = document.createElement(\"canvas\");\n    var _oContext = _tCanvas.getContext(\"2d\");\n    // var _oContext = this._oContext;\n    var _htOption = this._htOption;\n\n    var nCount = oQRCode.getModuleCount();\n    var rawSize = _htOption.size;\n    var rawMargin = _htOption.margin;\n\n    if (rawMargin < 0 || rawMargin * 2 >= rawSize) {\n      rawMargin = 0;\n    }\n\n    var margin = Math.ceil(rawMargin);\n\n    var rawViewportSize = rawSize - 2 * rawMargin;\n\n    var whiteMargin = _htOption.whiteMargin;\n    var backgroundDimming = _htOption.backgroundDimming;\n    var nSize = Math.ceil(rawViewportSize / nCount);\n    var viewportSize = nSize * nCount;\n    var size = viewportSize + 2 * margin;\n\n    var gifBackground = undefined;\n    var gifFrames = undefined;\n\n    _tCanvas.width = size;\n    _tCanvas.height = size;\n\n    var dotScale = _htOption.dotScale;\n    _elImage.style.display = \"none\";\n    this.clear();\n\n    if (dotScale <= 0 || dotScale > 1) {\n      throw new Error(\"Scale should be in range (0, 1).\");\n    }\n\n    // Leave room for margin\n    _oContext.save();\n    _oContext.translate(margin, margin);\n\n    var _bkgCanvas = document.createElement(\"canvas\");\n    _bkgCanvas.width = size;\n    _bkgCanvas.height = size;\n    var _bContext = _bkgCanvas.getContext(\"2d\");\n\n    var _maskCanvas = undefined;\n    var _mContext = undefined;\n\n    if (_htOption.gifBackground !== undefined) {\n      var gif = new __WEBPACK_IMPORTED_MODULE_0__Gif__[\"a\" /* default */](_htOption.gifBackground);\n\n      if (!gif.raw.hasImages) {\n        throw new Error(\"An invalid gif has been selected as the background.\");\n      }\n      gifBackground = gif;\n      gifFrames = gif.decompressFrames(true);\n      // console.log(gifFrames);\n      if (_htOption.autoColor) {\n        var r = 0,\n            g = 0,\n            b = 0;\n        var count = 0;\n        for (var i = 0; i < gifFrames[0].colorTable.length; i++) {\n          var c = gifFrames[0].colorTable[i];\n          if (c[0] > 200 || c[1] > 200 || c[2] > 200) continue;\n          if (c[0] === 0 && c[1] === 0 && c[2] === 0) continue;\n          count++;\n          r += c[0];\n          g += c[1];\n          b += c[2];\n        }\n\n        r = ~~(r / count);\n        g = ~~(g / count);\n        b = ~~(b / count);\n        // console.log(\"rgb(\" + r + \", \" + g + \", \" + b + \")\");\n        _htOption.colorDark = \"rgb(\" + r + \", \" + g + \", \" + b + \")\";\n      }\n    } else if (_htOption.backgroundImage !== undefined) {\n      if (_htOption.autoColor) {\n        var avgRGB = getAverageRGB(_htOption.backgroundImage);\n        _htOption.colorDark = \"rgb(\" + avgRGB.r + \", \" + avgRGB.g + \", \" + avgRGB.b + \")\";\n      }\n\n      if (_htOption.maskedDots) {\n        _maskCanvas = document.createElement(\"canvas\");\n        _maskCanvas.width = size;\n        _maskCanvas.height = size;\n        _mContext = _maskCanvas.getContext(\"2d\");\n        /*\n                     _mContext.drawImage(_htOption.backgroundImage,\n                     0, 0, _htOption.backgroundImage.width, _htOption.backgroundImage.height,\n                     whiteMargin ? 0 : -margin, whiteMargin ? 0 : -margin, whiteMargin ? viewportSize : size, whiteMargin ? viewportSize : size);\n                     */\n        _mContext.drawImage(_htOption.backgroundImage, 0, 0, _htOption.backgroundImage.width, _htOption.backgroundImage.height, 0, 0, size, size);\n\n        _bContext.rect(0, 0, size, size);\n        _bContext.fillStyle = \"#ffffff\";\n        _bContext.fill();\n      } else {\n        /*\n                     _bContext.drawImage(_htOption.backgroundImage,\n                     0, 0, _htOption.backgroundImage.width, _htOption.backgroundImage.height,\n                     whiteMargin ? 0 : -margin, whiteMargin ? 0 : -margin, whiteMargin ? viewportSize : size, whiteMargin ? viewportSize : size);\n                     */\n        _bContext.drawImage(_htOption.backgroundImage, 0, 0, _htOption.backgroundImage.width, _htOption.backgroundImage.height, 0, 0, size, size);\n        _bContext.rect(0, 0, size, size);\n        _bContext.fillStyle = backgroundDimming;\n        _bContext.fill();\n      }\n    } else {\n      _bContext.rect(0, 0, size, size);\n      _bContext.fillStyle = _htOption.backgroundColor;\n      _bContext.fill();\n    }\n\n    if (_htOption.binarize) {\n      _htOption.colorDark = \"#000000\";\n      _htOption.colorLight = \"#FFFFFF\";\n    }\n\n    var agnPatternCenter = QRUtil.getPatternPosition(oQRCode.typeNumber);\n    var xyOffset = (1 - dotScale) * 0.5;\n    for (var row = 0; row < nCount; row++) {\n      for (var col = 0; col < nCount; col++) {\n        var bIsDark = oQRCode.isDark(row, col);\n\n        // var isBlkPosCtr = ((col < 8 && (row < 8 || row >= nCount - 8)) || (col >= nCount - 8 && row < 8) || (col < nCount - 4 && col >= nCount - 4 - 5 && row < nCount - 4 && row >= nCount - 4 - 5));\n        var isBlkPosCtr = col < 8 && (row < 8 || row >= nCount - 8) || col >= nCount - 8 && row < 8;\n        var isBlkPos = col < 7 && (row < 7 || row >= nCount - 7) || col >= nCount - 7 && row < 7;\n        var bProtected = row === 6 || col === 6 || isBlkPosCtr;\n\n        for (var i = 0; i < agnPatternCenter.length - 1; i++) {\n          bProtected = bProtected || row >= agnPatternCenter[i] - 2 && row <= agnPatternCenter[i] + 2 && col >= agnPatternCenter[i] - 2 && col <= agnPatternCenter[i] + 2;\n        }\n\n        var nLeft = col * nSize + (bProtected ? 0 : xyOffset * nSize);\n        var nTop = row * nSize + (bProtected ? 0 : xyOffset * nSize);\n        _oContext.strokeStyle = bIsDark ? _htOption.colorDark : _htOption.colorLight;\n        _oContext.lineWidth = 0.5;\n        _oContext.fillStyle = bIsDark ? _htOption.colorDark : _htOption.colorLight; //_htOption.colorLight;\n        if (agnPatternCenter.length === 0) {\n          // if align pattern list is empty, then it means that we don't need to leave room for the align patterns\n          if (!bProtected) {\n            _fillRectWithMask(_oContext, nLeft, nTop, (bProtected ? isBlkPosCtr ? 1 : 1 : dotScale) * nSize, (bProtected ? isBlkPosCtr ? 1 : 1 : dotScale) * nSize, _maskCanvas, bIsDark);\n          }\n        } else {\n          var inAgnRange = col < nCount - 4 && col >= nCount - 4 - 5 && row < nCount - 4 && row >= nCount - 4 - 5;\n          if (!bProtected && !inAgnRange) _fillRectWithMask(_oContext, nLeft, nTop, (bProtected ? isBlkPosCtr ? 1 : 1 : dotScale) * nSize, (bProtected ? isBlkPosCtr ? 1 : 1 : dotScale) * nSize, _maskCanvas, bIsDark);\n        }\n      }\n    }\n\n    // Draw POSITION protectors\n    var protectorStyle = _htOption.colorLight;\n    _oContext.fillStyle = protectorStyle;\n    _oContext.fillRect(0, 0, 8 * nSize, 8 * nSize);\n    _oContext.fillRect(0, (nCount - 8) * nSize, 8 * nSize, 8 * nSize);\n    _oContext.fillRect((nCount - 8) * nSize, 0, 8 * nSize, 8 * nSize);\n    _oContext.fillRect(8 * nSize, 6 * nSize, (nCount - 8 - 8) * nSize, nSize);\n    _oContext.fillRect(6 * nSize, 8 * nSize, nSize, (nCount - 8 - 8) * nSize);\n\n    // Draw ALIGN protectors\n    var edgeCenter = agnPatternCenter[agnPatternCenter.length - 1];\n    for (var i = 0; i < agnPatternCenter.length; i++) {\n      for (var j = 0; j < agnPatternCenter.length; j++) {\n        var agnX = agnPatternCenter[j];\n        var agnY = agnPatternCenter[i];\n        if (agnX === 6 && (agnY === 6 || agnY === edgeCenter)) {\n          continue;\n        } else if (agnY === 6 && (agnX === 6 || agnX === edgeCenter)) {\n          continue;\n        } else if (agnX !== 6 && agnX !== edgeCenter && agnY !== 6 && agnY !== edgeCenter) {\n          _drawAlignProtector(_oContext, agnX, agnY, nSize, nSize);\n        } else {\n          _drawAlignProtector(_oContext, agnX, agnY, nSize, nSize);\n        }\n        // console.log(\"agnX=\" + agnX + \", agnY=\" + agnX);\n      }\n    }\n\n    // Draw POSITION patterns\n    _oContext.fillStyle = _htOption.colorDark;\n    _oContext.fillRect(0, 0, 7 * nSize, nSize);\n    _oContext.fillRect((nCount - 7) * nSize, 0, 7 * nSize, nSize);\n    _oContext.fillRect(0, 6 * nSize, 7 * nSize, nSize);\n    _oContext.fillRect((nCount - 7) * nSize, 6 * nSize, 7 * nSize, nSize);\n    _oContext.fillRect(0, (nCount - 7) * nSize, 7 * nSize, nSize);\n    _oContext.fillRect(0, (nCount - 7 + 6) * nSize, 7 * nSize, nSize);\n    _oContext.fillRect(0, 0, nSize, 7 * nSize);\n    _oContext.fillRect(6 * nSize, 0, nSize, 7 * nSize);\n    _oContext.fillRect((nCount - 7) * nSize, 0, nSize, 7 * nSize);\n    _oContext.fillRect((nCount - 7 + 6) * nSize, 0, nSize, 7 * nSize);\n    _oContext.fillRect(0, (nCount - 7) * nSize, nSize, 7 * nSize);\n    _oContext.fillRect(6 * nSize, (nCount - 7) * nSize, nSize, 7 * nSize);\n\n    _oContext.fillRect(2 * nSize, 2 * nSize, 3 * nSize, 3 * nSize);\n    _oContext.fillRect((nCount - 7 + 2) * nSize, 2 * nSize, 3 * nSize, 3 * nSize);\n    _oContext.fillRect(2 * nSize, (nCount - 7 + 2) * nSize, 3 * nSize, 3 * nSize);\n\n    for (var i = 0; i < nCount - 8; i += 2) {\n      _oContext.fillRect((8 + i) * nSize, 6 * nSize, nSize, nSize);\n      _oContext.fillRect(6 * nSize, (8 + i) * nSize, nSize, nSize);\n    }\n    for (var i = 0; i < agnPatternCenter.length; i++) {\n      for (var j = 0; j < agnPatternCenter.length; j++) {\n        var agnX = agnPatternCenter[j];\n        var agnY = agnPatternCenter[i];\n        if (agnX === 6 && (agnY === 6 || agnY === edgeCenter)) {\n          continue;\n        } else if (agnY === 6 && (agnX === 6 || agnX === edgeCenter)) {\n          continue;\n        } else if (agnX !== 6 && agnX !== edgeCenter && agnY !== 6 && agnY !== edgeCenter) {\n          _oContext.fillStyle = _htOption.colorLight;\n          _drawAlign(_oContext, agnX, agnY, nSize, nSize);\n        } else {\n          _oContext.fillStyle = _htOption.colorDark;\n          _drawAlign(_oContext, agnX, agnY, nSize, nSize);\n        }\n      }\n    }\n\n    // Fill the margin\n    if (whiteMargin) {\n      _oContext.fillStyle = _htOption.backgroundColor;\n      _oContext.fillRect(-margin, -margin, size, margin);\n      _oContext.fillRect(-margin, viewportSize, size, margin);\n      _oContext.fillRect(viewportSize, -margin, margin, size);\n      _oContext.fillRect(-margin, -margin, margin, size);\n    }\n\n    if (_htOption.logoImage !== undefined) {\n      var logoScale = _htOption.logoScale;\n      var logoMargin = _htOption.logoMargin;\n      var logoCornerRadius = _htOption.logoCornerRadius;\n      if (logoScale <= 0 || logoScale >= 1.0) {\n        logoScale = 0.2;\n      }\n      if (logoMargin < 0) {\n        logoMargin = 0;\n      }\n      if (logoCornerRadius < 0) {\n        logoCornerRadius = 0;\n      }\n\n      _oContext.restore();\n\n      var logoSize = viewportSize * logoScale;\n      var x = 0.5 * (size - logoSize);\n      var y = x;\n\n      _oContext.fillStyle = _htOption.logoBackgroundColor;\n      _oContext.save();\n      _prepareRoundedCornerClip(_oContext, x - logoMargin, y - logoMargin, logoSize + 2 * logoMargin, logoSize + 2 * logoMargin, logoCornerRadius);\n      _oContext.clip();\n      _oContext.fill();\n      _oContext.restore();\n\n      _oContext.save();\n      _prepareRoundedCornerClip(_oContext, x, y, logoSize, logoSize, logoCornerRadius);\n      _oContext.clip();\n      _oContext.drawImage(_htOption.logoImage, x, y, logoSize, logoSize);\n      _oContext.restore();\n    }\n\n    if (gifBackground === undefined) {\n      // Swap and merge the foreground and the background\n      _bContext.drawImage(_tCanvas, 0, 0, size, size);\n      _oContext.drawImage(_bkgCanvas, -margin, -margin, size, size);\n\n      // Binarize the final image\n      if (_htOption.binarize) {\n        var pixels = _oContext.getImageData(0, 0, size, size);\n        var threshold = 128;\n        if (parseInt(_htOption.binarizeThreshold) > 0 && parseInt(_htOption.binarizeThreshold) < 255) {\n          threshold = parseInt(_htOption.binarizeThreshold);\n        }\n        for (var i = 0; i < pixels.data.length; i += 4) {\n          // rgb in [0, 255]\n          var R = pixels.data[i];\n          var G = pixels.data[i + 1];\n          var B = pixels.data[i + 2];\n          var sum = _greyscale(R, G, B);\n          if (sum > threshold) {\n            pixels.data[i] = 255;\n            pixels.data[i + 1] = 255;\n            pixels.data[i + 2] = 255;\n          } else {\n            pixels.data[i] = 0;\n            pixels.data[i + 1] = 0;\n            pixels.data[i + 2] = 0;\n          }\n        }\n        _oContext.putImageData(pixels, 0, 0);\n      }\n\n      // Scale the final image\n      var _fCanvas = document.createElement(\"canvas\");\n      var _fContext = _fCanvas.getContext(\"2d\");\n      _fCanvas.width = rawSize;\n      _fCanvas.height = rawSize;\n      _fContext.drawImage(_tCanvas, 0, 0, rawSize, rawSize);\n      this._elCanvas = _fCanvas;\n\n      // Painting work completed\n      this._bIsPainted = true;\n      if (this._callback !== undefined) {\n        this._callback(this._elCanvas.toDataURL());\n      }\n      if (this._bindElement !== undefined) {\n        try {\n          var el = document.getElementById(this._bindElement);\n          if (el.nodeName === \"IMG\") {\n            el.src = this._elCanvas.toDataURL();\n          } else {\n            var elStyle = el.style;\n            elStyle[\"background-image\"] = \"url(\" + this._elCanvas.toDataURL() + \")\";\n            elStyle[\"background-size\"] = \"contain\";\n            elStyle[\"background-repeat\"] = \"no-repeat\";\n          }\n        } catch (e) {\n          console.error(e);\n        }\n      }\n    } else {\n      var gifOutput;\n\n      // Reuse in order to apply the patch\n      var rawBkg;\n      var hRawBkg;\n\n      var patchCanvas = document.createElement(\"canvas\");\n      var hPatchCanvas = patchCanvas.getContext(\"2d\");\n      var patchData;\n\n      gifFrames.forEach(function (frame) {\n        // console.log(frame);\n        if (gifOutput === undefined) {\n          gifOutput = new __WEBPACK_IMPORTED_MODULE_1__gifjs__[\"a\" /* default */]({\n            workers: 4,\n            quality: 10,\n            width: rawSize,\n            height: rawSize\n          });\n        }\n\n        if (rawBkg === undefined) {\n          rawBkg = document.createElement(\"canvas\");\n          hRawBkg = rawBkg.getContext(\"2d\");\n          rawBkg.width = frame.dims.width;\n          rawBkg.height = frame.dims.height;\n          hRawBkg.rect(0, 0, rawBkg.width, rawBkg.height);\n          hRawBkg.fillStyle = \"#ffffff\";\n          hRawBkg.fill();\n          // console.log(rawBkg);\n        }\n\n        if (!patchData || frame.dims.width !== patchCanvas.width || frame.dims.height !== patchCanvas.height) {\n          patchCanvas.width = frame.dims.width;\n          patchCanvas.height = frame.dims.height;\n          patchData = hPatchCanvas.createImageData(frame.dims.width, frame.dims.height);\n        }\n\n        patchData.data.set(frame.patch);\n        hPatchCanvas.putImageData(patchData, 0, 0);\n\n        hRawBkg.drawImage(patchCanvas, frame.dims.left, frame.dims.top);\n\n        var stdCanvas = document.createElement(\"canvas\");\n        stdCanvas.width = size;\n        stdCanvas.height = size;\n        var hStdCanvas = stdCanvas.getContext(\"2d\");\n\n        hStdCanvas.drawImage(rawBkg, 0, 0, size, size);\n        hStdCanvas.drawImage(_tCanvas, 0, 0, size, size);\n\n        // Scale the final image\n        var _fCanvas = document.createElement(\"canvas\");\n        var _fContext = _fCanvas.getContext(\"2d\");\n        _fCanvas.width = rawSize;\n        _fCanvas.height = rawSize;\n        _fContext.drawImage(stdCanvas, 0, 0, rawSize, rawSize);\n        // console.log(_fContext);\n        gifOutput.addFrame(_fContext, { copy: true, delay: frame.delay });\n      });\n\n      if (gifOutput === undefined) {\n        throw new Error(\"No frames.\");\n      }\n      var ref = this;\n      gifOutput.on(\"finished\", function (blob) {\n        // Painting work completed\n        var r = new FileReader();\n        r.onload = function (e) {\n          var data = e.target.result;\n          ref._bIsPainted = true;\n          if (ref._callback !== undefined) {\n            ref._callback(data);\n          }\n          if (ref._bindElement !== undefined) {\n            try {\n              var el = document.getElementById(ref._bindElement);\n              if (el.nodeName === \"IMG\") {\n                el.src = data;\n              } else {\n                var elStyle = el.style;\n                elStyle[\"background-image\"] = \"url(\" + data + \")\";\n                elStyle[\"background-size\"] = \"contain\";\n                elStyle[\"background-repeat\"] = \"no-repeat\";\n              }\n            } catch (e) {\n              console.error(e);\n            }\n          }\n        };\n        r.readAsDataURL(blob);\n      });\n\n      gifOutput.render();\n    }\n  };\n\n  Drawing.prototype.makeImage = function () {\n    if (this._bIsPainted) {\n      _safeSetDataURI.call(this, _onMakeImage);\n    }\n  };\n\n  Drawing.prototype.isPainted = function () {\n    return this._bIsPainted;\n  };\n\n  Drawing.prototype.clear = function () {\n    this._oContext.clearRect(0, 0, this._elCanvas.width, this._elCanvas.height);\n    this._bIsPainted = false;\n  };\n\n  Drawing.prototype.round = function (nNumber) {\n    if (!nNumber) {\n      return nNumber;\n    }\n\n    return Math.floor(nNumber * 1000) / 1000;\n  };\n\n  return Drawing;\n}();\n\n// Utilities and useful helpers\n\nfunction _getUTF8Length(sText) {\n  var replacedText = encodeURI(sText).toString().replace(/\\%[0-9a-fA-F]{2}/g, \"a\");\n  return replacedText.length + (replacedText.length != sText ? 3 : 0);\n}\n\nfunction _prepareRoundedCornerClip(ctx, x, y, w, h, r) {\n  ctx.beginPath();\n  ctx.moveTo(x, y);\n  ctx.arcTo(x + w, y, x + w, y + h, r);\n  ctx.arcTo(x + w, y + h, x, y + h, r);\n  ctx.arcTo(x, y + h, x, y, r);\n  ctx.arcTo(x, y, x + w, y, r);\n  ctx.closePath();\n}\n\nfunction _setPixel(imageData, p, r, g, b, a) {\n  var index = p * 4;\n  imageData.data[index + 0] = r;\n  imageData.data[index + 1] = g;\n  imageData.data[index + 2] = b;\n  imageData.data[index + 3] = a;\n}\n\nfunction _greyscale(r, g, b) {\n  return 0.3 * r + 0.59 * b + 0.11 * b;\n}\n\nfunction _fillRectWithMask(canvas, x, y, w, h, maskSrc, bDark) {\n  //console.log(\"maskSrc=\" + maskSrc);\n  if (maskSrc === undefined) {\n    canvas.fillRect(x, y, w, h);\n  } else {\n    canvas.drawImage(maskSrc, x, y, w, h, x, y, w, h);\n    var fill_ = canvas.fillStyle;\n    canvas.fillStyle = bDark ? \"rgba(0, 0, 0, .5)\" : \"rgba(255, 255, 255, .7)\";\n    canvas.fillRect(x, y, w, h);\n    canvas.fillStyle = fill_;\n  }\n}\n\nfunction _drawAlignProtector(context, centerX, centerY, nWidth, nHeight) {\n  context.clearRect((centerX - 2) * nWidth, (centerY - 2) * nHeight, 5 * nWidth, 5 * nHeight);\n  context.fillRect((centerX - 2) * nWidth, (centerY - 2) * nHeight, 5 * nWidth, 5 * nHeight);\n}\n\nfunction _drawAlign(context, centerX, centerY, nWidth, nHeight) {\n  context.fillRect((centerX - 2) * nWidth, (centerY - 2) * nHeight, nWidth, 4 * nHeight);\n  context.fillRect((centerX + 2) * nWidth, (centerY - 2 + 1) * nHeight, nWidth, 4 * nHeight);\n  context.fillRect((centerX - 2 + 1) * nWidth, (centerY - 2) * nHeight, 4 * nWidth, nHeight);\n  context.fillRect((centerX - 2) * nWidth, (centerY + 2) * nHeight, 4 * nWidth, nHeight);\n  context.fillRect(centerX * nWidth, centerY * nHeight, nWidth, nHeight);\n}\n\nAwesomeQRCode = function AwesomeQRCode() {};\n\nAwesomeQRCode.prototype.create = function (vOption) {\n  this._htOption = {\n    size: 800,\n    margin: 20,\n    typeNumber: 4,\n    colorDark: \"#000000\",\n    colorLight: \"rgba(255, 255, 255, 0.6)\",\n    logoBackgroundColor: '#ffffff',\n    correctLevel: QRErrorCorrectLevel.M,\n    backgroundImage: undefined,\n    backgroundDimming: \"rgba(0,0,0,0)\",\n    logoImage: undefined,\n    logoScale: 0.2,\n    logoMargin: 6,\n    logoCornerRadius: 8,\n    whiteMargin: true,\n    dotScale: 0.35,\n    maskedDots: false,\n    autoColor: true,\n    binarize: false,\n    binarizeThreshold: 128,\n    gifBackground: undefined,\n    callback: undefined,\n    bindElement: undefined,\n    backgroundColor: '#ffffff'\n  };\n\n  if (typeof vOption === \"string\") {\n    vOption = {\n      text: vOption\n    };\n  }\n\n  if (vOption) {\n    for (var i in vOption) {\n      this._htOption[i] = vOption[i];\n    }\n  }\n\n  this._oQRCode = null;\n  this._oDrawing = new Drawing(this._htOption);\n\n  if (this._htOption.text) {\n    this.makeCode(this._htOption.text);\n  }\n};\n\nfunction _getTypeNumber(sText, nCorrectLevel) {\n  var nType = 1;\n  var length = _getUTF8Length(sText);\n\n  for (var i = 0, len = QRCodeLimitLength.length; i <= len; i++) {\n    var nLimit = 0;\n\n    switch (nCorrectLevel) {\n      case QRErrorCorrectLevel.L:\n        nLimit = QRCodeLimitLength[i][0];\n        break;\n      case QRErrorCorrectLevel.M:\n        nLimit = QRCodeLimitLength[i][1];\n        break;\n      case QRErrorCorrectLevel.Q:\n        nLimit = QRCodeLimitLength[i][2];\n        break;\n      case QRErrorCorrectLevel.H:\n        nLimit = QRCodeLimitLength[i][3];\n        break;\n    }\n\n    if (length <= nLimit) {\n      break;\n    } else {\n      nType++;\n    }\n  }\n\n  if (nType > QRCodeLimitLength.length) {\n    throw new Error(\"Too long data\");\n  }\n\n  return nType;\n}\n\nAwesomeQRCode.prototype.makeCode = function (sText) {\n  //this._oQRCode = new QRCodeModel(_getTypeNumber(sText, this._htOption.correctLevel), this._htOption.correctLevel);\n  this._oQRCode = new QRCodeModel(-1, this._htOption.correctLevel);\n  this._oQRCode.addData(sText);\n  this._oQRCode.make();\n  this._oDrawing.draw(this._oQRCode);\n  this.makeImage();\n};\n\nAwesomeQRCode.prototype.makeImage = function () {\n  if (typeof this._oDrawing.makeImage == \"function\") {\n    this._oDrawing.makeImage();\n  }\n};\n\nAwesomeQRCode.prototype.clear = function () {\n  this._oDrawing.clear();\n};\n\nAwesomeQRCode.CorrectLevel = QRErrorCorrectLevel;\n\nfunction getAverageRGB(imgEl) {\n  var blockSize = 5,\n      defaultRGB = {\n    r: 0,\n    g: 0,\n    b: 0\n  },\n      canvas = document.createElement(\"canvas\"),\n      context = canvas.getContext && canvas.getContext(\"2d\"),\n      data,\n      width,\n      height,\n      i = -4,\n      length,\n      rgb = {\n    r: 0,\n    g: 0,\n    b: 0\n  },\n      count = 0;\n\n  if (!context) {\n    return defaultRGB;\n  }\n\n  height = canvas.height = imgEl.naturalHeight || imgEl.offsetHeight || imgEl.height;\n  width = canvas.width = imgEl.naturalWidth || imgEl.offsetWidth || imgEl.width;\n\n  context.drawImage(imgEl, 0, 0);\n\n  try {\n    data = context.getImageData(0, 0, width, height);\n  } catch (e) {\n    return defaultRGB;\n  }\n\n  length = data.data.length;\n\n  while ((i += blockSize * 4) < length) {\n    if (data.data[i] > 200 || data.data[i + 1] > 200 || data.data[i + 2] > 200) continue;\n    ++count;\n    rgb.r += data.data[i];\n    rgb.g += data.data[i + 1];\n    rgb.b += data.data[i + 2];\n  }\n\n  rgb.r = ~~(rgb.r / count);\n  rgb.g = ~~(rgb.g / count);\n  rgb.b = ~~(rgb.b / count);\n\n  return rgb;\n}\n// module.exports=AwesomeQRCode\n/* harmony default export */ __webpack_exports__[\"a\"] = (AwesomeQRCode);\n\n/***/ }),\n/* 6 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__DataParser__ = __webpack_require__(7);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__schemaGIF__ = __webpack_require__(9);\n/* eslint-disable */\n\n\nfunction GIF(arrayBuffer) {\n    // convert to byte array\n    var byteData = new Uint8Array(arrayBuffer);\n    var parser = new __WEBPACK_IMPORTED_MODULE_0__DataParser__[\"a\" /* default */](byteData);\n    // parse the data\n    this.raw = parser.parse(__WEBPACK_IMPORTED_MODULE_1__schemaGIF__[\"a\" /* default */]);\n\n    // set a flag to make sure the gif contains at least one image\n    this.raw.hasImages = false;\n    for (var f = 0; f < this.raw.frames.length; f++) {\n        if (this.raw.frames[f].image) {\n            this.raw.hasImages = true;\n            break;\n        }\n    }\n}\n\n// process a single gif image frames data, decompressing it using LZW\n// if buildPatch is true, the returned image will be a clamped 8 bit image patch\n// for use directly with a canvas.\nGIF.prototype.decompressFrame = function (index, buildPatch) {\n\n    // make sure a valid frame is requested\n    if (index >= this.raw.frames.length) {\n        return null;\n    }\n\n    var frame = this.raw.frames[index];\n    if (frame.image) {\n        // get the number of pixels\n        var totalPixels = frame.image.descriptor.width * frame.image.descriptor.height;\n\n        // do lzw decompression\n        var pixels = lzw(frame.image.data.minCodeSize, frame.image.data.blocks, totalPixels);\n\n        // deal with interlacing if necessary\n        if (frame.image.descriptor.lct.interlaced) {\n            pixels = deinterlace(pixels, frame.image.descriptor.width);\n        }\n\n        // setup usable image object\n        var image = {\n            pixels: pixels,\n            dims: {\n                top: frame.image.descriptor.top,\n                left: frame.image.descriptor.left,\n                width: frame.image.descriptor.width,\n                height: frame.image.descriptor.height\n            }\n        };\n\n        // color table\n        if (frame.image.descriptor.lct && frame.image.descriptor.lct.exists) {\n            image.colorTable = frame.image.lct;\n        } else {\n            image.colorTable = this.raw.gct;\n        }\n\n        // add per frame relevant gce information\n        if (frame.gce) {\n            image.delay = (frame.gce.delay || 10) * 10; // convert to ms\n            image.disposalType = frame.gce.extras.disposal;\n            // transparency\n            if (frame.gce.extras.transparentColorGiven) {\n                image.transparentIndex = frame.gce.transparentColorIndex;\n            }\n        }\n\n        // create canvas usable imagedata if desired\n        if (buildPatch) {\n            image.patch = generatePatch(image);\n        }\n\n        return image;\n    }\n\n    // frame does not contains image\n    return null;\n\n    /**\n     * javascript port of java LZW decompression\n     * Original java author url: https://gist.github.com/devunwired/4479231\n     */\n    function lzw(minCodeSize, data, pixelCount) {\n\n        var MAX_STACK_SIZE = 4096;\n        var nullCode = -1;\n\n        var npix = pixelCount;\n        var available, clear, code_mask, code_size, end_of_information, in_code, old_code, bits, code, i, datum, data_size, first, top, bi, pi;\n\n        var dstPixels = new Array(pixelCount);\n        var prefix = new Array(MAX_STACK_SIZE);\n        var suffix = new Array(MAX_STACK_SIZE);\n        var pixelStack = new Array(MAX_STACK_SIZE + 1);\n\n        // Initialize GIF data stream decoder.\n        data_size = minCodeSize;\n        clear = 1 << data_size;\n        end_of_information = clear + 1;\n        available = clear + 2;\n        old_code = nullCode;\n        code_size = data_size + 1;\n        code_mask = (1 << code_size) - 1;\n        for (code = 0; code < clear; code++) {\n            prefix[code] = 0;\n            suffix[code] = code;\n        }\n        var count = void 0;\n        // Decode GIF pixel stream.\n        datum = bits = count = first = top = pi = bi = 0;\n        for (i = 0; i < npix;) {\n            if (top === 0) {\n                if (bits < code_size) {\n\n                    // get the next byte\n                    datum += data[bi] << bits;\n\n                    bits += 8;\n                    bi++;\n                    continue;\n                }\n                // Get the next code.\n                code = datum & code_mask;\n                datum >>= code_size;\n                bits -= code_size;\n                // Interpret the code\n                if (code > available || code == end_of_information) {\n                    break;\n                }\n                if (code == clear) {\n                    // Reset decoder.\n                    code_size = data_size + 1;\n                    code_mask = (1 << code_size) - 1;\n                    available = clear + 2;\n                    old_code = nullCode;\n                    continue;\n                }\n                if (old_code == nullCode) {\n                    pixelStack[top++] = suffix[code];\n                    old_code = code;\n                    first = code;\n                    continue;\n                }\n                in_code = code;\n                if (code == available) {\n                    pixelStack[top++] = first;\n                    code = old_code;\n                }\n                while (code > clear) {\n                    pixelStack[top++] = suffix[code];\n                    code = prefix[code];\n                }\n\n                first = suffix[code] & 0xff;\n                pixelStack[top++] = first;\n\n                // add a new string to the table, but only if space is available\n                // if not, just continue with current table until a clear code is found\n                // (deferred clear code implementation as per GIF spec)\n                if (available < MAX_STACK_SIZE) {\n                    prefix[available] = old_code;\n                    suffix[available] = first;\n                    available++;\n                    if ((available & code_mask) === 0 && available < MAX_STACK_SIZE) {\n                        code_size++;\n                        code_mask += available;\n                    }\n                }\n                old_code = in_code;\n            }\n            // Pop a pixel off the pixel stack.\n            top--;\n            dstPixels[pi++] = pixelStack[top];\n            i++;\n        }\n\n        for (i = pi; i < npix; i++) {\n            dstPixels[i] = 0; // clear missing pixels\n        }\n\n        return dstPixels;\n    }\n\n    // deinterlace function from https://github.com/shachaf/jsgif\n    function deinterlace(pixels, width) {\n\n        var newPixels = new Array(pixels.length);\n        var rows = pixels.length / width;\n        var cpRow = function cpRow(toRow, fromRow) {\n            var fromPixels = pixels.slice(fromRow * width, (fromRow + 1) * width);\n            newPixels.splice.apply(newPixels, [toRow * width, width].concat(fromPixels));\n        };\n\n        // See appendix E.\n        var offsets = [0, 4, 2, 1];\n        var steps = [8, 8, 4, 2];\n\n        var fromRow = 0;\n        for (var pass = 0; pass < 4; pass++) {\n            for (var toRow = offsets[pass]; toRow < rows; toRow += steps[pass]) {\n                cpRow(toRow, fromRow);\n                fromRow++;\n            }\n        }\n\n        return newPixels;\n    }\n\n    // create a clamped byte array patch for the frame image to be used directly with a canvas\n    // TODO: could potentially squeeze some performance by doing a direct 32bit write per iteration\n    function generatePatch(image) {\n\n        var totalPixels = image.pixels.length;\n        var patchData = new Uint8ClampedArray(totalPixels * 4);\n        for (var i = 0; i < totalPixels; i++) {\n            var pos = i * 4;\n            var colorIndex = image.pixels[i];\n            var color = image.colorTable[colorIndex];\n            patchData[pos] = color[0];\n            patchData[pos + 1] = color[1];\n            patchData[pos + 2] = color[2];\n            patchData[pos + 3] = colorIndex !== image.transparentIndex ? 255 : 0;\n        }\n\n        return patchData;\n    }\n};\n\n// returns all frames decompressed\nGIF.prototype.decompressFrames = function (buildPatch) {\n    var frames = [];\n    for (var i = 0; i < this.raw.frames.length; i++) {\n        var frame = this.raw.frames[i];\n        if (frame.image) {\n            frames.push(this.decompressFrame(i, buildPatch));\n        }\n    }\n    return frames;\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (GIF);\n\n/***/ }),\n/* 7 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__ByteStream__ = __webpack_require__(8);\n\nfunction DataParser(data) {\n    this.stream = new __WEBPACK_IMPORTED_MODULE_0__ByteStream__[\"a\" /* default */](data);\n    // the final parsed object from the data\n    this.output = {};\n}\n\nDataParser.prototype.parse = function (schema) {\n    // the top level schema is just the top level parts array\n    this.parseParts(this.output, schema);\n    return this.output;\n};\n\n// parse a set of hierarchy parts providing the parent object, and the subschema\nDataParser.prototype.parseParts = function (obj, schema) {\n    for (var i = 0; i < schema.length; i++) {\n        var part = schema[i];\n        this.parsePart(obj, part);\n    }\n};\n\nDataParser.prototype.parsePart = function (obj, part) {\n    var name = part.label;\n    var value;\n\n    // make sure the part meets any parse requirements\n    if (part.requires && !part.requires(this.stream, this.output, obj)) {\n        return;\n    }\n\n    if (part.loop) {\n        // create a parse loop over the parts\n        var items = [];\n        while (part.loop(this.stream)) {\n            var item = {};\n            this.parseParts(item, part.parts);\n            items.push(item);\n        }\n        obj[name] = items;\n    } else if (part.parts) {\n        // process any child parts\n        value = {};\n        this.parseParts(value, part.parts);\n        obj[name] = value;\n    } else if (part.parser) {\n        // parse the value using a parser\n        value = part.parser(this.stream, this.output, obj);\n        if (!part.skip) {\n            obj[name] = value;\n        }\n    } else if (part.bits) {\n        // convert the next byte to a set of bit fields\n        obj[name] = this.parseBits(part.bits);\n    }\n};\n\n// combine bits to calculate value\nfunction bitsToNum(bitArray) {\n    return bitArray.reduce(function (s, n) {\n        return s * 2 + n;\n    }, 0);\n}\n\n// parse a byte as a bit set (flags and values)\nDataParser.prototype.parseBits = function (details) {\n    var out = {};\n    var bits = this.stream.readBitArray();\n    for (var key in details) {\n        var item = details[key];\n        if (item.length) {\n            // convert the bit set to value\n            out[key] = bitsToNum(bits.slice(item.index, item.index + item.length));\n        } else {\n            out[key] = bits[item.index];\n        }\n    }\n    return out;\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (DataParser);\n\n/***/ }),\n/* 8 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nfunction ByteStream(data) {\n  this.data = data;\n  this.pos = 0;\n}\n\n// read the next byte off the stream\nByteStream.prototype.readByte = function () {\n  return this.data[this.pos++];\n};\n\n// look at the next byte in the stream without updating the stream position\nByteStream.prototype.peekByte = function () {\n  return this.data[this.pos];\n};\n\n// read an array of bytes\nByteStream.prototype.readBytes = function (n) {\n  var bytes = new Array(n);\n  for (var i = 0; i < n; i++) {\n    bytes[i] = this.readByte();\n  }\n  return bytes;\n};\n\n// peek at an array of bytes without updating the stream position\nByteStream.prototype.peekBytes = function (n) {\n  var bytes = new Array(n);\n  for (var i = 0; i < n; i++) {\n    bytes[i] = this.data[this.pos + i];\n  }\n  return bytes;\n};\n\n// read a string from a byte set\nByteStream.prototype.readString = function (len) {\n  var str = \"\";\n  for (var i = 0; i < len; i++) {\n    str += String.fromCharCode(this.readByte());\n  }\n  return str;\n};\n\n// read a single byte and return an array of bit booleans\nByteStream.prototype.readBitArray = function () {\n  var arr = [];\n  var bite = this.readByte();\n  for (var i = 7; i >= 0; i--) {\n    arr.push(!!(bite & 1 << i));\n  }\n  return arr;\n};\n\n// read an unsigned int with endian option\nByteStream.prototype.readUnsigned = function (littleEndian) {\n  var a = this.readBytes(2);\n  if (littleEndian) {\n    return (a[1] << 8) + a[0];\n  } else {\n    return (a[0] << 8) + a[1];\n  }\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (ByteStream);\n\n/***/ }),\n/* 9 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Parsers__ = __webpack_require__(10);\n\n// a set of 0x00 terminated subblocks\nvar subBlocks = {\n  label: \"blocks\",\n  parser: function parser(stream) {\n    var out = [];\n    var terminator = 0x00;\n    for (var size = stream.readByte(); size !== terminator; size = stream.readByte()) {\n      out = out.concat(stream.readBytes(size));\n    }\n    return out;\n  }\n};\n\n// global control extension\nvar gce = {\n  label: \"gce\",\n  requires: function requires(stream) {\n    // just peek at the top two bytes, and if true do this\n    var codes = stream.peekBytes(2);\n    return codes[0] === 0x21 && codes[1] === 0xf9;\n  },\n  parts: [{ label: \"codes\", parser: __WEBPACK_IMPORTED_MODULE_0__Parsers__[\"a\" /* default */].readBytes(2), skip: true }, { label: \"byteSize\", parser: __WEBPACK_IMPORTED_MODULE_0__Parsers__[\"a\" /* default */].readByte() }, {\n    label: \"extras\",\n    bits: {\n      future: { index: 0, length: 3 },\n      disposal: { index: 3, length: 3 },\n      userInput: { index: 6 },\n      transparentColorGiven: { index: 7 }\n    }\n  }, { label: \"delay\", parser: __WEBPACK_IMPORTED_MODULE_0__Parsers__[\"a\" /* default */].readUnsigned(true) }, { label: \"transparentColorIndex\", parser: __WEBPACK_IMPORTED_MODULE_0__Parsers__[\"a\" /* default */].readByte() }, { label: \"terminator\", parser: __WEBPACK_IMPORTED_MODULE_0__Parsers__[\"a\" /* default */].readByte(), skip: true }]\n};\n\n// image pipeline block\nvar image = {\n  label: \"image\",\n  requires: function requires(stream) {\n    // peek at the next byte\n    var code = stream.peekByte();\n    return code === 0x2c;\n  },\n  parts: [{ label: \"code\", parser: __WEBPACK_IMPORTED_MODULE_0__Parsers__[\"a\" /* default */].readByte(), skip: true }, {\n    label: \"descriptor\", // image descriptor\n    parts: [{ label: \"left\", parser: __WEBPACK_IMPORTED_MODULE_0__Parsers__[\"a\" /* default */].readUnsigned(true) }, { label: \"top\", parser: __WEBPACK_IMPORTED_MODULE_0__Parsers__[\"a\" /* default */].readUnsigned(true) }, { label: \"width\", parser: __WEBPACK_IMPORTED_MODULE_0__Parsers__[\"a\" /* default */].readUnsigned(true) }, { label: \"height\", parser: __WEBPACK_IMPORTED_MODULE_0__Parsers__[\"a\" /* default */].readUnsigned(true) }, {\n      label: \"lct\",\n      bits: {\n        exists: { index: 0 },\n        interlaced: { index: 1 },\n        sort: { index: 2 },\n        future: { index: 3, length: 2 },\n        size: { index: 5, length: 3 }\n      }\n    }]\n  }, {\n    label: \"lct\", // optional local color table\n    requires: function requires(stream, obj, parent) {\n      return parent.descriptor.lct.exists;\n    },\n    parser: __WEBPACK_IMPORTED_MODULE_0__Parsers__[\"a\" /* default */].readArray(3, function (stream, obj, parent) {\n      return Math.pow(2, parent.descriptor.lct.size + 1);\n    })\n  }, {\n    label: \"data\", // the image data blocks\n    parts: [{ label: \"minCodeSize\", parser: __WEBPACK_IMPORTED_MODULE_0__Parsers__[\"a\" /* default */].readByte() }, subBlocks]\n  }]\n};\n\n// plain text block\nvar text = {\n  label: \"text\",\n  requires: function requires(stream) {\n    // just peek at the top two bytes, and if true do this\n    var codes = stream.peekBytes(2);\n    return codes[0] === 0x21 && codes[1] === 0x01;\n  },\n  parts: [{ label: \"codes\", parser: __WEBPACK_IMPORTED_MODULE_0__Parsers__[\"a\" /* default */].readBytes(2), skip: true }, { label: \"blockSize\", parser: __WEBPACK_IMPORTED_MODULE_0__Parsers__[\"a\" /* default */].readByte() }, {\n    label: \"preData\",\n    parser: function parser(stream, obj, parent) {\n      return stream.readBytes(parent.text.blockSize);\n    }\n  }, subBlocks]\n};\n\n// application block\nvar application = {\n  label: \"application\",\n  requires: function requires(stream, obj, parent) {\n    // make sure this frame doesn't already have a gce, text, comment, or image\n    // as that means this block should be attached to the next frame\n    //if(parent.gce || parent.text || parent.image || parent.comment){ return false; }\n\n    // peek at the top two bytes\n    var codes = stream.peekBytes(2);\n    return codes[0] === 0x21 && codes[1] === 0xff;\n  },\n  parts: [{ label: \"codes\", parser: __WEBPACK_IMPORTED_MODULE_0__Parsers__[\"a\" /* default */].readBytes(2), skip: true }, { label: \"blockSize\", parser: __WEBPACK_IMPORTED_MODULE_0__Parsers__[\"a\" /* default */].readByte() }, {\n    label: \"id\",\n    parser: function parser(stream, obj, parent) {\n      return stream.readString(parent.blockSize);\n    }\n  }, subBlocks]\n};\n\n// comment block\nvar comment = {\n  label: \"comment\",\n  requires: function requires(stream, obj, parent) {\n    // make sure this frame doesn't already have a gce, text, comment, or image\n    // as that means this block should be attached to the next frame\n    //if(parent.gce || parent.text || parent.image || parent.comment){ return false; }\n\n    // peek at the top two bytes\n    var codes = stream.peekBytes(2);\n    return codes[0] === 0x21 && codes[1] === 0xfe;\n  },\n  parts: [{ label: \"codes\", parser: __WEBPACK_IMPORTED_MODULE_0__Parsers__[\"a\" /* default */].readBytes(2), skip: true }, subBlocks]\n};\n\n// frames of ext and image data\nvar frames = {\n  label: \"frames\",\n  parts: [gce, application, comment, image, text],\n  loop: function loop(stream) {\n    var nextCode = stream.peekByte();\n    // rather than check for a terminator, we should check for the existence\n    // of an ext or image block to avoid infinite loops\n    //var terminator = 0x3B;\n    //return nextCode !== terminator;\n    return nextCode === 0x21 || nextCode === 0x2c;\n  }\n};\n\n// main GIF schema\nvar schemaGIF = [{\n  label: \"header\", // gif header\n  parts: [{ label: \"signature\", parser: __WEBPACK_IMPORTED_MODULE_0__Parsers__[\"a\" /* default */].readString(3) }, { label: \"version\", parser: __WEBPACK_IMPORTED_MODULE_0__Parsers__[\"a\" /* default */].readString(3) }]\n}, {\n  label: \"lsd\", // local screen descriptor\n  parts: [{ label: \"width\", parser: __WEBPACK_IMPORTED_MODULE_0__Parsers__[\"a\" /* default */].readUnsigned(true) }, { label: \"height\", parser: __WEBPACK_IMPORTED_MODULE_0__Parsers__[\"a\" /* default */].readUnsigned(true) }, {\n    label: \"gct\",\n    bits: {\n      exists: { index: 0 },\n      resolution: { index: 1, length: 3 },\n      sort: { index: 4 },\n      size: { index: 5, length: 3 }\n    }\n  }, { label: \"backgroundColorIndex\", parser: __WEBPACK_IMPORTED_MODULE_0__Parsers__[\"a\" /* default */].readByte() }, { label: \"pixelAspectRatio\", parser: __WEBPACK_IMPORTED_MODULE_0__Parsers__[\"a\" /* default */].readByte() }]\n}, {\n  label: \"gct\", // global color table\n  requires: function requires(stream, obj) {\n    return obj.lsd.gct.exists;\n  },\n  parser: __WEBPACK_IMPORTED_MODULE_0__Parsers__[\"a\" /* default */].readArray(3, function (stream, obj) {\n    return Math.pow(2, obj.lsd.gct.size + 1);\n  })\n}, frames // content frames\n];\n/* harmony default export */ __webpack_exports__[\"a\"] = (schemaGIF);\n\n/***/ }),\n/* 10 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar Parsers = {\n    // read a byte\n    readByte: function readByte() {\n        return function (stream) {\n            return stream.readByte();\n        };\n    },\n    // read an array of bytes\n    readBytes: function readBytes(length) {\n        return function (stream) {\n            return stream.readBytes(length);\n        };\n    },\n    // read a string from bytes\n    readString: function readString(length) {\n        return function (stream) {\n            return stream.readString(length);\n        };\n    },\n    // read an unsigned int (with endian)\n    readUnsigned: function readUnsigned(littleEndian) {\n        return function (stream) {\n            return stream.readUnsigned(littleEndian);\n        };\n    },\n    // read an array of byte sets\n    readArray: function readArray(size, countFunc) {\n        return function (stream, obj, parent) {\n            var count = countFunc(stream, obj, parent);\n            var arr = new Array(count);\n            for (var i = 0; i < count; i++) {\n                arr[i] = stream.readBytes(size);\n            }\n            return arr;\n        };\n    }\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Parsers);\n\n/***/ }),\n/* 11 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n/* eslint-disable */\nfunction EventEmitter() {\n  this._events = this._events || {};\n  this._maxListeners = this._maxListeners || undefined;\n}\n\nEventEmitter.EventEmitter = EventEmitter;\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\nEventEmitter.defaultMaxListeners = 10;\nEventEmitter.prototype.setMaxListeners = function (n) {\n  if (!isNumber(n) || n < 0 || isNaN(n)) throw TypeError(\"n must be a positive number\");\n  this._maxListeners = n;\n  return this;\n};\nEventEmitter.prototype.emit = function (type) {\n  var er, handler, len, args, i, listeners;\n  if (!this._events) this._events = {};\n  if (type === \"error\") {\n    if (!this._events.error || isObject(this._events.error) && !this._events.error.length) {\n      er = arguments[1];\n      if (er instanceof Error) {\n        throw er;\n      } else {\n        var err = new Error('Uncaught, unspecified \"error\" event. (' + er + \")\");\n        err.context = er;\n        throw err;\n      }\n    }\n  }\n  handler = this._events[type];\n  if (isUndefined(handler)) return false;\n  if (isFunction(handler)) {\n    switch (arguments.length) {\n      case 1:\n        handler.call(this);\n        break;\n      case 2:\n        handler.call(this, arguments[1]);\n        break;\n      case 3:\n        handler.call(this, arguments[1], arguments[2]);\n        break;\n      default:\n        args = Array.prototype.slice.call(arguments, 1);\n        handler.apply(this, args);\n    }\n  } else if (isObject(handler)) {\n    args = Array.prototype.slice.call(arguments, 1);\n    listeners = handler.slice();\n    len = listeners.length;\n    for (i = 0; i < len; i++) {\n      listeners[i].apply(this, args);\n    }\n  }\n  return true;\n};\nEventEmitter.prototype.addListener = function (type, listener) {\n  var m;\n  if (!isFunction(listener)) throw TypeError(\"listener must be a function\");\n  if (!this._events) this._events = {};\n  if (this._events.newListener) this.emit(\"newListener\", type, isFunction(listener.listener) ? listener.listener : listener);\n  if (!this._events[type]) this._events[type] = listener;else if (isObject(this._events[type])) this._events[type].push(listener);else this._events[type] = [this._events[type], listener];\n  if (isObject(this._events[type]) && !this._events[type].warned) {\n    if (!isUndefined(this._maxListeners)) {\n      m = this._maxListeners;\n    } else {\n      m = EventEmitter.defaultMaxListeners;\n    }\n    if (m && m > 0 && this._events[type].length > m) {\n      this._events[type].warned = true;\n      console.error(\"(node) warning: possible EventEmitter memory \" + \"leak detected. %d listeners added. \" + \"Use emitter.setMaxListeners() to increase limit.\", this._events[type].length);\n      if (typeof console.trace === \"function\") {\n        console.trace();\n      }\n    }\n  }\n  return this;\n};\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\nEventEmitter.prototype.once = function (type, listener) {\n  if (!isFunction(listener)) throw TypeError(\"listener must be a function\");\n  var fired = false;\n  function g() {\n    this.removeListener(type, g);\n    if (!fired) {\n      fired = true;\n      listener.apply(this, arguments);\n    }\n  }\n  g.listener = listener;\n  this.on(type, g);\n  return this;\n};\nEventEmitter.prototype.removeListener = function (type, listener) {\n  var list, position, length, i;\n  if (!isFunction(listener)) throw TypeError(\"listener must be a function\");\n  if (!this._events || !this._events[type]) return this;\n  list = this._events[type];\n  length = list.length;\n  position = -1;\n  if (list === listener || isFunction(list.listener) && list.listener === listener) {\n    delete this._events[type];\n    if (this._events.removeListener) this.emit(\"removeListener\", type, listener);\n  } else if (isObject(list)) {\n    for (i = length; i-- > 0;) {\n      if (list[i] === listener || list[i].listener && list[i].listener === listener) {\n        position = i;\n        break;\n      }\n    }\n    if (position < 0) return this;\n    if (list.length === 1) {\n      list.length = 0;\n      delete this._events[type];\n    } else {\n      list.splice(position, 1);\n    }\n    if (this._events.removeListener) this.emit(\"removeListener\", type, listener);\n  }\n  return this;\n};\nEventEmitter.prototype.removeAllListeners = function (type) {\n  var key, listeners;\n  if (!this._events) return this;\n  if (!this._events.removeListener) {\n    if (arguments.length === 0) this._events = {};else if (this._events[type]) delete this._events[type];\n    return this;\n  }\n  if (arguments.length === 0) {\n    for (key in this._events) {\n      if (key === \"removeListener\") continue;\n      this.removeAllListeners(key);\n    }\n    this.removeAllListeners(\"removeListener\");\n    this._events = {};\n    return this;\n  }\n  listeners = this._events[type];\n  if (isFunction(listeners)) {\n    this.removeListener(type, listeners);\n  } else if (listeners) {\n    while (listeners.length) {\n      this.removeListener(type, listeners[listeners.length - 1]);\n    }\n  }\n  delete this._events[type];\n  return this;\n};\nEventEmitter.prototype.listeners = function (type) {\n  var ret;\n  if (!this._events || !this._events[type]) ret = [];else if (isFunction(this._events[type])) ret = [this._events[type]];else ret = this._events[type].slice();\n  return ret;\n};\nEventEmitter.prototype.listenerCount = function (type) {\n  if (this._events) {\n    var evlistener = this._events[type];\n    if (isFunction(evlistener)) return 1;else if (evlistener) return evlistener.length;\n  }\n  return 0;\n};\nEventEmitter.listenerCount = function (emitter, type) {\n  return emitter.listenerCount(type);\n};\nfunction isFunction(arg) {\n  return typeof arg === \"function\";\n}\nfunction isNumber(arg) {\n  return typeof arg === \"number\";\n}\nfunction isObject(arg) {\n  return (typeof arg === \"undefined\" ? \"undefined\" : _typeof(arg)) === \"object\" && arg !== null;\n}\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\n\nvar UA, browser, mode, platform, ua;\nua = navigator.userAgent.toLowerCase();\nplatform = navigator.platform.toLowerCase();\nUA = ua.match(/(opera|ie|firefox|chrome|version)[\\s\\/:]([\\w\\d\\.]+)?.*?(safari|version[\\s\\/:]([\\w\\d\\.]+)|$)/) || [null, \"unknown\", 0];\nmode = UA[1] === \"ie\" && document.documentMode;\nbrowser = {\n  name: UA[1] === \"version\" ? UA[3] : UA[1],\n  version: mode || parseFloat(UA[1] === \"opera\" && UA[4] ? UA[4] : UA[2]),\n  platform: {\n    name: ua.match(/ip(?:ad|od|hone)/) ? \"ios\" : (ua.match(/(?:webos|android)/) || platform.match(/mac|win|linux/) || [\"other\"])[0]\n  }\n};\nbrowser[browser.name] = true;\nbrowser[browser.name + parseInt(browser.version, 10)] = true;\nbrowser.platform[browser.platform.name] = true;\n\nvar extend = function extend(child, parent) {\n  for (var key in parent) {\n    if (hasProp.call(parent, key)) child[key] = parent[key];\n  }\n  function ctor() {\n    this.constructor = child;\n  }\n  ctor.prototype = parent.prototype;\n  child.prototype = new ctor();\n  child.__super__ = parent.prototype;\n  return child;\n},\n    hasProp = {}.hasOwnProperty,\n    indexOf = [].indexOf || function (item) {\n  for (var i = 0, l = this.length; i < l; i++) {\n    if (i in this && this[i] === item) return i;\n  }\n  return -1;\n},\n    slice = [].slice;\nvar GIF = function (superClass) {\n  var defaults, frameDefaults;\n  extend(GIF, superClass);\n  var gifWorker = __webpack_require__(0);\n\n  defaults = {\n    workerScript: gifWorker,\n    workers: 2,\n    repeat: 0,\n    background: \"#fff\",\n    quality: 10,\n    width: null,\n    height: null,\n    transparent: null,\n    debug: false,\n    dither: false\n  };\n\n  frameDefaults = { delay: 500, copy: false };\n  function GIF(options) {\n    var base, key, value;\n    this.running = false;\n    this.options = {};\n    this.frames = [];\n    this.freeWorkers = [];\n    this.activeWorkers = [];\n    this.setOptions(options);\n    for (key in defaults) {\n      value = defaults[key];\n      if ((base = this.options)[key] == null) {\n        base[key] = value;\n      }\n    }\n  }\n  GIF.prototype.setOption = function (key, value) {\n    this.options[key] = value;\n    if (this._canvas != null && (key === \"width\" || key === \"height\")) {\n      return this._canvas[key] = value;\n    }\n  };\n  GIF.prototype.setOptions = function (options) {\n    var key, results, value;\n    results = [];\n    for (key in options) {\n      if (!hasProp.call(options, key)) continue;\n      value = options[key];\n      results.push(this.setOption(key, value));\n    }\n    return results;\n  };\n  GIF.prototype.addFrame = function (image, options) {\n    var frame, key;\n    if (options == null) {\n      options = {};\n    }\n    frame = {};\n    frame.transparent = this.options.transparent;\n    for (key in frameDefaults) {\n      frame[key] = options[key] || frameDefaults[key];\n    }\n    if (this.options.width == null) {\n      this.setOption(\"width\", image.width);\n    }\n    if (this.options.height == null) {\n      this.setOption(\"height\", image.height);\n    }\n    if (typeof ImageData !== \"undefined\" && ImageData !== null && image instanceof ImageData) {\n      frame.data = image.data;\n    } else if (typeof CanvasRenderingContext2D !== \"undefined\" && CanvasRenderingContext2D !== null && image instanceof CanvasRenderingContext2D || typeof WebGLRenderingContext !== \"undefined\" && WebGLRenderingContext !== null && image instanceof WebGLRenderingContext) {\n      if (options.copy) {\n        frame.data = this.getContextData(image);\n      } else {\n        frame.context = image;\n      }\n    } else if (image.childNodes != null) {\n      if (options.copy) {\n        frame.data = this.getImageData(image);\n      } else {\n        frame.image = image;\n      }\n    } else {\n      throw new Error(\"Invalid image\");\n    }\n    return this.frames.push(frame);\n  };\n  GIF.prototype.render = function () {\n    var i, j, numWorkers, ref;\n    if (this.running) {\n      throw new Error(\"Already running\");\n    }\n    if (this.options.width == null || this.options.height == null) {\n      throw new Error(\"Width and height must be set prior to rendering\");\n    }\n    this.running = true;\n    this.nextFrame = 0;\n    this.finishedFrames = 0;\n    this.imageParts = function () {\n      var j, ref, results;\n      results = [];\n      for (i = j = 0, ref = this.frames.length; 0 <= ref ? j < ref : j > ref; i = 0 <= ref ? ++j : --j) {\n        results.push(null);\n      }\n      return results;\n    }.call(this);\n    numWorkers = this.spawnWorkers();\n    if (this.options.globalPalette === true) {\n      this.renderNextFrame();\n    } else {\n      for (i = j = 0, ref = numWorkers; 0 <= ref ? j < ref : j > ref; i = 0 <= ref ? ++j : --j) {\n        this.renderNextFrame();\n      }\n    }\n    this.emit(\"start\");\n    return this.emit(\"progress\", 0);\n  };\n  GIF.prototype.abort = function () {\n    var worker;\n    while (true) {\n      worker = this.activeWorkers.shift();\n      if (worker == null) {\n        break;\n      }\n      this.log(\"killing active worker\");\n      worker.terminate();\n    }\n    this.running = false;\n    return this.emit(\"abort\");\n  };\n  GIF.prototype.spawnWorkers = function () {\n    var j, numWorkers, ref, results;\n    numWorkers = Math.min(this.options.workers, this.frames.length);\n    (function () {\n      results = [];\n      for (var j = ref = this.freeWorkers.length; ref <= numWorkers ? j < numWorkers : j > numWorkers; ref <= numWorkers ? j++ : j--) {\n        results.push(j);\n      }\n      return results;\n    }).apply(this).forEach(function (_this) {\n      return function (i) {\n        var worker;\n        _this.log(\"spawning worker \" + i);\n        var Worker = __webpack_require__(0);\n        worker = new Worker();\n        // worker = new Worker(_this.options.workerScript);\n        worker.onmessage = function (event) {\n          _this.activeWorkers.splice(_this.activeWorkers.indexOf(worker), 1);\n          _this.freeWorkers.push(worker);\n          return _this.frameFinished(event.data);\n        };\n        return _this.freeWorkers.push(worker);\n      };\n    }(this));\n    return numWorkers;\n  };\n  GIF.prototype.frameFinished = function (frame) {\n    var i, j, ref;\n    this.log(\"frame \" + frame.index + \" finished - \" + this.activeWorkers.length + \" active\");\n    this.finishedFrames++;\n    this.emit(\"progress\", this.finishedFrames / this.frames.length);\n    this.imageParts[frame.index] = frame;\n    if (this.options.globalPalette === true) {\n      this.options.globalPalette = frame.globalPalette;\n      this.log(\"global palette analyzed\");\n      if (this.frames.length > 2) {\n        for (i = j = 1, ref = this.freeWorkers.length; 1 <= ref ? j < ref : j > ref; i = 1 <= ref ? ++j : --j) {\n          this.renderNextFrame();\n        }\n      }\n    }\n    if (indexOf.call(this.imageParts, null) >= 0) {\n      return this.renderNextFrame();\n    } else {\n      return this.finishRendering();\n    }\n  };\n  GIF.prototype.finishRendering = function () {\n    var data, frame, i, image, j, k, l, len, len1, len2, len3, offset, page, ref, ref1, ref2;\n    len = 0;\n    ref = this.imageParts;\n    for (j = 0, len1 = ref.length; j < len1; j++) {\n      frame = ref[j];\n      len += (frame.data.length - 1) * frame.pageSize + frame.cursor;\n    }\n    len += frame.pageSize - frame.cursor;\n    this.log(\"rendering finished - filesize \" + Math.round(len / 1e3) + \"kb\");\n    data = new Uint8Array(len);\n    offset = 0;\n    ref1 = this.imageParts;\n    for (k = 0, len2 = ref1.length; k < len2; k++) {\n      frame = ref1[k];\n      ref2 = frame.data;\n      for (i = l = 0, len3 = ref2.length; l < len3; i = ++l) {\n        page = ref2[i];\n        data.set(page, offset);\n        if (i === frame.data.length - 1) {\n          offset += frame.cursor;\n        } else {\n          offset += frame.pageSize;\n        }\n      }\n    }\n    image = new Blob([data], { type: \"image/gif\" });\n    return this.emit(\"finished\", image, data);\n  };\n  GIF.prototype.renderNextFrame = function () {\n    var frame, task, worker;\n    if (this.freeWorkers.length === 0) {\n      throw new Error(\"No free workers\");\n    }\n    if (this.nextFrame >= this.frames.length) {\n      return;\n    }\n    frame = this.frames[this.nextFrame++];\n    worker = this.freeWorkers.shift();\n    task = this.getTask(frame);\n    this.log(\"starting frame \" + (task.index + 1) + \" of \" + this.frames.length);\n    this.activeWorkers.push(worker);\n    return worker.postMessage(task);\n  };\n  GIF.prototype.getContextData = function (ctx) {\n    return ctx.getImageData(0, 0, this.options.width, this.options.height).data;\n  };\n  GIF.prototype.getImageData = function (image) {\n    var ctx;\n    if (this._canvas == null) {\n      this._canvas = document.createElement(\"canvas\");\n      this._canvas.width = this.options.width;\n      this._canvas.height = this.options.height;\n    }\n    ctx = this._canvas.getContext(\"2d\");\n    ctx.setFill = this.options.background;\n    ctx.fillRect(0, 0, this.options.width, this.options.height);\n    ctx.drawImage(image, 0, 0);\n    return this.getContextData(ctx);\n  };\n  GIF.prototype.getTask = function (frame) {\n    var index, task;\n    index = this.frames.indexOf(frame);\n    task = {\n      index: index,\n      last: index === this.frames.length - 1,\n      delay: frame.delay,\n      transparent: frame.transparent,\n      width: this.options.width,\n      height: this.options.height,\n      quality: this.options.quality,\n      dither: this.options.dither,\n      globalPalette: this.options.globalPalette,\n      repeat: this.options.repeat,\n      canTransfer: browser.name === \"chrome\"\n    };\n    if (frame.data != null) {\n      task.data = frame.data;\n    } else if (frame.context != null) {\n      task.data = this.getContextData(frame.context);\n    } else if (frame.image != null) {\n      task.data = this.getImageData(frame.image);\n    } else {\n      throw new Error(\"Invalid frame\");\n    }\n    return task;\n  };\n  GIF.prototype.log = function () {\n    var args;\n    args = 1 <= arguments.length ? slice.call(arguments, 0) : [];\n    if (!this.options.debug) {\n      return;\n    }\n    return console.log.apply(console, args);\n  };\n  return GIF;\n}(EventEmitter);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (GIF);\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n// http://stackoverflow.com/questions/10343913/how-to-create-a-web-worker-from-a-string\n\nvar URL = window.URL || window.webkitURL;\n\nmodule.exports = function (content, url) {\n  try {\n    try {\n      var blob;\n\n      try {\n        // BlobBuilder = Deprecated, but widely implemented\n        var BlobBuilder = window.BlobBuilder || window.WebKitBlobBuilder || window.MozBlobBuilder || window.MSBlobBuilder;\n\n        blob = new BlobBuilder();\n\n        blob.append(content);\n\n        blob = blob.getBlob();\n      } catch (e) {\n        // The proposed API\n        blob = new Blob([content]);\n      }\n\n      return new Worker(URL.createObjectURL(blob));\n    } catch (e) {\n      return new Worker('data:application/javascript,' + encodeURIComponent(content));\n    }\n  } catch (e) {\n    if (!url) {\n      throw Error('Inline worker is not supported');\n    }\n\n    return new Worker(url);\n  }\n};\n\n/***/ }),\n/* 13 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nfunction imgLoaded(url) {\n  if (!url) {\n    return undefined;\n  }\n  return new Promise(function (resolve, reject) {\n    if (url.slice(0, 4) === 'data') {\n      var img = new Image();\n      img.onload = function () {\n        resolve(img);\n      };\n      img.onerror = function () {\n        reject('Image load error');\n      };\n      img.src = url;\n      return;\n    }\n    var xhr = new XMLHttpRequest();\n    xhr.onload = function () {\n      var newUrl = URL.createObjectURL(this.response);\n      var img = new Image();\n      img.onload = function () {\n        resolve(img);\n        URL.revokeObjectURL(newUrl);\n      };\n      img.onerror = function () {\n        reject('Image load error');\n      };\n      img.src = newUrl;\n    };\n    xhr.open('GET', url, true);\n    xhr.responseType = 'blob';\n    xhr.send();\n  });\n}\n/* harmony default export */ __webpack_exports__[\"a\"] = (imgLoaded);\n\n/***/ }),\n/* 14 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nfunction readAsArrayBuffer(url, callback) {\n  return new Promise(function (resolve, reject) {\n    var xhr = new XMLHttpRequest();\n    xhr.responseType = \"blob\"; //设定返回数据类型为Blob\n    xhr.onload = function () {\n      var reader = new FileReader();\n      reader.onloadend = function () {\n        resolve(reader.result);\n      };\n      reader.readAsArrayBuffer(xhr.response); //xhr.response就是一个Blob，用FileReader读取\n    };\n    xhr.open(\"GET\", url);\n    xhr.send();\n  });\n}\n/* harmony default export */ __webpack_exports__[\"a\"] = (readAsArrayBuffer);\n\n/***/ })\n/******/ ]);\n});\n\n\n// WEBPACK FOOTER //\n// react-awesome-qr.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/dist/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap ade934dec7f75529e8f0","module.exports = function() {\n  return require(\"!!/Users/ztf/Desktop/mygithub/react-qr/node_modules/worker-loader/dist/workers/InlineWorker.js\")(\"!function(t){function e(r){if(i[r])return i[r].exports;var s=i[r]={i:r,l:!1,exports:{}};return t[r].call(s.exports,s,s.exports,e),s.l=!0,s.exports}var i={};e.m=t,e.c=i,e.d=function(t,i,r){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,\\\"a\\\",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p=\\\"/dist/\\\",e(e.s=0)}([function(t,e){~function(){function t(t,e,i,r){function a(t,e){F[P++]=t,P>=254&&d(e)}function f(t){c(u),D=S+2,G=!0,b(S,t)}function c(t){for(var e=0;e<t;++e)A[e]=-1}function y(t,e){var i,r,s,o,a,p,y;for(m=t,G=!1,n=m,B=g(n),S=1<<t-1,T=S+1,D=S+2,P=0,o=x(),y=0,i=u;i<65536;i*=2)++y;y=8-y,p=u,c(p),b(S,e);t:for(;(r=x())!=h;)if(i=(r<<l)+o,s=r<<y^o,A[s]!==i){if(A[s]>=0){a=p-s,0===s&&(a=1);do{if((s-=a)<0&&(s+=p),A[s]===i){o=C[s];continue t}}while(A[s]>=0)}b(o,e),o=r,D<1<<l?(C[s]=D++,A[s]=i):f(e)}else o=C[s];b(o,e),b(T,e)}function w(i){i.writeByte(M),s=t*e,o=0,y(M+1,i),i.writeByte(0)}function d(t){P>0&&(t.writeByte(P),t.writeBytes(F,0,P),P=0)}function g(t){return(1<<t)-1}function x(){return 0===s?h:(--s,255&i[o++])}function b(t,e){for(v&=p[I],I>0?v|=t<<I:v=t,I+=n;I>=8;)a(255&v,e),v>>=8,I-=8;if((D>B||G)&&(G?(B=g(n=m),G=!1):(++n,B=n==l?1<<l:g(n))),t==T){for(;I>0;)a(255&v,e),v>>=8,I-=8;d(e)}}var v,P,B,m,S,T,M=Math.max(2,r),F=new Uint8Array(256),A=new Int32Array(u),C=new Int32Array(u),I=0,D=0,G=!1;this.encode=w}function e(t,e){function i(){B=[],S=new Int32Array(256),R=new Int32Array(c),U=new Int32Array(c),Q=new Int32Array(c>>3);var t,e;for(t=0;t<c;t++)e=(t<<w+8)/c,B[t]=new Float64Array([e,e,e,0]),U[t]=g/c,R[t]=0}function r(){for(var t=0;t<c;t++)B[t][0]>>=w,B[t][1]>>=w,B[t][2]>>=w,B[t][3]=t}function s(t,e,i,r,s){B[e][0]-=t*(B[e][0]-i)/F,B[e][1]-=t*(B[e][1]-r)/F,B[e][2]-=t*(B[e][2]-s)/F}function o(t,e,i,r,s){for(var o,n,a=Math.abs(e-t),h=Math.min(e+t,c),l=e+1,u=e-1,p=1;l<h||u>a;)n=Q[p++],l<h&&(o=B[l++],o[0]-=n*(o[0]-i)/C,o[1]-=n*(o[1]-r)/C,o[2]-=n*(o[2]-s)/C),u>a&&(o=B[u--],o[0]-=n*(o[0]-i)/C,o[1]-=n*(o[1]-r)/C,o[2]-=n*(o[2]-s)/C)}function n(t,e,i){var r,s,o,n,a,h=~(1<<31),l=h,u=-1,p=u;for(r=0;r<c;r++)s=B[r],o=Math.abs(s[0]-t)+Math.abs(s[1]-e)+Math.abs(s[2]-i),o<h&&(h=o,u=r),n=o-(R[r]>>d-w),n<l&&(l=n,p=r),a=U[r]>>b,U[r]-=a,R[r]+=a<<x;return U[u]+=v,R[u]-=P,p}function a(){var t,e,i,r,s,o,n=0,a=0;for(t=0;t<c;t++){for(i=B[t],s=t,o=i[1],e=t+1;e<c;e++)r=B[e],r[1]<o&&(s=e,o=r[1]);if(r=B[s],t!=s&&(e=r[0],r[0]=i[0],i[0]=e,e=r[1],r[1]=i[1],i[1]=e,e=r[2],r[2]=i[2],i[2]=e,e=r[3],r[3]=i[3],i[3]=e),o!=n){for(S[n]=a+t>>1,e=n+1;e<o;e++)S[e]=t;n=o,a=t}}for(S[n]=a+y>>1,e=n+1;e<256;e++)S[e]=y}function h(t,e,i){for(var r,s,o,n=1e3,a=-1,h=S[e],l=h-1;h<c||l>=0;)h<c&&(s=B[h],o=s[1]-e,o>=n?h=c:(h++,o<0&&(o=-o),r=s[0]-t,r<0&&(r=-r),(o+=r)<n&&(r=s[2]-i,r<0&&(r=-r),(o+=r)<n&&(n=o,a=s[3])))),l>=0&&(s=B[l],o=e-s[1],o>=n?l=-1:(l--,o<0&&(o=-o),r=s[0]-t,r<0&&(r=-r),(o+=r)<n&&(r=s[2]-i,r<0&&(r=-r),(o+=r)<n&&(n=o,a=s[3]))));return a}function l(){var i,r=t.length,a=30+(e-1)/3,h=r/(3*e),l=~~(h/f),u=F,p=T,c=p>>m;for(c<=1&&(c=0),i=0;i<c;i++)Q[i]=u*((c*c-i*i)*A/(c*c));var y;r<E?(e=1,y=3):y=r%I!=0?3*I:r%D!=0?3*D:r%G!=0?3*G:3*z;var d,g,x,b,v=0;for(i=0;i<h;)if(d=(255&t[v])<<w,g=(255&t[v+1])<<w,x=(255&t[v+2])<<w,b=n(d,g,x),s(u,b,d,g,x),0!==c&&o(c,b,d,g,x),v+=y,v>=r&&(v-=r),i++,0===l&&(l=1),i%l==0)for(u-=u/a,p-=p/M,c=p>>m,c<=1&&(c=0),b=0;b<c;b++)Q[b]=u*((c*c-b*b)*A/(c*c))}function u(){i(),l(),r(),a()}function p(){for(var t=[],e=[],i=0;i<c;i++)e[B[i][3]]=i;for(var r=0,s=0;s<c;s++){var o=e[s];t[r++]=B[o][0],t[r++]=B[o][1],t[r++]=B[o][2]}return t}var B,S,R,U,Q;this.buildColormap=u,this.getColormap=p,this.lookupRGB=h}function i(){this.page=-1,this.pages=[],this.newPage()}function r(t,e){this.width=~~t,this.height=~~e,this.transparent=null,this.transIndex=0,this.repeat=-1,this.delay=0,this.image=null,this.pixels=null,this.indexedPixels=null,this.colorDepth=null,this.colorTab=null,this.neuQuant=null,this.usedEntry=new Array,this.palSize=7,this.dispose=-1,this.firstFrame=!0,this.sample=10,this.dither=!1,this.globalPalette=!1,this.out=new i}var s,o,n,a,h=-1,l=12,u=5003,p=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],f=100,c=256,y=c-1,w=4,d=16,g=1<<d,x=10,b=10,v=g>>b,P=g<<x-b,B=c>>3,m=6,S=1<<m,T=B*S,M=30,F=1024,A=256,C=1<<18,I=499,D=491,G=487,z=503,E=3*z;a=function(t){var e,i,s,o;return e=new r(t.width,t.height),0===t.index?e.writeHeader():e.firstFrame=!1,e.setTransparent(t.transparent),e.setRepeat(t.repeat),e.setDelay(t.delay),e.setQuality(t.quality),e.setDither(t.dither),e.setGlobalPalette(t.globalPalette),e.addFrame(t.data),t.last&&e.finish(),!0===t.globalPalette&&(t.globalPalette=e.getGlobalPalette()),s=e.stream(),t.data=s.pages,t.cursor=s.cursor,t.pageSize=s.constructor.pageSize,t.canTransfer?(o=function(){var e,r,s,o;for(s=t.data,o=[],e=0,r=s.length;e<r;e++)i=s[e],o.push(i.buffer);return o}(),self.postMessage(t,o)):self.postMessage(t)},self.onmessage=function(t){return a(t.data)},i.pageSize=4096,i.charMap={};for(var R=0;R<256;R++)i.charMap[R]=String.fromCharCode(R);i.prototype.newPage=function(){this.pages[++this.page]=new Uint8Array(i.pageSize),this.cursor=0},i.prototype.getData=function(){for(var t=\\\"\\\",e=0;e<this.pages.length;e++)for(var r=0;r<i.pageSize;r++)t+=i.charMap[this.pages[e][r]];return t},i.prototype.writeByte=function(t){this.cursor>=i.pageSize&&this.newPage(),this.pages[this.page][this.cursor++]=t},i.prototype.writeUTFBytes=function(t){for(var e=t.length,i=0;i<e;i++)this.writeByte(t.charCodeAt(i))},i.prototype.writeBytes=function(t,e,i){for(var r=i||t.length,s=e||0;s<r;s++)this.writeByte(t[s])},r.prototype.setDelay=function(t){this.delay=Math.round(t/10)},r.prototype.setFrameRate=function(t){this.delay=Math.round(100/t)},r.prototype.setDispose=function(t){t>=0&&(this.dispose=t)},r.prototype.setRepeat=function(t){this.repeat=t},r.prototype.setTransparent=function(t){this.transparent=t},r.prototype.addFrame=function(t){this.image=t,this.colorTab=this.globalPalette&&this.globalPalette.slice?this.globalPalette:null,this.getImagePixels(),this.analyzePixels(),!0===this.globalPalette&&(this.globalPalette=this.colorTab),this.firstFrame&&(this.writeLSD(),this.writePalette(),this.repeat>=0&&this.writeNetscapeExt()),this.writeGraphicCtrlExt(),this.writeImageDesc(),this.firstFrame||this.globalPalette||this.writePalette(),this.writePixels(),this.firstFrame=!1},r.prototype.finish=function(){this.out.writeByte(59)},r.prototype.setQuality=function(t){t<1&&(t=1),this.sample=t},r.prototype.setDither=function(t){!0===t&&(t=\\\"FloydSteinberg\\\"),this.dither=t},r.prototype.setGlobalPalette=function(t){this.globalPalette=t},r.prototype.getGlobalPalette=function(){return this.globalPalette&&this.globalPalette.slice&&this.globalPalette.slice(0)||this.globalPalette},r.prototype.writeHeader=function(){this.out.writeUTFBytes(\\\"GIF89a\\\")},r.prototype.analyzePixels=function(){this.colorTab||(this.neuQuant=new e(this.pixels,this.sample),this.neuQuant.buildColormap(),this.colorTab=this.neuQuant.getColormap()),this.dither?this.ditherPixels(this.dither.replace(\\\"-serpentine\\\",\\\"\\\"),null!==this.dither.match(/-serpentine/)):this.indexPixels(),this.pixels=null,this.colorDepth=8,this.palSize=7,null!==this.transparent&&(this.transIndex=this.findClosest(this.transparent,!0))},r.prototype.indexPixels=function(t){var e=this.pixels.length/3;this.indexedPixels=new Uint8Array(e);for(var i=0,r=0;r<e;r++){var s=this.findClosestRGB(255&this.pixels[i++],255&this.pixels[i++],255&this.pixels[i++]);this.usedEntry[s]=!0,this.indexedPixels[r]=s}},r.prototype.ditherPixels=function(t,e){var i={FalseFloydSteinberg:[[3/8,1,0],[3/8,0,1],[.25,1,1]],FloydSteinberg:[[7/16,1,0],[3/16,-1,1],[5/16,0,1],[1/16,1,1]],Stucki:[[8/42,1,0],[4/42,2,0],[2/42,-2,1],[4/42,-1,1],[8/42,0,1],[4/42,1,1],[2/42,2,1],[1/42,-2,2],[2/42,-1,2],[4/42,0,2],[2/42,1,2],[1/42,2,2]],Atkinson:[[1/8,1,0],[1/8,2,0],[1/8,-1,1],[1/8,0,1],[1/8,1,1],[1/8,0,2]]};if(!t||!i[t])throw\\\"Unknown dithering kernel: \\\"+t;var r=i[t],s=0,o=this.height,n=this.width,a=this.pixels,h=e?-1:1;this.indexedPixels=new Uint8Array(this.pixels.length/3);for(var l=0;l<o;l++){e&&(h*=-1);for(var u=1==h?0:n-1,p=1==h?n:0;u!==p;u+=h){s=l*n+u;var f=3*s,c=a[f],y=a[f+1],w=a[f+2];f=this.findClosestRGB(c,y,w),this.usedEntry[f]=!0,this.indexedPixels[s]=f,f*=3;for(var d=this.colorTab[f],g=this.colorTab[f+1],x=this.colorTab[f+2],b=c-d,v=y-g,P=w-x,B=1==h?0:r.length-1,m=1==h?r.length:0;B!==m;B+=h){var S=r[B][1],T=r[B][2];if(S+u>=0&&S+u<n&&T+l>=0&&T+l<o){var M=r[B][0];f=s+S+T*n,f*=3,a[f]=Math.max(0,Math.min(255,a[f]+b*M)),a[f+1]=Math.max(0,Math.min(255,a[f+1]+v*M)),a[f+2]=Math.max(0,Math.min(255,a[f+2]+P*M))}}}}},r.prototype.findClosest=function(t,e){return this.findClosestRGB((16711680&t)>>16,(65280&t)>>8,255&t,e)},r.prototype.findClosestRGB=function(t,e,i,r){if(null===this.colorTab)return-1;if(this.neuQuant&&!r)return this.neuQuant.lookupRGB(t,e,i);for(var s=0,o=16777216,n=this.colorTab.length,a=0,h=0;a<n;h++){var l=t-(255&this.colorTab[a++]),u=e-(255&this.colorTab[a++]),p=i-(255&this.colorTab[a++]),f=l*l+u*u+p*p;(!r||this.usedEntry[h])&&f<o&&(o=f,s=h)}return s},r.prototype.getImagePixels=function(){var t=this.width,e=this.height;this.pixels=new Uint8Array(t*e*3);for(var i=this.image,r=0,s=0,o=0;o<e;o++)for(var n=0;n<t;n++)this.pixels[s++]=i[r++],this.pixels[s++]=i[r++],this.pixels[s++]=i[r++],r++},r.prototype.writeGraphicCtrlExt=function(){this.out.writeByte(33),this.out.writeByte(249),this.out.writeByte(4);var t,e;null===this.transparent?(t=0,e=0):(t=1,e=2),this.dispose>=0&&(e=7&dispose),e<<=2,this.out.writeByte(0|e|t),this.writeShort(this.delay),this.out.writeByte(this.transIndex),this.out.writeByte(0)},r.prototype.writeImageDesc=function(){this.out.writeByte(44),this.writeShort(0),this.writeShort(0),this.writeShort(this.width),this.writeShort(this.height),this.firstFrame||this.globalPalette?this.out.writeByte(0):this.out.writeByte(128|this.palSize)},r.prototype.writeLSD=function(){this.writeShort(this.width),this.writeShort(this.height),this.out.writeByte(240|this.palSize),this.out.writeByte(0),this.out.writeByte(0)},r.prototype.writeNetscapeExt=function(){this.out.writeByte(33),this.out.writeByte(255),this.out.writeByte(11),this.out.writeUTFBytes(\\\"NETSCAPE2.0\\\"),this.out.writeByte(3),this.out.writeByte(1),this.writeShort(this.repeat),this.out.writeByte(0)},r.prototype.writePalette=function(){this.out.writeBytes(this.colorTab);for(var t=768-this.colorTab.length,e=0;e<t;e++)this.out.writeByte(0)},r.prototype.writeShort=function(t){this.out.writeByte(255&t),this.out.writeByte(t>>8&255)},r.prototype.writePixels=function(){new t(this.width,this.height,this.indexedPixels,this.colorDepth).encode(this.out)},r.prototype.stream=function(){return this.out}}()}]);\\n//# sourceMappingURL=7340f9193e3b24ac5930.worker.js.map\", __webpack_public_path__ + \"7340f9193e3b24ac5930.worker.js\");\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/lib/gif.worker.js\n// module id = 0\n// module chunks = 0","import React, { useState } from \"react\";\nimport { toBoolean } from \"./lib/util.js\";\nimport AwesomeQRCode from \"./lib/awesome-qr\";\nimport imgLoaded from \"./lib/imgLoaded\";\nimport readAsArrayBuffer from \"./lib/readAsArrayBuffer\";\n// class ReactAwesomeQr extends Component {\n//   constructor(props) {\n//     super(props);\n//     this.state = {\n//       imgSrc: \"\"\n//     };\n//   }\n//   componentDidMount(){\n//     this.renderQr()\n//   }\n  \n\n//   async renderQr() {\n//     const props = this.props;\n//     if (props.gifBgSrc) {\n//       const gifImg = await readAsArrayBuffer(props.gifBgSrc);\n//       const logoImg = await imgLoaded(props.logoSrc);\n\n//       renderQr(props, undefined, logoImg, gifImg, (dataURI, qid) => {\n//         this.setState({\n//           imgSrc: dataURI\n//         });\n//       });\n//     } else {\n//       const bgImg = await imgLoaded(props.bgSrc);\n//       const logoImg = await imgLoaded(props.logoSrc);\n//       renderQr(props, bgImg, logoImg, null, (dataURI, qid) => {\n//         this.setState({\n//           imgSrc: dataURI\n//         });\n//       });\n//     }\n//   }\n//   render() {\n//     if (this.state.imgSrc) {\n//       return <img src={this.state.imgSrc} alt=\"qr\" />;\n//     } else {\n//       return false;\n//     }\n//   }\n// }\nfunction ReactAwesomeQr(props) {\n  const [imgSrc, setImgSrc] = useState(\"\");\n  if (props.gifBgSrc) {\n    (async function() {\n      const gifImg = await readAsArrayBuffer(props.gifBgSrc);\n      const logoImg = await imgLoaded(props.logoSrc);\n\n      renderQr(props, undefined, logoImg, gifImg, (dataURI, qid) => {\n        setImgSrc(dataURI);\n      });\n    })();\n  } else {\n    (async function() {\n      const bgImg = await imgLoaded(props.bgSrc);\n      const logoImg = await imgLoaded(props.logoSrc);\n      renderQr(props, bgImg, logoImg, null, (dataURI, qid) => {\n        setImgSrc(dataURI);\n      });\n    })();\n  }\n\n  if (imgSrc) {\n    return <img src={imgSrc} alt=\"qr\" />;\n  } else {\n    return false;\n  }\n}\n\nfunction renderQr(props, img, logoImg, gifBgSrc, cb) {\n  new AwesomeQRCode().create({\n    gifBackground: gifBgSrc || undefined,\n    text: props.text,\n    size: props.size || 200,\n    margin: props.margin === 0 ? 0 : 20,\n    colorDark: props.colorDark || \"#000000\",\n    colorLight: props.colorLight || \"#FFFFFF\",\n    backgroundColor: props.backgroundColor || \"#FFFFFF\",\n    backgroundImage: img || undefined,\n    backgroundDimming: props.backgroundDimming || \"rgba(0,0,0,0)\",\n    logoImage: logoImg || undefined,\n    logoScale: props.logoScale || 0.2,\n    logoBackgroundColor: props.logoBackgroundColor || \"rgb(255,255,255)\",\n    correctLevel: props.correctLevel || 1,\n    logoMargin: props.logoMargin || 0,\n    logoCornerRadius: props.logoCornerRadius || 8,\n    whiteMargin: toBoolean(props.whiteMargin) || true,\n    dotScale: props.dotScale || 1,\n    autoColor: toBoolean(props.autoColor) || true,\n    binarize: toBoolean(props.binarize) || false,\n    binarizeThreshold: props.binarizeThreshold || 128,\n    callback: function(dataURI) {\n      cb(dataURI, props.qid);\n    }\n  });\n}\n\nexport default ReactAwesomeQr;\n\n\n\n// WEBPACK FOOTER //\n// ./src/qr.js","module.exports = __WEBPACK_EXTERNAL_MODULE_3__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"react\"\n// module id = 3\n// module chunks = 0","/* eslint-disable */ \nexport function toBoolean(val) {\n  if (val === '') return val\n  return val === 'true' || val == '1'\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/util.js","/* eslint-disable */ \nimport GIF from \"./Gif\";\nimport GIFE from \"./gifjs\";\nvar AwesomeQRCode;\n\nfunction QR8bitByte(data) {\n  this.mode = QRMode.MODE_8BIT_BYTE;\n  this.data = data;\n  this.parsedData = [];\n  for (var i = 0, l = this.data.length; i < l; i++) {\n    var byteArray = [];\n    var code = this.data.charCodeAt(i);\n    if (code > 0x10000) {\n      byteArray[0] = 0xf0 | ((code & 0x1c0000) >>> 18);\n      byteArray[1] = 0x80 | ((code & 0x3f000) >>> 12);\n      byteArray[2] = 0x80 | ((code & 0xfc0) >>> 6);\n      byteArray[3] = 0x80 | (code & 0x3f);\n    } else if (code > 0x800) {\n      byteArray[0] = 0xe0 | ((code & 0xf000) >>> 12);\n      byteArray[1] = 0x80 | ((code & 0xfc0) >>> 6);\n      byteArray[2] = 0x80 | (code & 0x3f);\n    } else if (code > 0x80) {\n      byteArray[0] = 0xc0 | ((code & 0x7c0) >>> 6);\n      byteArray[1] = 0x80 | (code & 0x3f);\n    } else {\n      byteArray[0] = code;\n    }\n    this.parsedData.push(byteArray);\n  }\n  this.parsedData = Array.prototype.concat.apply([], this.parsedData);\n  if (this.parsedData.length != this.data.length) {\n    this.parsedData.unshift(191);\n    this.parsedData.unshift(187);\n    this.parsedData.unshift(239);\n  }\n}\n\nQR8bitByte.prototype = {\n  getLength: function(buffer) {\n    return this.parsedData.length;\n  },\n  write: function(buffer) {\n    for (var i = 0, l = this.parsedData.length; i < l; i++) {\n      buffer.put(this.parsedData[i], 8);\n    }\n  }\n};\n\nfunction QRCodeModel(typeNumber, errorCorrectLevel) {\n  this.typeNumber = typeNumber;\n  this.errorCorrectLevel = errorCorrectLevel;\n  this.modules = null;\n  this.moduleCount = 0;\n  this.dataCache = null;\n  this.dataList = [];\n}\n\nQRCodeModel.prototype = {\n  addData: function(data) {\n    var newData = new QR8bitByte(data);\n    this.dataList.push(newData);\n    this.dataCache = null;\n  },\n  isDark: function(row, col) {\n    if (\n      row < 0 ||\n      this.moduleCount <= row ||\n      col < 0 ||\n      this.moduleCount <= col\n    ) {\n      throw new Error(row + \",\" + col);\n    }\n    return this.modules[row][col];\n  },\n  getModuleCount: function() {\n    return this.moduleCount;\n  },\n  make: function() {\n    /////////////////////////////////////////////\n    if (this.typeNumber < 1) {\n      var typeNumber = 1;\n      for (typeNumber = 1; typeNumber < 40; typeNumber++) {\n        var rsBlocks = QRRSBlock.getRSBlocks(\n          typeNumber,\n          this.errorCorrectLevel\n        );\n\n        var buffer = new QRBitBuffer();\n        var totalDataCount = 0;\n        for (var i = 0; i < rsBlocks.length; i++) {\n          totalDataCount += rsBlocks[i].dataCount;\n        }\n\n        for (var i = 0; i < this.dataList.length; i++) {\n          var data = this.dataList[i];\n          buffer.put(data.mode, 4);\n          buffer.put(\n            data.getLength(),\n            QRUtil.getLengthInBits(data.mode, typeNumber)\n          );\n          data.write(buffer);\n        }\n        if (buffer.getLengthInBits() <= totalDataCount * 8) break;\n      }\n      this.typeNumber = typeNumber;\n    }\n    /////////////////////////////////////////////\n    this.makeImpl(!1, this.getBestMaskPattern());\n  },\n  makeImpl: function(test, maskPattern) {\n    this.moduleCount = this.typeNumber * 4 + 17;\n    this.modules = new Array(this.moduleCount);\n    for (var row = 0; row < this.moduleCount; row++) {\n      this.modules[row] = new Array(this.moduleCount);\n      for (var col = 0; col < this.moduleCount; col++) {\n        this.modules[row][col] = null;\n      }\n    }\n    this.setupPositionProbePattern(0, 0);\n    this.setupPositionProbePattern(this.moduleCount - 7, 0);\n    this.setupPositionProbePattern(0, this.moduleCount - 7);\n    this.setupPositionAdjustPattern();\n    this.setupTimingPattern();\n    this.setupTypeInfo(test, maskPattern);\n    if (this.typeNumber >= 7) {\n      this.setupTypeNumber(test);\n    }\n    if (this.dataCache == null) {\n      this.dataCache = QRCodeModel.createData(\n        this.typeNumber,\n        this.errorCorrectLevel,\n        this.dataList\n      );\n    }\n    this.mapData(this.dataCache, maskPattern);\n  },\n  setupPositionProbePattern: function(row, col) {\n    for (var r = -1; r <= 7; r++) {\n      if (row + r <= -1 || this.moduleCount <= row + r) continue;\n      for (var c = -1; c <= 7; c++) {\n        if (col + c <= -1 || this.moduleCount <= col + c) continue;\n        if (\n          (0 <= r && r <= 6 && (c == 0 || c == 6)) ||\n          (0 <= c && c <= 6 && (r == 0 || r == 6)) ||\n          (2 <= r && r <= 4 && 2 <= c && c <= 4)\n        ) {\n          this.modules[row + r][col + c] = !0;\n        } else {\n          this.modules[row + r][col + c] = !1;\n        }\n      }\n    }\n  },\n  getBestMaskPattern: function() {\n    var minLostPoint = 0;\n    var pattern = 0;\n    for (var i = 0; i < 8; i++) {\n      this.makeImpl(!0, i);\n      var lostPoint = QRUtil.getLostPoint(this);\n      if (i == 0 || minLostPoint > lostPoint) {\n        minLostPoint = lostPoint;\n        pattern = i;\n      }\n    }\n    return pattern;\n  },\n  createMovieClip: function(target_mc, instance_name, depth) {\n    var qr_mc = target_mc.createEmptyMovieClip(instance_name, depth);\n    var cs = 1;\n    this.make();\n    for (var row = 0; row < this.modules.length; row++) {\n      var y = row * cs;\n      for (var col = 0; col < this.modules[row].length; col++) {\n        var x = col * cs;\n        var dark = this.modules[row][col];\n        if (dark) {\n          qr_mc.beginFill(0, 100);\n          qr_mc.moveTo(x, y);\n          qr_mc.lineTo(x + cs, y);\n          qr_mc.lineTo(x + cs, y + cs);\n          qr_mc.lineTo(x, y + cs);\n          qr_mc.endFill();\n        }\n      }\n    }\n    return qr_mc;\n  },\n  setupTimingPattern: function() {\n    for (var r = 8; r < this.moduleCount - 8; r++) {\n      if (this.modules[r][6] != null) {\n        continue;\n      }\n      this.modules[r][6] = r % 2 == 0;\n    }\n    for (var c = 8; c < this.moduleCount - 8; c++) {\n      if (this.modules[6][c] != null) {\n        continue;\n      }\n      this.modules[6][c] = c % 2 == 0;\n    }\n  },\n  setupPositionAdjustPattern: function() {\n    var pos = QRUtil.getPatternPosition(this.typeNumber);\n    for (var i = 0; i < pos.length; i++) {\n      for (var j = 0; j < pos.length; j++) {\n        var row = pos[i];\n        var col = pos[j];\n        if (this.modules[row][col] != null) {\n          continue;\n        }\n        for (var r = -2; r <= 2; r++) {\n          for (var c = -2; c <= 2; c++) {\n            if (r == -2 || r == 2 || c == -2 || c == 2 || (r == 0 && c == 0)) {\n              this.modules[row + r][col + c] = !0;\n            } else {\n              this.modules[row + r][col + c] = !1;\n            }\n          }\n        }\n      }\n    }\n  },\n  setupTypeNumber: function(test) {\n    var bits = QRUtil.getBCHTypeNumber(this.typeNumber);\n    for (var i = 0; i < 18; i++) {\n      var mod = !test && ((bits >> i) & 1) == 1;\n      this.modules[Math.floor(i / 3)][(i % 3) + this.moduleCount - 8 - 3] = mod;\n    }\n    for (var i = 0; i < 18; i++) {\n      var mod = !test && ((bits >> i) & 1) == 1;\n      this.modules[(i % 3) + this.moduleCount - 8 - 3][Math.floor(i / 3)] = mod;\n    }\n  },\n  setupTypeInfo: function(test, maskPattern) {\n    var data = (this.errorCorrectLevel << 3) | maskPattern;\n    var bits = QRUtil.getBCHTypeInfo(data);\n    for (var i = 0; i < 15; i++) {\n      var mod = !test && ((bits >> i) & 1) == 1;\n      if (i < 6) {\n        this.modules[i][8] = mod;\n      } else if (i < 8) {\n        this.modules[i + 1][8] = mod;\n      } else {\n        this.modules[this.moduleCount - 15 + i][8] = mod;\n      }\n    }\n    for (var i = 0; i < 15; i++) {\n      var mod = !test && ((bits >> i) & 1) == 1;\n      if (i < 8) {\n        this.modules[8][this.moduleCount - i - 1] = mod;\n      } else if (i < 9) {\n        this.modules[8][15 - i - 1 + 1] = mod;\n      } else {\n        this.modules[8][15 - i - 1] = mod;\n      }\n    }\n    this.modules[this.moduleCount - 8][8] = !test;\n  },\n  mapData: function(data, maskPattern) {\n    var inc = -1;\n    var row = this.moduleCount - 1;\n    var bitIndex = 7;\n    var byteIndex = 0;\n    for (var col = this.moduleCount - 1; col > 0; col -= 2) {\n      if (col == 6) col--;\n      while (!0) {\n        for (var c = 0; c < 2; c++) {\n          if (this.modules[row][col - c] == null) {\n            var dark = !1;\n            if (byteIndex < data.length) {\n              dark = ((data[byteIndex] >>> bitIndex) & 1) == 1;\n            }\n            var mask = QRUtil.getMask(maskPattern, row, col - c);\n            if (mask) {\n              dark = !dark;\n            }\n            this.modules[row][col - c] = dark;\n            bitIndex--;\n            if (bitIndex == -1) {\n              byteIndex++;\n              bitIndex = 7;\n            }\n          }\n        }\n        row += inc;\n        if (row < 0 || this.moduleCount <= row) {\n          row -= inc;\n          inc = -inc;\n          break;\n        }\n      }\n    }\n  }\n};\nQRCodeModel.PAD0 = 0xec;\nQRCodeModel.PAD1 = 0x11;\nQRCodeModel.createData = function(typeNumber, errorCorrectLevel, dataList) {\n  var rsBlocks = QRRSBlock.getRSBlocks(typeNumber, errorCorrectLevel);\n  var buffer = new QRBitBuffer();\n  for (var i = 0; i < dataList.length; i++) {\n    var data = dataList[i];\n    buffer.put(data.mode, 4);\n    buffer.put(data.getLength(), QRUtil.getLengthInBits(data.mode, typeNumber));\n    data.write(buffer);\n  }\n  var totalDataCount = 0;\n  for (var i = 0; i < rsBlocks.length; i++) {\n    totalDataCount += rsBlocks[i].dataCount;\n  }\n  if (buffer.getLengthInBits() > totalDataCount * 8) {\n    throw new Error(\n      \"code length overflow. (\" +\n        buffer.getLengthInBits() +\n        \">\" +\n        totalDataCount * 8 +\n        \")\"\n    );\n  }\n  if (buffer.getLengthInBits() + 4 <= totalDataCount * 8) {\n    buffer.put(0, 4);\n  }\n  while (buffer.getLengthInBits() % 8 != 0) {\n    buffer.putBit(!1);\n  }\n  while (!0) {\n    if (buffer.getLengthInBits() >= totalDataCount * 8) {\n      break;\n    }\n    buffer.put(QRCodeModel.PAD0, 8);\n    if (buffer.getLengthInBits() >= totalDataCount * 8) {\n      break;\n    }\n    buffer.put(QRCodeModel.PAD1, 8);\n  }\n  return QRCodeModel.createBytes(buffer, rsBlocks);\n};\nQRCodeModel.createBytes = function(buffer, rsBlocks) {\n  var offset = 0;\n  var maxDcCount = 0;\n  var maxEcCount = 0;\n  var dcdata = new Array(rsBlocks.length);\n  var ecdata = new Array(rsBlocks.length);\n  for (var r = 0; r < rsBlocks.length; r++) {\n    var dcCount = rsBlocks[r].dataCount;\n    var ecCount = rsBlocks[r].totalCount - dcCount;\n    maxDcCount = Math.max(maxDcCount, dcCount);\n    maxEcCount = Math.max(maxEcCount, ecCount);\n    dcdata[r] = new Array(dcCount);\n    for (var i = 0; i < dcdata[r].length; i++) {\n      dcdata[r][i] = 0xff & buffer.buffer[i + offset];\n    }\n    offset += dcCount;\n    var rsPoly = QRUtil.getErrorCorrectPolynomial(ecCount);\n    var rawPoly = new QRPolynomial(dcdata[r], rsPoly.getLength() - 1);\n    var modPoly = rawPoly.mod(rsPoly);\n    ecdata[r] = new Array(rsPoly.getLength() - 1);\n    for (var i = 0; i < ecdata[r].length; i++) {\n      var modIndex = i + modPoly.getLength() - ecdata[r].length;\n      ecdata[r][i] = modIndex >= 0 ? modPoly.get(modIndex) : 0;\n    }\n  }\n  var totalCodeCount = 0;\n  for (var i = 0; i < rsBlocks.length; i++) {\n    totalCodeCount += rsBlocks[i].totalCount;\n  }\n  var data = new Array(totalCodeCount);\n  var index = 0;\n  for (var i = 0; i < maxDcCount; i++) {\n    for (var r = 0; r < rsBlocks.length; r++) {\n      if (i < dcdata[r].length) {\n        data[index++] = dcdata[r][i];\n      }\n    }\n  }\n  for (var i = 0; i < maxEcCount; i++) {\n    for (var r = 0; r < rsBlocks.length; r++) {\n      if (i < ecdata[r].length) {\n        data[index++] = ecdata[r][i];\n      }\n    }\n  }\n  return data;\n};\nvar QRMode = {\n  MODE_NUMBER: 1 << 0,\n  MODE_ALPHA_NUM: 1 << 1,\n  MODE_8BIT_BYTE: 1 << 2,\n  MODE_KANJI: 1 << 3\n};\nvar QRErrorCorrectLevel = { L: 1, M: 0, Q: 3, H: 2 };\nvar QRMaskPattern = {\n  PATTERN000: 0,\n  PATTERN001: 1,\n  PATTERN010: 2,\n  PATTERN011: 3,\n  PATTERN100: 4,\n  PATTERN101: 5,\n  PATTERN110: 6,\n  PATTERN111: 7\n};\nvar QRUtil = {\n  PATTERN_POSITION_TABLE: [\n    [],\n    [6, 18],\n    [6, 22],\n    [6, 26],\n    [6, 30],\n    [6, 34],\n    [6, 22, 38],\n    [6, 24, 42],\n    [6, 26, 46],\n    [6, 28, 50],\n    [6, 30, 54],\n    [6, 32, 58],\n    [6, 34, 62],\n    [6, 26, 46, 66],\n    [6, 26, 48, 70],\n    [6, 26, 50, 74],\n    [6, 30, 54, 78],\n    [6, 30, 56, 82],\n    [6, 30, 58, 86],\n    [6, 34, 62, 90],\n    [6, 28, 50, 72, 94],\n    [6, 26, 50, 74, 98],\n    [6, 30, 54, 78, 102],\n    [6, 28, 54, 80, 106],\n    [6, 32, 58, 84, 110],\n    [6, 30, 58, 86, 114],\n    [6, 34, 62, 90, 118],\n    [6, 26, 50, 74, 98, 122],\n    [6, 30, 54, 78, 102, 126],\n    [6, 26, 52, 78, 104, 130],\n    [6, 30, 56, 82, 108, 134],\n    [6, 34, 60, 86, 112, 138],\n    [6, 30, 58, 86, 114, 142],\n    [6, 34, 62, 90, 118, 146],\n    [6, 30, 54, 78, 102, 126, 150],\n    [6, 24, 50, 76, 102, 128, 154],\n    [6, 28, 54, 80, 106, 132, 158],\n    [6, 32, 58, 84, 110, 136, 162],\n    [6, 26, 54, 82, 110, 138, 166],\n    [6, 30, 58, 86, 114, 142, 170]\n  ],\n  G15:\n    (1 << 10) | (1 << 8) | (1 << 5) | (1 << 4) | (1 << 2) | (1 << 1) | (1 << 0),\n  G18:\n    (1 << 12) |\n    (1 << 11) |\n    (1 << 10) |\n    (1 << 9) |\n    (1 << 8) |\n    (1 << 5) |\n    (1 << 2) |\n    (1 << 0),\n  G15_MASK: (1 << 14) | (1 << 12) | (1 << 10) | (1 << 4) | (1 << 1),\n  getBCHTypeInfo: function(data) {\n    var d = data << 10;\n    while (QRUtil.getBCHDigit(d) - QRUtil.getBCHDigit(QRUtil.G15) >= 0) {\n      d ^=\n        QRUtil.G15 << (QRUtil.getBCHDigit(d) - QRUtil.getBCHDigit(QRUtil.G15));\n    }\n    return ((data << 10) | d) ^ QRUtil.G15_MASK;\n  },\n  getBCHTypeNumber: function(data) {\n    var d = data << 12;\n    while (QRUtil.getBCHDigit(d) - QRUtil.getBCHDigit(QRUtil.G18) >= 0) {\n      d ^=\n        QRUtil.G18 << (QRUtil.getBCHDigit(d) - QRUtil.getBCHDigit(QRUtil.G18));\n    }\n    return (data << 12) | d;\n  },\n  getBCHDigit: function(data) {\n    var digit = 0;\n    while (data != 0) {\n      digit++;\n      data >>>= 1;\n    }\n    return digit;\n  },\n  getPatternPosition: function(typeNumber) {\n    return QRUtil.PATTERN_POSITION_TABLE[typeNumber - 1];\n  },\n  getMask: function(maskPattern, i, j) {\n    switch (maskPattern) {\n      case QRMaskPattern.PATTERN000:\n        return (i + j) % 2 == 0;\n      case QRMaskPattern.PATTERN001:\n        return i % 2 == 0;\n      case QRMaskPattern.PATTERN010:\n        return j % 3 == 0;\n      case QRMaskPattern.PATTERN011:\n        return (i + j) % 3 == 0;\n      case QRMaskPattern.PATTERN100:\n        return (Math.floor(i / 2) + Math.floor(j / 3)) % 2 == 0;\n      case QRMaskPattern.PATTERN101:\n        return ((i * j) % 2) + ((i * j) % 3) == 0;\n      case QRMaskPattern.PATTERN110:\n        return (((i * j) % 2) + ((i * j) % 3)) % 2 == 0;\n      case QRMaskPattern.PATTERN111:\n        return (((i * j) % 3) + ((i + j) % 2)) % 2 == 0;\n      default:\n        throw new Error(\"bad maskPattern:\" + maskPattern);\n    }\n  },\n  getErrorCorrectPolynomial: function(errorCorrectLength) {\n    var a = new QRPolynomial([1], 0);\n    for (var i = 0; i < errorCorrectLength; i++) {\n      a = a.multiply(new QRPolynomial([1, QRMath.gexp(i)], 0));\n    }\n    return a;\n  },\n  getLengthInBits: function(mode, type) {\n    if (1 <= type && type < 10) {\n      switch (mode) {\n        case QRMode.MODE_NUMBER:\n          return 10;\n        case QRMode.MODE_ALPHA_NUM:\n          return 9;\n        case QRMode.MODE_8BIT_BYTE:\n          return 8;\n        case QRMode.MODE_KANJI:\n          return 8;\n        default:\n          throw new Error(\"mode:\" + mode);\n      }\n    } else if (type < 27) {\n      switch (mode) {\n        case QRMode.MODE_NUMBER:\n          return 12;\n        case QRMode.MODE_ALPHA_NUM:\n          return 11;\n        case QRMode.MODE_8BIT_BYTE:\n          return 16;\n        case QRMode.MODE_KANJI:\n          return 10;\n        default:\n          throw new Error(\"mode:\" + mode);\n      }\n    } else if (type < 41) {\n      switch (mode) {\n        case QRMode.MODE_NUMBER:\n          return 14;\n        case QRMode.MODE_ALPHA_NUM:\n          return 13;\n        case QRMode.MODE_8BIT_BYTE:\n          return 16;\n        case QRMode.MODE_KANJI:\n          return 12;\n        default:\n          throw new Error(\"mode:\" + mode);\n      }\n    } else {\n      throw new Error(\"type:\" + type);\n    }\n  },\n  getLostPoint: function(qrCode) {\n    var moduleCount = qrCode.getModuleCount();\n    var lostPoint = 0;\n    for (var row = 0; row < moduleCount; row++) {\n      for (var col = 0; col < moduleCount; col++) {\n        var sameCount = 0;\n        var dark = qrCode.isDark(row, col);\n        for (var r = -1; r <= 1; r++) {\n          if (row + r < 0 || moduleCount <= row + r) {\n            continue;\n          }\n          for (var c = -1; c <= 1; c++) {\n            if (col + c < 0 || moduleCount <= col + c) {\n              continue;\n            }\n            if (r == 0 && c == 0) {\n              continue;\n            }\n            if (dark == qrCode.isDark(row + r, col + c)) {\n              sameCount++;\n            }\n          }\n        }\n        if (sameCount > 5) {\n          lostPoint += 3 + sameCount - 5;\n        }\n      }\n    }\n    for (var row = 0; row < moduleCount - 1; row++) {\n      for (var col = 0; col < moduleCount - 1; col++) {\n        var count = 0;\n        if (qrCode.isDark(row, col)) count++;\n        if (qrCode.isDark(row + 1, col)) count++;\n        if (qrCode.isDark(row, col + 1)) count++;\n        if (qrCode.isDark(row + 1, col + 1)) count++;\n        if (count == 0 || count == 4) {\n          lostPoint += 3;\n        }\n      }\n    }\n    for (var row = 0; row < moduleCount; row++) {\n      for (var col = 0; col < moduleCount - 6; col++) {\n        if (\n          qrCode.isDark(row, col) &&\n          !qrCode.isDark(row, col + 1) &&\n          qrCode.isDark(row, col + 2) &&\n          qrCode.isDark(row, col + 3) &&\n          qrCode.isDark(row, col + 4) &&\n          !qrCode.isDark(row, col + 5) &&\n          qrCode.isDark(row, col + 6)\n        ) {\n          lostPoint += 40;\n        }\n      }\n    }\n    for (var col = 0; col < moduleCount; col++) {\n      for (var row = 0; row < moduleCount - 6; row++) {\n        if (\n          qrCode.isDark(row, col) &&\n          !qrCode.isDark(row + 1, col) &&\n          qrCode.isDark(row + 2, col) &&\n          qrCode.isDark(row + 3, col) &&\n          qrCode.isDark(row + 4, col) &&\n          !qrCode.isDark(row + 5, col) &&\n          qrCode.isDark(row + 6, col)\n        ) {\n          lostPoint += 40;\n        }\n      }\n    }\n    var darkCount = 0;\n    for (var col = 0; col < moduleCount; col++) {\n      for (var row = 0; row < moduleCount; row++) {\n        if (qrCode.isDark(row, col)) {\n          darkCount++;\n        }\n      }\n    }\n    var ratio =\n      Math.abs((100 * darkCount) / moduleCount / moduleCount - 50) / 5;\n    lostPoint += ratio * 10;\n    return lostPoint;\n  }\n};\nvar QRMath = {\n  glog: function(n) {\n    if (n < 1) {\n      throw new Error(\"glog(\" + n + \")\");\n    }\n    return QRMath.LOG_TABLE[n];\n  },\n  gexp: function(n) {\n    while (n < 0) {\n      n += 255;\n    }\n    while (n >= 256) {\n      n -= 255;\n    }\n    return QRMath.EXP_TABLE[n];\n  },\n  EXP_TABLE: new Array(256),\n  LOG_TABLE: new Array(256)\n};\nfor (var i = 0; i < 8; i++) {\n  QRMath.EXP_TABLE[i] = 1 << i;\n}\nfor (var i = 8; i < 256; i++) {\n  QRMath.EXP_TABLE[i] =\n    QRMath.EXP_TABLE[i - 4] ^\n    QRMath.EXP_TABLE[i - 5] ^\n    QRMath.EXP_TABLE[i - 6] ^\n    QRMath.EXP_TABLE[i - 8];\n}\nfor (var i = 0; i < 255; i++) {\n  QRMath.LOG_TABLE[QRMath.EXP_TABLE[i]] = i;\n}\n\nfunction QRPolynomial(num, shift) {\n  if (num.length == undefined) {\n    throw new Error(num.length + \"/\" + shift);\n  }\n  var offset = 0;\n  while (offset < num.length && num[offset] == 0) {\n    offset++;\n  }\n  this.num = new Array(num.length - offset + shift);\n  for (var i = 0; i < num.length - offset; i++) {\n    this.num[i] = num[i + offset];\n  }\n}\n\nQRPolynomial.prototype = {\n  get: function(index) {\n    return this.num[index];\n  },\n  getLength: function() {\n    return this.num.length;\n  },\n  multiply: function(e) {\n    var num = new Array(this.getLength() + e.getLength() - 1);\n    for (var i = 0; i < this.getLength(); i++) {\n      for (var j = 0; j < e.getLength(); j++) {\n        num[i + j] ^= QRMath.gexp(\n          QRMath.glog(this.get(i)) + QRMath.glog(e.get(j))\n        );\n      }\n    }\n    return new QRPolynomial(num, 0);\n  },\n  mod: function(e) {\n    if (this.getLength() - e.getLength() < 0) {\n      return this;\n    }\n    var ratio = QRMath.glog(this.get(0)) - QRMath.glog(e.get(0));\n    var num = new Array(this.getLength());\n    for (var i = 0; i < this.getLength(); i++) {\n      num[i] = this.get(i);\n    }\n    for (var i = 0; i < e.getLength(); i++) {\n      num[i] ^= QRMath.gexp(QRMath.glog(e.get(i)) + ratio);\n    }\n    return new QRPolynomial(num, 0).mod(e);\n  }\n};\n\nfunction QRRSBlock(totalCount, dataCount) {\n  this.totalCount = totalCount;\n  this.dataCount = dataCount;\n}\n\nQRRSBlock.RS_BLOCK_TABLE = [\n  [1, 26, 19],\n  [1, 26, 16],\n  [1, 26, 13],\n  [1, 26, 9],\n  [1, 44, 34],\n  [1, 44, 28],\n  [1, 44, 22],\n  [1, 44, 16],\n  [1, 70, 55],\n  [1, 70, 44],\n  [2, 35, 17],\n  [2, 35, 13],\n  [1, 100, 80],\n  [2, 50, 32],\n  [2, 50, 24],\n  [4, 25, 9],\n  [1, 134, 108],\n  [2, 67, 43],\n  [2, 33, 15, 2, 34, 16],\n  [2, 33, 11, 2, 34, 12],\n  [2, 86, 68],\n  [4, 43, 27],\n  [4, 43, 19],\n  [4, 43, 15],\n  [2, 98, 78],\n  [4, 49, 31],\n  [2, 32, 14, 4, 33, 15],\n  [4, 39, 13, 1, 40, 14],\n  [2, 121, 97],\n  [2, 60, 38, 2, 61, 39],\n  [4, 40, 18, 2, 41, 19],\n  [4, 40, 14, 2, 41, 15],\n  [2, 146, 116],\n  [3, 58, 36, 2, 59, 37],\n  [4, 36, 16, 4, 37, 17],\n  [4, 36, 12, 4, 37, 13],\n  [2, 86, 68, 2, 87, 69],\n  [4, 69, 43, 1, 70, 44],\n  [6, 43, 19, 2, 44, 20],\n  [6, 43, 15, 2, 44, 16],\n  [4, 101, 81],\n  [1, 80, 50, 4, 81, 51],\n  [4, 50, 22, 4, 51, 23],\n  [3, 36, 12, 8, 37, 13],\n  [2, 116, 92, 2, 117, 93],\n  [6, 58, 36, 2, 59, 37],\n  [4, 46, 20, 6, 47, 21],\n  [7, 42, 14, 4, 43, 15],\n  [4, 133, 107],\n  [8, 59, 37, 1, 60, 38],\n  [8, 44, 20, 4, 45, 21],\n  [12, 33, 11, 4, 34, 12],\n  [3, 145, 115, 1, 146, 116],\n  [4, 64, 40, 5, 65, 41],\n  [11, 36, 16, 5, 37, 17],\n  [11, 36, 12, 5, 37, 13],\n  [5, 109, 87, 1, 110, 88],\n  [5, 65, 41, 5, 66, 42],\n  [5, 54, 24, 7, 55, 25],\n  [11, 36, 12],\n  [5, 122, 98, 1, 123, 99],\n  [7, 73, 45, 3, 74, 46],\n  [15, 43, 19, 2, 44, 20],\n  [3, 45, 15, 13, 46, 16],\n  [1, 135, 107, 5, 136, 108],\n  [10, 74, 46, 1, 75, 47],\n  [1, 50, 22, 15, 51, 23],\n  [2, 42, 14, 17, 43, 15],\n  [5, 150, 120, 1, 151, 121],\n  [9, 69, 43, 4, 70, 44],\n  [17, 50, 22, 1, 51, 23],\n  [2, 42, 14, 19, 43, 15],\n  [3, 141, 113, 4, 142, 114],\n  [3, 70, 44, 11, 71, 45],\n  [17, 47, 21, 4, 48, 22],\n  [9, 39, 13, 16, 40, 14],\n  [3, 135, 107, 5, 136, 108],\n  [3, 67, 41, 13, 68, 42],\n  [15, 54, 24, 5, 55, 25],\n  [15, 43, 15, 10, 44, 16],\n  [4, 144, 116, 4, 145, 117],\n  [17, 68, 42],\n  [17, 50, 22, 6, 51, 23],\n  [19, 46, 16, 6, 47, 17],\n  [2, 139, 111, 7, 140, 112],\n  [17, 74, 46],\n  [7, 54, 24, 16, 55, 25],\n  [34, 37, 13],\n  [4, 151, 121, 5, 152, 122],\n  [4, 75, 47, 14, 76, 48],\n  [11, 54, 24, 14, 55, 25],\n  [16, 45, 15, 14, 46, 16],\n  [6, 147, 117, 4, 148, 118],\n  [6, 73, 45, 14, 74, 46],\n  [11, 54, 24, 16, 55, 25],\n  [30, 46, 16, 2, 47, 17],\n  [8, 132, 106, 4, 133, 107],\n  [8, 75, 47, 13, 76, 48],\n  [7, 54, 24, 22, 55, 25],\n  [22, 45, 15, 13, 46, 16],\n  [10, 142, 114, 2, 143, 115],\n  [19, 74, 46, 4, 75, 47],\n  [28, 50, 22, 6, 51, 23],\n  [33, 46, 16, 4, 47, 17],\n  [8, 152, 122, 4, 153, 123],\n  [22, 73, 45, 3, 74, 46],\n  [8, 53, 23, 26, 54, 24],\n  [12, 45, 15, 28, 46, 16],\n  [3, 147, 117, 10, 148, 118],\n  [3, 73, 45, 23, 74, 46],\n  [4, 54, 24, 31, 55, 25],\n  [11, 45, 15, 31, 46, 16],\n  [7, 146, 116, 7, 147, 117],\n  [21, 73, 45, 7, 74, 46],\n  [1, 53, 23, 37, 54, 24],\n  [19, 45, 15, 26, 46, 16],\n  [5, 145, 115, 10, 146, 116],\n  [19, 75, 47, 10, 76, 48],\n  [15, 54, 24, 25, 55, 25],\n  [23, 45, 15, 25, 46, 16],\n  [13, 145, 115, 3, 146, 116],\n  [2, 74, 46, 29, 75, 47],\n  [42, 54, 24, 1, 55, 25],\n  [23, 45, 15, 28, 46, 16],\n  [17, 145, 115],\n  [10, 74, 46, 23, 75, 47],\n  [10, 54, 24, 35, 55, 25],\n  [19, 45, 15, 35, 46, 16],\n  [17, 145, 115, 1, 146, 116],\n  [14, 74, 46, 21, 75, 47],\n  [29, 54, 24, 19, 55, 25],\n  [11, 45, 15, 46, 46, 16],\n  [13, 145, 115, 6, 146, 116],\n  [14, 74, 46, 23, 75, 47],\n  [44, 54, 24, 7, 55, 25],\n  [59, 46, 16, 1, 47, 17],\n  [12, 151, 121, 7, 152, 122],\n  [12, 75, 47, 26, 76, 48],\n  [39, 54, 24, 14, 55, 25],\n  [22, 45, 15, 41, 46, 16],\n  [6, 151, 121, 14, 152, 122],\n  [6, 75, 47, 34, 76, 48],\n  [46, 54, 24, 10, 55, 25],\n  [2, 45, 15, 64, 46, 16],\n  [17, 152, 122, 4, 153, 123],\n  [29, 74, 46, 14, 75, 47],\n  [49, 54, 24, 10, 55, 25],\n  [24, 45, 15, 46, 46, 16],\n  [4, 152, 122, 18, 153, 123],\n  [13, 74, 46, 32, 75, 47],\n  [48, 54, 24, 14, 55, 25],\n  [42, 45, 15, 32, 46, 16],\n  [20, 147, 117, 4, 148, 118],\n  [40, 75, 47, 7, 76, 48],\n  [43, 54, 24, 22, 55, 25],\n  [10, 45, 15, 67, 46, 16],\n  [19, 148, 118, 6, 149, 119],\n  [18, 75, 47, 31, 76, 48],\n  [34, 54, 24, 34, 55, 25],\n  [20, 45, 15, 61, 46, 16]\n];\nQRRSBlock.getRSBlocks = function(typeNumber, errorCorrectLevel) {\n  var rsBlock = QRRSBlock.getRsBlockTable(typeNumber, errorCorrectLevel);\n  if (rsBlock == undefined) {\n    throw new Error(\n      \"bad rs block @ typeNumber:\" +\n        typeNumber +\n        \"/errorCorrectLevel:\" +\n        errorCorrectLevel\n    );\n  }\n  var length = rsBlock.length / 3;\n  var list = [];\n  for (var i = 0; i < length; i++) {\n    var count = rsBlock[i * 3 + 0];\n    var totalCount = rsBlock[i * 3 + 1];\n    var dataCount = rsBlock[i * 3 + 2];\n    for (var j = 0; j < count; j++) {\n      list.push(new QRRSBlock(totalCount, dataCount));\n    }\n  }\n  return list;\n};\nQRRSBlock.getRsBlockTable = function(typeNumber, errorCorrectLevel) {\n  switch (errorCorrectLevel) {\n    case QRErrorCorrectLevel.L:\n      return QRRSBlock.RS_BLOCK_TABLE[(typeNumber - 1) * 4 + 0];\n    case QRErrorCorrectLevel.M:\n      return QRRSBlock.RS_BLOCK_TABLE[(typeNumber - 1) * 4 + 1];\n    case QRErrorCorrectLevel.Q:\n      return QRRSBlock.RS_BLOCK_TABLE[(typeNumber - 1) * 4 + 2];\n    case QRErrorCorrectLevel.H:\n      return QRRSBlock.RS_BLOCK_TABLE[(typeNumber - 1) * 4 + 3];\n    default:\n      return undefined;\n  }\n};\n\nfunction QRBitBuffer() {\n  this.buffer = [];\n  this.length = 0;\n}\n\nQRBitBuffer.prototype = {\n  get: function(index) {\n    var bufIndex = Math.floor(index / 8);\n    return ((this.buffer[bufIndex] >>> (7 - (index % 8))) & 1) == 1;\n  },\n  put: function(num, length) {\n    for (var i = 0; i < length; i++) {\n      this.putBit(((num >>> (length - i - 1)) & 1) == 1);\n    }\n  },\n  getLengthInBits: function() {\n    return this.length;\n  },\n  putBit: function(bit) {\n    var bufIndex = Math.floor(this.length / 8);\n    if (this.buffer.length <= bufIndex) {\n      this.buffer.push(0);\n    }\n    if (bit) {\n      this.buffer[bufIndex] |= 0x80 >>> this.length % 8;\n    }\n    this.length++;\n  }\n};\nvar QRCodeLimitLength = [\n  [17, 14, 11, 7],\n  [32, 26, 20, 14],\n  [53, 42, 32, 24],\n  [78, 62, 46, 34],\n  [106, 84, 60, 44],\n  [134, 106, 74, 58],\n  [154, 122, 86, 64],\n  [192, 152, 108, 84],\n  [230, 180, 130, 98],\n  [271, 213, 151, 119],\n  [321, 251, 177, 137],\n  [367, 287, 203, 155],\n  [425, 331, 241, 177],\n  [458, 362, 258, 194],\n  [520, 412, 292, 220],\n  [586, 450, 322, 250],\n  [644, 504, 364, 280],\n  [718, 560, 394, 310],\n  [792, 624, 442, 338],\n  [858, 666, 482, 382],\n  [929, 711, 509, 403],\n  [1003, 779, 565, 439],\n  [1091, 857, 611, 461],\n  [1171, 911, 661, 511],\n  [1273, 997, 715, 535],\n  [1367, 1059, 751, 593],\n  [1465, 1125, 805, 625],\n  [1528, 1190, 868, 658],\n  [1628, 1264, 908, 698],\n  [1732, 1370, 982, 742],\n  [1840, 1452, 1030, 790],\n  [1952, 1538, 1112, 842],\n  [2068, 1628, 1168, 898],\n  [2188, 1722, 1228, 958],\n  [2303, 1809, 1283, 983],\n  [2431, 1911, 1351, 1051],\n  [2563, 1989, 1423, 1093],\n  [2699, 2099, 1499, 1139],\n  [2809, 2213, 1579, 1219],\n  [2953, 2331, 1663, 1273]\n];\n\n// END OF QR CODE CORE LIBRARY DEFINITION\n\nvar Drawing = (function() {\n  // Drawing in Canvas\n  function _onMakeImage() {\n    this._elImage.src = this._elCanvas.toDataURL(\"image/png\");\n    this._elImage.style.display = \"block\";\n    this._elCanvas.style.display = \"none\";\n  }\n\n  function _safeSetDataURI(fSuccess, fFail) {\n    var self = this;\n    self._fFail = fFail;\n    self._fSuccess = fSuccess;\n\n    // Check it just once\n    if (self._bSupportDataURI === null) {\n      var el = document.createElement(\"img\");\n      var fOnError = function() {\n        self._bSupportDataURI = false;\n\n        if (self._fFail) {\n          self._fFail.call(self);\n        }\n      };\n      var fOnSuccess = function() {\n        self._bSupportDataURI = true;\n\n        if (self._fSuccess) {\n          self._fSuccess.call(self);\n        }\n      };\n\n      el.onabort = fOnError;\n      el.onerror = fOnError;\n      el.onload = fOnSuccess;\n      el.src =\n        \"data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg==\"; // the Image contains 1px data.\n      return;\n    } else if (self._bSupportDataURI === true && self._fSuccess) {\n      self._fSuccess.call(self);\n    } else if (self._bSupportDataURI === false && self._fFail) {\n      self._fFail.call(self);\n    }\n  }\n\n  var Drawing = function(htOption) {\n    this._bIsPainted = false;\n\n    this._htOption = htOption;\n    this._elCanvas = document.createElement(\"canvas\");\n    this._elCanvas.width = htOption.size;\n    this._elCanvas.height = htOption.size;\n    this._oContext = this._elCanvas.getContext(\"2d\");\n    this._bIsPainted = false;\n    this._elImage = document.createElement(\"img\");\n    this._elImage.alt = \"Scan me!\";\n    this._elImage.style.display = \"none\";\n    this._bSupportDataURI = null;\n    this._callback = htOption.callback;\n    this._bindElement = htOption.bindElement;\n  };\n\n  Drawing.prototype.draw = function(oQRCode) {\n    var _elImage = this._elImage;\n    var _tCanvas = document.createElement(\"canvas\");\n    var _oContext = _tCanvas.getContext(\"2d\");\n    // var _oContext = this._oContext;\n    var _htOption = this._htOption;\n\n    var nCount = oQRCode.getModuleCount();\n    var rawSize = _htOption.size;\n    var rawMargin = _htOption.margin;\n\n    if (rawMargin < 0 || rawMargin * 2 >= rawSize) {\n      rawMargin = 0;\n    }\n\n    var margin = Math.ceil(rawMargin);\n\n    var rawViewportSize = rawSize - 2 * rawMargin;\n\n    var whiteMargin = _htOption.whiteMargin;\n    var backgroundDimming = _htOption.backgroundDimming;\n    var nSize = Math.ceil(rawViewportSize / nCount);\n    var viewportSize = nSize * nCount;\n    var size = viewportSize + 2 * margin;\n\n    var gifBackground = undefined;\n    var gifFrames = undefined;\n\n    _tCanvas.width = size;\n    _tCanvas.height = size;\n\n    var dotScale = _htOption.dotScale;\n    _elImage.style.display = \"none\";\n    this.clear();\n\n    if (dotScale <= 0 || dotScale > 1) {\n      throw new Error(\"Scale should be in range (0, 1).\");\n    }\n\n    // Leave room for margin\n    _oContext.save();\n    _oContext.translate(margin, margin);\n\n    var _bkgCanvas = document.createElement(\"canvas\");\n    _bkgCanvas.width = size;\n    _bkgCanvas.height = size;\n    var _bContext = _bkgCanvas.getContext(\"2d\");\n\n    var _maskCanvas = undefined;\n    var _mContext = undefined;\n\n    if (_htOption.gifBackground !== undefined) {\n      var gif = new GIF(_htOption.gifBackground);\n\n      if (!gif.raw.hasImages) {\n        throw new Error(\"An invalid gif has been selected as the background.\");\n      }\n      gifBackground = gif;\n      gifFrames = gif.decompressFrames(true);\n      // console.log(gifFrames);\n      if (_htOption.autoColor) {\n        var r = 0,\n          g = 0,\n          b = 0;\n        var count = 0;\n        for (var i = 0; i < gifFrames[0].colorTable.length; i++) {\n          var c = gifFrames[0].colorTable[i];\n          if (c[0] > 200 || c[1] > 200 || c[2] > 200) continue;\n          if (c[0] === 0 && c[1] === 0 && c[2] === 0) continue;\n          count++;\n          r += c[0];\n          g += c[1];\n          b += c[2];\n        }\n\n        r = ~~(r / count);\n        g = ~~(g / count);\n        b = ~~(b / count);\n        // console.log(\"rgb(\" + r + \", \" + g + \", \" + b + \")\");\n        _htOption.colorDark = \"rgb(\" + r + \", \" + g + \", \" + b + \")\";\n      }\n    } else if (_htOption.backgroundImage !== undefined) {\n      if (_htOption.autoColor) {\n        var avgRGB = getAverageRGB(_htOption.backgroundImage);\n        _htOption.colorDark =\n          \"rgb(\" + avgRGB.r + \", \" + avgRGB.g + \", \" + avgRGB.b + \")\";\n      }\n\n      if (_htOption.maskedDots) {\n        _maskCanvas = document.createElement(\"canvas\");\n        _maskCanvas.width = size;\n        _maskCanvas.height = size;\n        _mContext = _maskCanvas.getContext(\"2d\");\n        /*\n                     _mContext.drawImage(_htOption.backgroundImage,\n                     0, 0, _htOption.backgroundImage.width, _htOption.backgroundImage.height,\n                     whiteMargin ? 0 : -margin, whiteMargin ? 0 : -margin, whiteMargin ? viewportSize : size, whiteMargin ? viewportSize : size);\n                     */\n        _mContext.drawImage(\n          _htOption.backgroundImage,\n          0,\n          0,\n          _htOption.backgroundImage.width,\n          _htOption.backgroundImage.height,\n          0,\n          0,\n          size,\n          size\n        );\n\n        _bContext.rect(0, 0, size, size);\n        _bContext.fillStyle = \"#ffffff\";\n        _bContext.fill();\n      } else {\n        /*\n                     _bContext.drawImage(_htOption.backgroundImage,\n                     0, 0, _htOption.backgroundImage.width, _htOption.backgroundImage.height,\n                     whiteMargin ? 0 : -margin, whiteMargin ? 0 : -margin, whiteMargin ? viewportSize : size, whiteMargin ? viewportSize : size);\n                     */\n        _bContext.drawImage(\n          _htOption.backgroundImage,\n          0,\n          0,\n          _htOption.backgroundImage.width,\n          _htOption.backgroundImage.height,\n          0,\n          0,\n          size,\n          size\n        );\n        _bContext.rect(0, 0, size, size);\n        _bContext.fillStyle = backgroundDimming;\n        _bContext.fill();\n      }\n    } else {\n      _bContext.rect(0, 0, size, size);\n      _bContext.fillStyle = _htOption.backgroundColor;\n      _bContext.fill();\n    }\n\n    if (_htOption.binarize) {\n      _htOption.colorDark = \"#000000\";\n      _htOption.colorLight = \"#FFFFFF\";\n    }\n\n    var agnPatternCenter = QRUtil.getPatternPosition(oQRCode.typeNumber);\n    var xyOffset = (1 - dotScale) * 0.5;\n    for (var row = 0; row < nCount; row++) {\n      for (var col = 0; col < nCount; col++) {\n        var bIsDark = oQRCode.isDark(row, col);\n\n        // var isBlkPosCtr = ((col < 8 && (row < 8 || row >= nCount - 8)) || (col >= nCount - 8 && row < 8) || (col < nCount - 4 && col >= nCount - 4 - 5 && row < nCount - 4 && row >= nCount - 4 - 5));\n        var isBlkPosCtr =\n          (col < 8 && (row < 8 || row >= nCount - 8)) ||\n          (col >= nCount - 8 && row < 8);\n        var isBlkPos =\n          (col < 7 && (row < 7 || row >= nCount - 7)) ||\n          (col >= nCount - 7 && row < 7);\n        var bProtected = row === 6 || col === 6 || isBlkPosCtr;\n\n        for (var i = 0; i < agnPatternCenter.length - 1; i++) {\n          bProtected =\n            bProtected ||\n            (row >= agnPatternCenter[i] - 2 &&\n              row <= agnPatternCenter[i] + 2 &&\n              col >= agnPatternCenter[i] - 2 &&\n              col <= agnPatternCenter[i] + 2);\n        }\n\n        var nLeft = col * nSize + (bProtected ? 0 : xyOffset * nSize);\n        var nTop = row * nSize + (bProtected ? 0 : xyOffset * nSize);\n        _oContext.strokeStyle = bIsDark\n          ? _htOption.colorDark\n          : _htOption.colorLight;\n        _oContext.lineWidth = 0.5;\n        _oContext.fillStyle = bIsDark\n          ? _htOption.colorDark\n          : _htOption.colorLight; //_htOption.colorLight;\n        if (agnPatternCenter.length === 0) {\n          // if align pattern list is empty, then it means that we don't need to leave room for the align patterns\n          if (!bProtected) {\n            _fillRectWithMask(\n              _oContext,\n              nLeft,\n              nTop,\n              (bProtected ? (isBlkPosCtr ? 1 : 1) : dotScale) * nSize,\n              (bProtected ? (isBlkPosCtr ? 1 : 1) : dotScale) * nSize,\n              _maskCanvas,\n              bIsDark\n            );\n          }\n        } else {\n          var inAgnRange =\n            col < nCount - 4 &&\n            col >= nCount - 4 - 5 &&\n            row < nCount - 4 &&\n            row >= nCount - 4 - 5;\n          if (!bProtected && !inAgnRange)\n            _fillRectWithMask(\n              _oContext,\n              nLeft,\n              nTop,\n              (bProtected ? (isBlkPosCtr ? 1 : 1) : dotScale) * nSize,\n              (bProtected ? (isBlkPosCtr ? 1 : 1) : dotScale) * nSize,\n              _maskCanvas,\n              bIsDark\n            );\n        }\n      }\n    }\n\n    // Draw POSITION protectors\n    var protectorStyle = _htOption.colorLight;\n    _oContext.fillStyle = protectorStyle;\n    _oContext.fillRect(0, 0, 8 * nSize, 8 * nSize);\n    _oContext.fillRect(0, (nCount - 8) * nSize, 8 * nSize, 8 * nSize);\n    _oContext.fillRect((nCount - 8) * nSize, 0, 8 * nSize, 8 * nSize);\n    _oContext.fillRect(8 * nSize, 6 * nSize, (nCount - 8 - 8) * nSize, nSize);\n    _oContext.fillRect(6 * nSize, 8 * nSize, nSize, (nCount - 8 - 8) * nSize);\n\n    // Draw ALIGN protectors\n    var edgeCenter = agnPatternCenter[agnPatternCenter.length - 1];\n    for (var i = 0; i < agnPatternCenter.length; i++) {\n      for (var j = 0; j < agnPatternCenter.length; j++) {\n        var agnX = agnPatternCenter[j];\n        var agnY = agnPatternCenter[i];\n        if (agnX === 6 && (agnY === 6 || agnY === edgeCenter)) {\n          continue;\n        } else if (agnY === 6 && (agnX === 6 || agnX === edgeCenter)) {\n          continue;\n        } else if (\n          agnX !== 6 &&\n          agnX !== edgeCenter &&\n          agnY !== 6 &&\n          agnY !== edgeCenter\n        ) {\n          _drawAlignProtector(_oContext, agnX, agnY, nSize, nSize);\n        } else {\n          _drawAlignProtector(_oContext, agnX, agnY, nSize, nSize);\n        }\n        // console.log(\"agnX=\" + agnX + \", agnY=\" + agnX);\n      }\n    }\n\n    // Draw POSITION patterns\n    _oContext.fillStyle = _htOption.colorDark;\n    _oContext.fillRect(0, 0, 7 * nSize, nSize);\n    _oContext.fillRect((nCount - 7) * nSize, 0, 7 * nSize, nSize);\n    _oContext.fillRect(0, 6 * nSize, 7 * nSize, nSize);\n    _oContext.fillRect((nCount - 7) * nSize, 6 * nSize, 7 * nSize, nSize);\n    _oContext.fillRect(0, (nCount - 7) * nSize, 7 * nSize, nSize);\n    _oContext.fillRect(0, (nCount - 7 + 6) * nSize, 7 * nSize, nSize);\n    _oContext.fillRect(0, 0, nSize, 7 * nSize);\n    _oContext.fillRect(6 * nSize, 0, nSize, 7 * nSize);\n    _oContext.fillRect((nCount - 7) * nSize, 0, nSize, 7 * nSize);\n    _oContext.fillRect((nCount - 7 + 6) * nSize, 0, nSize, 7 * nSize);\n    _oContext.fillRect(0, (nCount - 7) * nSize, nSize, 7 * nSize);\n    _oContext.fillRect(6 * nSize, (nCount - 7) * nSize, nSize, 7 * nSize);\n\n    _oContext.fillRect(2 * nSize, 2 * nSize, 3 * nSize, 3 * nSize);\n    _oContext.fillRect(\n      (nCount - 7 + 2) * nSize,\n      2 * nSize,\n      3 * nSize,\n      3 * nSize\n    );\n    _oContext.fillRect(\n      2 * nSize,\n      (nCount - 7 + 2) * nSize,\n      3 * nSize,\n      3 * nSize\n    );\n\n    for (var i = 0; i < nCount - 8; i += 2) {\n      _oContext.fillRect((8 + i) * nSize, 6 * nSize, nSize, nSize);\n      _oContext.fillRect(6 * nSize, (8 + i) * nSize, nSize, nSize);\n    }\n    for (var i = 0; i < agnPatternCenter.length; i++) {\n      for (var j = 0; j < agnPatternCenter.length; j++) {\n        var agnX = agnPatternCenter[j];\n        var agnY = agnPatternCenter[i];\n        if (agnX === 6 && (agnY === 6 || agnY === edgeCenter)) {\n          continue;\n        } else if (agnY === 6 && (agnX === 6 || agnX === edgeCenter)) {\n          continue;\n        } else if (\n          agnX !== 6 &&\n          agnX !== edgeCenter &&\n          agnY !== 6 &&\n          agnY !== edgeCenter\n        ) {\n          _oContext.fillStyle =  _htOption.colorLight;\n          _drawAlign(_oContext, agnX, agnY, nSize, nSize);\n        } else {\n          _oContext.fillStyle = _htOption.colorDark;\n          _drawAlign(_oContext, agnX, agnY, nSize, nSize);\n        }\n      }\n    }\n\n    // Fill the margin\n    if (whiteMargin) {\n      _oContext.fillStyle = _htOption.backgroundColor;\n      _oContext.fillRect(-margin, -margin, size, margin);\n      _oContext.fillRect(-margin, viewportSize, size, margin);\n      _oContext.fillRect(viewportSize, -margin, margin, size);\n      _oContext.fillRect(-margin, -margin, margin, size);\n    }\n\n    if (_htOption.logoImage !== undefined) {\n      var logoScale = _htOption.logoScale;\n      var logoMargin = _htOption.logoMargin;\n      var logoCornerRadius = _htOption.logoCornerRadius;\n      if (logoScale <= 0 || logoScale >= 1.0) {\n        logoScale = 0.2;\n      }\n      if (logoMargin < 0) {\n        logoMargin = 0;\n      }\n      if (logoCornerRadius < 0) {\n        logoCornerRadius = 0;\n      }\n\n      _oContext.restore();\n\n      var logoSize = viewportSize * logoScale;\n      var x = 0.5 * (size - logoSize);\n      var y = x;\n\n      _oContext.fillStyle =  _htOption.logoBackgroundColor;\n      _oContext.save();\n      _prepareRoundedCornerClip(\n        _oContext,\n        x - logoMargin,\n        y - logoMargin,\n        logoSize + 2 * logoMargin,\n        logoSize + 2 * logoMargin,\n        logoCornerRadius\n      );\n      _oContext.clip();\n      _oContext.fill();\n      _oContext.restore();\n\n      _oContext.save();\n      _prepareRoundedCornerClip(\n        _oContext,\n        x,\n        y,\n        logoSize,\n        logoSize,\n        logoCornerRadius\n      );\n      _oContext.clip();\n      _oContext.drawImage(_htOption.logoImage, x, y, logoSize, logoSize);\n      _oContext.restore();\n    }\n\n    if (gifBackground === undefined) {\n      // Swap and merge the foreground and the background\n      _bContext.drawImage(_tCanvas, 0, 0, size, size);\n      _oContext.drawImage(_bkgCanvas, -margin, -margin, size, size);\n\n      // Binarize the final image\n      if (_htOption.binarize) {\n        var pixels = _oContext.getImageData(0, 0, size, size);\n        var threshold = 128;\n        if (\n          parseInt(_htOption.binarizeThreshold) > 0 &&\n          parseInt(_htOption.binarizeThreshold) < 255\n        ) {\n          threshold = parseInt(_htOption.binarizeThreshold);\n        }\n        for (var i = 0; i < pixels.data.length; i += 4) {\n          // rgb in [0, 255]\n          var R = pixels.data[i];\n          var G = pixels.data[i + 1];\n          var B = pixels.data[i + 2];\n          var sum = _greyscale(R, G, B);\n          if (sum > threshold) {\n            pixels.data[i] = 255;\n            pixels.data[i + 1] = 255;\n            pixels.data[i + 2] = 255;\n          } else {\n            pixels.data[i] = 0;\n            pixels.data[i + 1] = 0;\n            pixels.data[i + 2] = 0;\n          }\n        }\n        _oContext.putImageData(pixels, 0, 0);\n      }\n\n      // Scale the final image\n      var _fCanvas = document.createElement(\"canvas\");\n      var _fContext = _fCanvas.getContext(\"2d\");\n      _fCanvas.width = rawSize;\n      _fCanvas.height = rawSize;\n      _fContext.drawImage(_tCanvas, 0, 0, rawSize, rawSize);\n      this._elCanvas = _fCanvas;\n\n      // Painting work completed\n      this._bIsPainted = true;\n      if (this._callback !== undefined) {\n        this._callback(this._elCanvas.toDataURL());\n      }\n      if (this._bindElement !== undefined) {\n        try {\n          var el = document.getElementById(this._bindElement);\n          if (el.nodeName === \"IMG\") {\n            el.src = this._elCanvas.toDataURL();\n          } else {\n            var elStyle = el.style;\n            elStyle[\"background-image\"] =\n              \"url(\" + this._elCanvas.toDataURL() + \")\";\n            elStyle[\"background-size\"] = \"contain\";\n            elStyle[\"background-repeat\"] = \"no-repeat\";\n          }\n        } catch (e) {\n          console.error(e);\n        }\n      }\n    } else {\n      var gifOutput;\n\n      // Reuse in order to apply the patch\n      var rawBkg;\n      var hRawBkg;\n\n      var patchCanvas = document.createElement(\"canvas\");\n      var hPatchCanvas = patchCanvas.getContext(\"2d\");\n      var patchData;\n\n      gifFrames.forEach(function(frame) {\n        // console.log(frame);\n        if (gifOutput === undefined) {\n          gifOutput = new GIFE({\n            workers: 4,\n            quality: 10,\n            width: rawSize,\n            height: rawSize\n          });\n        }\n\n        if (rawBkg === undefined) {\n          rawBkg = document.createElement(\"canvas\");\n          hRawBkg = rawBkg.getContext(\"2d\");\n          rawBkg.width = frame.dims.width;\n          rawBkg.height = frame.dims.height;\n          hRawBkg.rect(0, 0, rawBkg.width, rawBkg.height);\n          hRawBkg.fillStyle = \"#ffffff\";\n          hRawBkg.fill();\n          // console.log(rawBkg);\n        }\n\n        if (\n          !patchData ||\n          frame.dims.width !== patchCanvas.width ||\n          frame.dims.height !== patchCanvas.height\n        ) {\n          patchCanvas.width = frame.dims.width;\n          patchCanvas.height = frame.dims.height;\n          patchData = hPatchCanvas.createImageData(\n            frame.dims.width,\n            frame.dims.height\n          );\n        }\n\n        patchData.data.set(frame.patch);\n        hPatchCanvas.putImageData(patchData, 0, 0);\n\n        hRawBkg.drawImage(patchCanvas, frame.dims.left, frame.dims.top);\n\n        var stdCanvas = document.createElement(\"canvas\");\n        stdCanvas.width = size;\n        stdCanvas.height = size;\n        var hStdCanvas = stdCanvas.getContext(\"2d\");\n\n        hStdCanvas.drawImage(rawBkg, 0, 0, size, size);\n        hStdCanvas.drawImage(_tCanvas, 0, 0, size, size);\n\n        // Scale the final image\n        var _fCanvas = document.createElement(\"canvas\");\n        var _fContext = _fCanvas.getContext(\"2d\");\n        _fCanvas.width = rawSize;\n        _fCanvas.height = rawSize;\n        _fContext.drawImage(stdCanvas, 0, 0, rawSize, rawSize);\n        // console.log(_fContext);\n        gifOutput.addFrame(_fContext, { copy: true, delay: frame.delay });\n      });\n\n      if (gifOutput === undefined) {\n        throw new Error(\"No frames.\");\n      }\n      var ref = this;\n      gifOutput.on(\"finished\", function(blob) {\n        // Painting work completed\n        var r = new FileReader();\n        r.onload = function(e) {\n          var data = e.target.result;\n          ref._bIsPainted = true;\n          if (ref._callback !== undefined) {\n            ref._callback(data);\n          }\n          if (ref._bindElement !== undefined) {\n            try {\n              var el = document.getElementById(ref._bindElement);\n              if (el.nodeName === \"IMG\") {\n                el.src = data;\n              } else {\n                var elStyle = el.style;\n                elStyle[\"background-image\"] = \"url(\" + data + \")\";\n                elStyle[\"background-size\"] = \"contain\";\n                elStyle[\"background-repeat\"] = \"no-repeat\";\n              }\n            } catch (e) {\n              console.error(e);\n            }\n          }\n        };\n        r.readAsDataURL(blob);\n      });\n\n      gifOutput.render();\n    }\n  };\n\n  Drawing.prototype.makeImage = function() {\n    if (this._bIsPainted) {\n      _safeSetDataURI.call(this, _onMakeImage);\n    }\n  };\n\n  Drawing.prototype.isPainted = function() {\n    return this._bIsPainted;\n  };\n\n  Drawing.prototype.clear = function() {\n    this._oContext.clearRect(0, 0, this._elCanvas.width, this._elCanvas.height);\n    this._bIsPainted = false;\n  };\n\n  Drawing.prototype.round = function(nNumber) {\n    if (!nNumber) {\n      return nNumber;\n    }\n\n    return Math.floor(nNumber * 1000) / 1000;\n  };\n\n  return Drawing;\n})();\n\n// Utilities and useful helpers\n\nfunction _getUTF8Length(sText) {\n  var replacedText = encodeURI(sText)\n    .toString()\n    .replace(/\\%[0-9a-fA-F]{2}/g, \"a\");\n  return replacedText.length + (replacedText.length != sText ? 3 : 0);\n}\n\nfunction _prepareRoundedCornerClip(ctx, x, y, w, h, r) {\n  ctx.beginPath();\n  ctx.moveTo(x, y);\n  ctx.arcTo(x + w, y, x + w, y + h, r);\n  ctx.arcTo(x + w, y + h, x, y + h, r);\n  ctx.arcTo(x, y + h, x, y, r);\n  ctx.arcTo(x, y, x + w, y, r);\n  ctx.closePath();\n}\n\nfunction _setPixel(imageData, p, r, g, b, a) {\n  var index = p * 4;\n  imageData.data[index + 0] = r;\n  imageData.data[index + 1] = g;\n  imageData.data[index + 2] = b;\n  imageData.data[index + 3] = a;\n}\n\nfunction _greyscale(r, g, b) {\n  return 0.3 * r + 0.59 * b + 0.11 * b;\n}\n\nfunction _fillRectWithMask(canvas, x, y, w, h, maskSrc, bDark) {\n  //console.log(\"maskSrc=\" + maskSrc);\n  if (maskSrc === undefined) {\n    canvas.fillRect(x, y, w, h);\n  } else {\n    canvas.drawImage(maskSrc, x, y, w, h, x, y, w, h);\n    var fill_ = canvas.fillStyle;\n    canvas.fillStyle = bDark ? \"rgba(0, 0, 0, .5)\" : \"rgba(255, 255, 255, .7)\";\n    canvas.fillRect(x, y, w, h);\n    canvas.fillStyle = fill_;\n  }\n}\n\nfunction _drawAlignProtector(context, centerX, centerY, nWidth, nHeight) {\n  context.clearRect(\n    (centerX - 2) * nWidth,\n    (centerY - 2) * nHeight,\n    5 * nWidth,\n    5 * nHeight\n  );\n  context.fillRect(\n    (centerX - 2) * nWidth,\n    (centerY - 2) * nHeight,\n    5 * nWidth,\n    5 * nHeight\n  );\n}\n\nfunction _drawAlign(context, centerX, centerY, nWidth, nHeight) {\n  context.fillRect(\n    (centerX - 2) * nWidth,\n    (centerY - 2) * nHeight,\n    nWidth,\n    4 * nHeight\n  );\n  context.fillRect(\n    (centerX + 2) * nWidth,\n    (centerY - 2 + 1) * nHeight,\n    nWidth,\n    4 * nHeight\n  );\n  context.fillRect(\n    (centerX - 2 + 1) * nWidth,\n    (centerY - 2) * nHeight,\n    4 * nWidth,\n    nHeight\n  );\n  context.fillRect(\n    (centerX - 2) * nWidth,\n    (centerY + 2) * nHeight,\n    4 * nWidth,\n    nHeight\n  );\n  context.fillRect(centerX * nWidth, centerY * nHeight, nWidth, nHeight);\n}\n\nAwesomeQRCode = function() {};\n\nAwesomeQRCode.prototype.create = function(vOption) {\n  this._htOption = {\n    size: 800,\n    margin: 20,\n    typeNumber: 4,\n    colorDark: \"#000000\",\n    colorLight: \"rgba(255, 255, 255, 0.6)\",\n    logoBackgroundColor: '#ffffff',\n    correctLevel: QRErrorCorrectLevel.M,\n    backgroundImage: undefined,\n    backgroundDimming: \"rgba(0,0,0,0)\",\n    logoImage: undefined,\n    logoScale: 0.2,\n    logoMargin: 6,\n    logoCornerRadius: 8,\n    whiteMargin: true,\n    dotScale: 0.35,\n    maskedDots: false,\n    autoColor: true,\n    binarize: false,\n    binarizeThreshold: 128,\n    gifBackground: undefined,\n    callback: undefined,\n    bindElement: undefined,\n    backgroundColor: '#ffffff',\n  };\n\n  if (typeof vOption === \"string\") {\n    vOption = {\n      text: vOption\n    };\n  }\n\n  if (vOption) {\n    for (var i in vOption) {\n      this._htOption[i] = vOption[i];\n    }\n  }\n\n  this._oQRCode = null;\n  this._oDrawing = new Drawing(this._htOption);\n\n  if (this._htOption.text) {\n    this.makeCode(this._htOption.text);\n  }\n};\n\nfunction _getTypeNumber(sText, nCorrectLevel) {\n  var nType = 1;\n  var length = _getUTF8Length(sText);\n\n  for (var i = 0, len = QRCodeLimitLength.length; i <= len; i++) {\n    var nLimit = 0;\n\n    switch (nCorrectLevel) {\n      case QRErrorCorrectLevel.L:\n        nLimit = QRCodeLimitLength[i][0];\n        break;\n      case QRErrorCorrectLevel.M:\n        nLimit = QRCodeLimitLength[i][1];\n        break;\n      case QRErrorCorrectLevel.Q:\n        nLimit = QRCodeLimitLength[i][2];\n        break;\n      case QRErrorCorrectLevel.H:\n        nLimit = QRCodeLimitLength[i][3];\n        break;\n    }\n\n    if (length <= nLimit) {\n      break;\n    } else {\n      nType++;\n    }\n  }\n\n  if (nType > QRCodeLimitLength.length) {\n    throw new Error(\"Too long data\");\n  }\n\n  return nType;\n}\n\nAwesomeQRCode.prototype.makeCode = function(sText) {\n  //this._oQRCode = new QRCodeModel(_getTypeNumber(sText, this._htOption.correctLevel), this._htOption.correctLevel);\n  this._oQRCode = new QRCodeModel(-1, this._htOption.correctLevel);\n  this._oQRCode.addData(sText);\n  this._oQRCode.make();\n  this._oDrawing.draw(this._oQRCode);\n  this.makeImage();\n};\n\nAwesomeQRCode.prototype.makeImage = function() {\n  if (typeof this._oDrawing.makeImage == \"function\") {\n    this._oDrawing.makeImage();\n  }\n};\n\nAwesomeQRCode.prototype.clear = function() {\n  this._oDrawing.clear();\n};\n\nAwesomeQRCode.CorrectLevel = QRErrorCorrectLevel;\n\nfunction getAverageRGB(imgEl) {\n  var blockSize = 5,\n    defaultRGB = {\n      r: 0,\n      g: 0,\n      b: 0\n    },\n    canvas = document.createElement(\"canvas\"),\n    context = canvas.getContext && canvas.getContext(\"2d\"),\n    data,\n    width,\n    height,\n    i = -4,\n    length,\n    rgb = {\n      r: 0,\n      g: 0,\n      b: 0\n    },\n    count = 0;\n\n  if (!context) {\n    return defaultRGB;\n  }\n\n  height = canvas.height =\n    imgEl.naturalHeight || imgEl.offsetHeight || imgEl.height;\n  width = canvas.width = imgEl.naturalWidth || imgEl.offsetWidth || imgEl.width;\n\n  context.drawImage(imgEl, 0, 0);\n\n  try {\n    data = context.getImageData(0, 0, width, height);\n  } catch (e) {\n    return defaultRGB;\n  }\n\n  length = data.data.length;\n\n  while ((i += blockSize * 4) < length) {\n    if (data.data[i] > 200 || data.data[i + 1] > 200 || data.data[i + 2] > 200)\n      continue;\n    ++count;\n    rgb.r += data.data[i];\n    rgb.g += data.data[i + 1];\n    rgb.b += data.data[i + 2];\n  }\n\n  rgb.r = ~~(rgb.r / count);\n  rgb.g = ~~(rgb.g / count);\n  rgb.b = ~~(rgb.b / count);\n\n  return rgb;\n}\n// module.exports=AwesomeQRCode\nexport default AwesomeQRCode;\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/awesome-qr.js","/* eslint-disable */ \nimport DataParser from './DataParser'\nimport gifSchema from './schemaGIF'\nfunction GIF(arrayBuffer) {\n    // convert to byte array\n    var byteData = new Uint8Array(arrayBuffer);\n    var parser = new DataParser(byteData);\n    // parse the data\n    this.raw = parser.parse(gifSchema);\n\n    // set a flag to make sure the gif contains at least one image\n    this.raw.hasImages = false;\n    for (var f = 0; f < this.raw.frames.length; f++) {\n        if (this.raw.frames[f].image) {\n            this.raw.hasImages = true;\n            break;\n        }\n    }\n}\n\n// process a single gif image frames data, decompressing it using LZW\n// if buildPatch is true, the returned image will be a clamped 8 bit image patch\n// for use directly with a canvas.\nGIF.prototype.decompressFrame = function(index, buildPatch) {\n\n    // make sure a valid frame is requested\n    if (index >= this.raw.frames.length) {\n        return null;\n    }\n\n    var frame = this.raw.frames[index];\n    if (frame.image) {\n        // get the number of pixels\n        var totalPixels = frame.image.descriptor.width * frame.image.descriptor.height;\n\n        // do lzw decompression\n        var pixels = lzw(frame.image.data.minCodeSize, frame.image.data.blocks, totalPixels);\n\n        // deal with interlacing if necessary\n        if (frame.image.descriptor.lct.interlaced) {\n            pixels = deinterlace(pixels, frame.image.descriptor.width);\n        }\n\n        // setup usable image object\n        var image = {\n            pixels: pixels,\n            dims: {\n                top: frame.image.descriptor.top,\n                left: frame.image.descriptor.left,\n                width: frame.image.descriptor.width,\n                height: frame.image.descriptor.height\n            }\n        };\n\n        // color table\n        if (frame.image.descriptor.lct && frame.image.descriptor.lct.exists) {\n            image.colorTable = frame.image.lct;\n        } else {\n            image.colorTable = this.raw.gct;\n        }\n\n        // add per frame relevant gce information\n        if (frame.gce) {\n            image.delay = (frame.gce.delay || 10) * 10; // convert to ms\n            image.disposalType = frame.gce.extras.disposal;\n            // transparency\n            if (frame.gce.extras.transparentColorGiven) {\n                image.transparentIndex = frame.gce.transparentColorIndex;\n            }\n        }\n\n        // create canvas usable imagedata if desired\n        if (buildPatch) {\n            image.patch = generatePatch(image);\n        }\n\n        return image;\n    }\n\n    // frame does not contains image\n    return null;\n\n\n    /**\n     * javascript port of java LZW decompression\n     * Original java author url: https://gist.github.com/devunwired/4479231\n     */\n    function lzw(minCodeSize, data, pixelCount) {\n\n        var MAX_STACK_SIZE = 4096;\n        var nullCode = -1;\n\n        var npix = pixelCount;\n        var available, clear, code_mask, code_size, end_of_information, in_code, old_code, bits, code, i,\n            datum, data_size, first, top, bi, pi;\n\n        var dstPixels = new Array(pixelCount);\n        var prefix = new Array(MAX_STACK_SIZE);\n        var suffix = new Array(MAX_STACK_SIZE);\n        var pixelStack = new Array(MAX_STACK_SIZE + 1);\n\n        // Initialize GIF data stream decoder.\n        data_size = minCodeSize;\n        clear = 1 << data_size;\n        end_of_information = clear + 1;\n        available = clear + 2;\n        old_code = nullCode;\n        code_size = data_size + 1;\n        code_mask = (1 << code_size) - 1;\n        for (code = 0; code < clear; code++) {\n            prefix[code] = 0;\n            suffix[code] = code;\n        }\n        let count\n        // Decode GIF pixel stream.\n        datum = bits = count = first = top = pi = bi = 0;\n        for (i = 0; i < npix;) {\n            if (top === 0) {\n                if (bits < code_size) {\n\n                    // get the next byte\n                    datum += data[bi] << bits;\n\n                    bits += 8;\n                    bi++;\n                    continue;\n                }\n                // Get the next code.\n                code = datum & code_mask;\n                datum >>= code_size;\n                bits -= code_size;\n                // Interpret the code\n                if ((code > available) || (code == end_of_information)) {\n                    break;\n                }\n                if (code == clear) {\n                    // Reset decoder.\n                    code_size = data_size + 1;\n                    code_mask = (1 << code_size) - 1;\n                    available = clear + 2;\n                    old_code = nullCode;\n                    continue;\n                }\n                if (old_code == nullCode) {\n                    pixelStack[top++] = suffix[code];\n                    old_code = code;\n                    first = code;\n                    continue;\n                }\n                in_code = code;\n                if (code == available) {\n                    pixelStack[top++] = first;\n                    code = old_code;\n                }\n                while (code > clear) {\n                    pixelStack[top++] = suffix[code];\n                    code = prefix[code];\n                }\n\n                first = suffix[code] & 0xff;\n                pixelStack[top++] = first;\n\n                // add a new string to the table, but only if space is available\n                // if not, just continue with current table until a clear code is found\n                // (deferred clear code implementation as per GIF spec)\n                if (available < MAX_STACK_SIZE) {\n                    prefix[available] = old_code;\n                    suffix[available] = first;\n                    available++;\n                    if (((available & code_mask) === 0) && (available < MAX_STACK_SIZE)) {\n                        code_size++;\n                        code_mask += available;\n                    }\n                }\n                old_code = in_code;\n            }\n            // Pop a pixel off the pixel stack.\n            top--;\n            dstPixels[pi++] = pixelStack[top];\n            i++;\n        }\n\n        for (i = pi; i < npix; i++) {\n            dstPixels[i] = 0; // clear missing pixels\n        }\n\n        return dstPixels;\n    }\n\n    // deinterlace function from https://github.com/shachaf/jsgif\n    function deinterlace(pixels, width) {\n\n        var newPixels = new Array(pixels.length);\n        var rows = pixels.length / width;\n        var cpRow = function(toRow, fromRow) {\n            var fromPixels = pixels.slice(fromRow * width, (fromRow + 1) * width);\n            newPixels.splice.apply(newPixels, [toRow * width, width].concat(fromPixels));\n        };\n\n        // See appendix E.\n        var offsets = [0, 4, 2, 1];\n        var steps = [8, 8, 4, 2];\n\n        var fromRow = 0;\n        for (var pass = 0; pass < 4; pass++) {\n            for (var toRow = offsets[pass]; toRow < rows; toRow += steps[pass]) {\n                cpRow(toRow, fromRow);\n                fromRow++;\n            }\n        }\n\n        return newPixels;\n    }\n\n    // create a clamped byte array patch for the frame image to be used directly with a canvas\n    // TODO: could potentially squeeze some performance by doing a direct 32bit write per iteration\n    function generatePatch(image) {\n\n        var totalPixels = image.pixels.length;\n        var patchData = new Uint8ClampedArray(totalPixels * 4);\n        for (var i = 0; i < totalPixels; i++) {\n            var pos = i * 4;\n            var colorIndex = image.pixels[i];\n            var color = image.colorTable[colorIndex];\n            patchData[pos] = color[0];\n            patchData[pos + 1] = color[1];\n            patchData[pos + 2] = color[2];\n            patchData[pos + 3] = colorIndex !== image.transparentIndex ? 255 : 0;\n        }\n\n        return patchData;\n    }\n};\n\n// returns all frames decompressed\nGIF.prototype.decompressFrames = function(buildPatch) {\n    var frames = [];\n    for (var i = 0; i < this.raw.frames.length; i++) {\n        var frame = this.raw.frames[i];\n        if (frame.image) {\n            frames.push(this.decompressFrame(i, buildPatch));\n        }\n    }\n    return frames;\n};\n\n\nexport default GIF\n\n\n// WEBPACK FOOTER //\n// ./src/lib/Gif.js","import ByteStream from './ByteStream'\nfunction DataParser(data) {\n    this.stream = new ByteStream(data);\n    // the final parsed object from the data\n    this.output = {};\n}\n\nDataParser.prototype.parse = function(schema) {\n    // the top level schema is just the top level parts array\n    this.parseParts(this.output, schema);\n    return this.output;\n};\n\n// parse a set of hierarchy parts providing the parent object, and the subschema\nDataParser.prototype.parseParts = function(obj, schema) {\n    for (var i = 0; i < schema.length; i++) {\n        var part = schema[i];\n        this.parsePart(obj, part);\n    }\n};\n\nDataParser.prototype.parsePart = function(obj, part) {\n    var name = part.label;\n    var value;\n\n    // make sure the part meets any parse requirements\n    if (part.requires && !part.requires(this.stream, this.output, obj)) {\n        return;\n    }\n\n    if (part.loop) {\n        // create a parse loop over the parts\n        var items = [];\n        while (part.loop(this.stream)) {\n            var item = {};\n            this.parseParts(item, part.parts);\n            items.push(item);\n        }\n        obj[name] = items;\n    } else if (part.parts) {\n        // process any child parts\n        value = {};\n        this.parseParts(value, part.parts);\n        obj[name] = value;\n    } else if (part.parser) {\n        // parse the value using a parser\n        value = part.parser(this.stream, this.output, obj);\n        if (!part.skip) {\n            obj[name] = value;\n        }\n    } else if (part.bits) {\n        // convert the next byte to a set of bit fields\n        obj[name] = this.parseBits(part.bits);\n    }\n};\n\n// combine bits to calculate value\nfunction bitsToNum(bitArray) {\n    return bitArray.reduce(function(s, n) {\n        return s * 2 + n;\n    }, 0);\n}\n\n// parse a byte as a bit set (flags and values)\nDataParser.prototype.parseBits = function(details) {\n    var out = {};\n    var bits = this.stream.readBitArray();\n    for (var key in details) {\n        var item = details[key];\n        if (item.length) {\n            // convert the bit set to value\n            out[key] = bitsToNum(bits.slice(item.index, item.index + item.length));\n        } else {\n            out[key] = bits[item.index];\n        }\n    }\n    return out;\n};\n\nexport default DataParser\n\n\n// WEBPACK FOOTER //\n// ./src/lib/DataParser.js","function ByteStream(data) {\n  this.data = data;\n  this.pos = 0;\n}\n\n// read the next byte off the stream\nByteStream.prototype.readByte = function() {\n  return this.data[this.pos++];\n};\n\n// look at the next byte in the stream without updating the stream position\nByteStream.prototype.peekByte = function() {\n  return this.data[this.pos];\n};\n\n// read an array of bytes\nByteStream.prototype.readBytes = function(n) {\n  var bytes = new Array(n);\n  for (var i = 0; i < n; i++) {\n    bytes[i] = this.readByte();\n  }\n  return bytes;\n};\n\n// peek at an array of bytes without updating the stream position\nByteStream.prototype.peekBytes = function(n) {\n  var bytes = new Array(n);\n  for (var i = 0; i < n; i++) {\n    bytes[i] = this.data[this.pos + i];\n  }\n  return bytes;\n};\n\n// read a string from a byte set\nByteStream.prototype.readString = function(len) {\n  var str = \"\";\n  for (var i = 0; i < len; i++) {\n    str += String.fromCharCode(this.readByte());\n  }\n  return str;\n};\n\n// read a single byte and return an array of bit booleans\nByteStream.prototype.readBitArray = function() {\n  var arr = [];\n  var bite = this.readByte();\n  for (var i = 7; i >= 0; i--) {\n    arr.push(!!(bite & (1 << i)));\n  }\n  return arr;\n};\n\n// read an unsigned int with endian option\nByteStream.prototype.readUnsigned = function(littleEndian) {\n  var a = this.readBytes(2);\n  if (littleEndian) {\n    return (a[1] << 8) + a[0];\n  } else {\n    return (a[0] << 8) + a[1];\n  }\n};\n\nexport default ByteStream\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/ByteStream.js","import Parsers from './Parsers'\n// a set of 0x00 terminated subblocks\nvar subBlocks = {\n  label: \"blocks\",\n  parser: function(stream) {\n    var out = [];\n    var terminator = 0x00;\n    for (\n      var size = stream.readByte();\n      size !== terminator;\n      size = stream.readByte()\n    ) {\n      out = out.concat(stream.readBytes(size));\n    }\n    return out;\n  }\n};\n\n// global control extension\nvar gce = {\n  label: \"gce\",\n  requires: function(stream) {\n    // just peek at the top two bytes, and if true do this\n    var codes = stream.peekBytes(2);\n    return codes[0] === 0x21 && codes[1] === 0xf9;\n  },\n  parts: [\n    { label: \"codes\", parser: Parsers.readBytes(2), skip: true },\n    { label: \"byteSize\", parser: Parsers.readByte() },\n    {\n      label: \"extras\",\n      bits: {\n        future: { index: 0, length: 3 },\n        disposal: { index: 3, length: 3 },\n        userInput: { index: 6 },\n        transparentColorGiven: { index: 7 }\n      }\n    },\n    { label: \"delay\", parser: Parsers.readUnsigned(true) },\n    { label: \"transparentColorIndex\", parser: Parsers.readByte() },\n    { label: \"terminator\", parser: Parsers.readByte(), skip: true }\n  ]\n};\n\n// image pipeline block\nvar image = {\n  label: \"image\",\n  requires: function(stream) {\n    // peek at the next byte\n    var code = stream.peekByte();\n    return code === 0x2c;\n  },\n  parts: [\n    { label: \"code\", parser: Parsers.readByte(), skip: true },\n    {\n      label: \"descriptor\", // image descriptor\n      parts: [\n        { label: \"left\", parser: Parsers.readUnsigned(true) },\n        { label: \"top\", parser: Parsers.readUnsigned(true) },\n        { label: \"width\", parser: Parsers.readUnsigned(true) },\n        { label: \"height\", parser: Parsers.readUnsigned(true) },\n        {\n          label: \"lct\",\n          bits: {\n            exists: { index: 0 },\n            interlaced: { index: 1 },\n            sort: { index: 2 },\n            future: { index: 3, length: 2 },\n            size: { index: 5, length: 3 }\n          }\n        }\n      ]\n    },\n    {\n      label: \"lct\", // optional local color table\n      requires: function(stream, obj, parent) {\n        return parent.descriptor.lct.exists;\n      },\n      parser: Parsers.readArray(3, function(stream, obj, parent) {\n        return Math.pow(2, parent.descriptor.lct.size + 1);\n      })\n    },\n    {\n      label: \"data\", // the image data blocks\n      parts: [{ label: \"minCodeSize\", parser: Parsers.readByte() }, subBlocks]\n    }\n  ]\n};\n\n// plain text block\nvar text = {\n  label: \"text\",\n  requires: function(stream) {\n    // just peek at the top two bytes, and if true do this\n    var codes = stream.peekBytes(2);\n    return codes[0] === 0x21 && codes[1] === 0x01;\n  },\n  parts: [\n    { label: \"codes\", parser: Parsers.readBytes(2), skip: true },\n    { label: \"blockSize\", parser: Parsers.readByte() },\n    {\n      label: \"preData\",\n      parser: function(stream, obj, parent) {\n        return stream.readBytes(parent.text.blockSize);\n      }\n    },\n    subBlocks\n  ]\n};\n\n// application block\nvar application = {\n  label: \"application\",\n  requires: function(stream, obj, parent) {\n    // make sure this frame doesn't already have a gce, text, comment, or image\n    // as that means this block should be attached to the next frame\n    //if(parent.gce || parent.text || parent.image || parent.comment){ return false; }\n\n    // peek at the top two bytes\n    var codes = stream.peekBytes(2);\n    return codes[0] === 0x21 && codes[1] === 0xff;\n  },\n  parts: [\n    { label: \"codes\", parser: Parsers.readBytes(2), skip: true },\n    { label: \"blockSize\", parser: Parsers.readByte() },\n    {\n      label: \"id\",\n      parser: function(stream, obj, parent) {\n        return stream.readString(parent.blockSize);\n      }\n    },\n    subBlocks\n  ]\n};\n\n// comment block\nvar comment = {\n  label: \"comment\",\n  requires: function(stream, obj, parent) {\n    // make sure this frame doesn't already have a gce, text, comment, or image\n    // as that means this block should be attached to the next frame\n    //if(parent.gce || parent.text || parent.image || parent.comment){ return false; }\n\n    // peek at the top two bytes\n    var codes = stream.peekBytes(2);\n    return codes[0] === 0x21 && codes[1] === 0xfe;\n  },\n  parts: [\n    { label: \"codes\", parser: Parsers.readBytes(2), skip: true },\n    subBlocks\n  ]\n};\n\n// frames of ext and image data\nvar frames = {\n  label: \"frames\",\n  parts: [gce, application, comment, image, text],\n  loop: function(stream) {\n    var nextCode = stream.peekByte();\n    // rather than check for a terminator, we should check for the existence\n    // of an ext or image block to avoid infinite loops\n    //var terminator = 0x3B;\n    //return nextCode !== terminator;\n    return nextCode === 0x21 || nextCode === 0x2c;\n  }\n};\n\n// main GIF schema\nvar schemaGIF = [\n  {\n    label: \"header\", // gif header\n    parts: [\n      { label: \"signature\", parser: Parsers.readString(3) },\n      { label: \"version\", parser: Parsers.readString(3) }\n    ]\n  },\n  {\n    label: \"lsd\", // local screen descriptor\n    parts: [\n      { label: \"width\", parser: Parsers.readUnsigned(true) },\n      { label: \"height\", parser: Parsers.readUnsigned(true) },\n      {\n        label: \"gct\",\n        bits: {\n          exists: { index: 0 },\n          resolution: { index: 1, length: 3 },\n          sort: { index: 4 },\n          size: { index: 5, length: 3 }\n        }\n      },\n      { label: \"backgroundColorIndex\", parser: Parsers.readByte() },\n      { label: \"pixelAspectRatio\", parser: Parsers.readByte() }\n    ]\n  },\n  {\n    label: \"gct\", // global color table\n    requires: function(stream, obj) {\n      return obj.lsd.gct.exists;\n    },\n    parser: Parsers.readArray(3, function(stream, obj) {\n      return Math.pow(2, obj.lsd.gct.size + 1);\n    })\n  },\n  frames // content frames\n];\nexport default schemaGIF\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/schemaGIF.js","var Parsers = {\n    // read a byte\n    readByte: function() {\n        return function(stream) {\n            return stream.readByte();\n        };\n    },\n    // read an array of bytes\n    readBytes: function(length) {\n        return function(stream) {\n            return stream.readBytes(length);\n        };\n    },\n    // read a string from bytes\n    readString: function(length) {\n        return function(stream) {\n            return stream.readString(length);\n        };\n    },\n    // read an unsigned int (with endian)\n    readUnsigned: function(littleEndian) {\n        return function(stream) {\n            return stream.readUnsigned(littleEndian);\n        };\n    },\n    // read an array of byte sets\n    readArray: function(size, countFunc) {\n        return function(stream, obj, parent) {\n            var count = countFunc(stream, obj, parent);\n            var arr = new Array(count);\n            for (var i = 0; i < count; i++) {\n                arr[i] = stream.readBytes(size);\n            }\n            return arr;\n        };\n    }\n};\n\nexport default Parsers\n\n\n// WEBPACK FOOTER //\n// ./src/lib/Parsers.js","/* eslint-disable */ \nfunction EventEmitter() {\n  this._events = this._events || {};\n  this._maxListeners = this._maxListeners || undefined;\n}\n\nEventEmitter.EventEmitter = EventEmitter;\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\nEventEmitter.defaultMaxListeners = 10;\nEventEmitter.prototype.setMaxListeners = function(n) {\n  if (!isNumber(n) || n < 0 || isNaN(n))\n    throw TypeError(\"n must be a positive number\");\n  this._maxListeners = n;\n  return this;\n};\nEventEmitter.prototype.emit = function(type) {\n  var er, handler, len, args, i, listeners;\n  if (!this._events) this._events = {};\n  if (type === \"error\") {\n    if (\n      !this._events.error ||\n      (isObject(this._events.error) && !this._events.error.length)\n    ) {\n      er = arguments[1];\n      if (er instanceof Error) {\n        throw er;\n      } else {\n        var err = new Error(\n          'Uncaught, unspecified \"error\" event. (' + er + \")\"\n        );\n        err.context = er;\n        throw err;\n      }\n    }\n  }\n  handler = this._events[type];\n  if (isUndefined(handler)) return false;\n  if (isFunction(handler)) {\n    switch (arguments.length) {\n      case 1:\n        handler.call(this);\n        break;\n      case 2:\n        handler.call(this, arguments[1]);\n        break;\n      case 3:\n        handler.call(this, arguments[1], arguments[2]);\n        break;\n      default:\n        args = Array.prototype.slice.call(arguments, 1);\n        handler.apply(this, args);\n    }\n  } else if (isObject(handler)) {\n    args = Array.prototype.slice.call(arguments, 1);\n    listeners = handler.slice();\n    len = listeners.length;\n    for (i = 0; i < len; i++) listeners[i].apply(this, args);\n  }\n  return true;\n};\nEventEmitter.prototype.addListener = function(type, listener) {\n  var m;\n  if (!isFunction(listener)) throw TypeError(\"listener must be a function\");\n  if (!this._events) this._events = {};\n  if (this._events.newListener)\n    this.emit(\n      \"newListener\",\n      type,\n      isFunction(listener.listener) ? listener.listener : listener\n    );\n  if (!this._events[type]) this._events[type] = listener;\n  else if (isObject(this._events[type])) this._events[type].push(listener);\n  else this._events[type] = [this._events[type], listener];\n  if (isObject(this._events[type]) && !this._events[type].warned) {\n    if (!isUndefined(this._maxListeners)) {\n      m = this._maxListeners;\n    } else {\n      m = EventEmitter.defaultMaxListeners;\n    }\n    if (m && m > 0 && this._events[type].length > m) {\n      this._events[type].warned = true;\n      console.error(\n        \"(node) warning: possible EventEmitter memory \" +\n          \"leak detected. %d listeners added. \" +\n          \"Use emitter.setMaxListeners() to increase limit.\",\n        this._events[type].length\n      );\n      if (typeof console.trace === \"function\") {\n        console.trace();\n      }\n    }\n  }\n  return this;\n};\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\nEventEmitter.prototype.once = function(type, listener) {\n  if (!isFunction(listener)) throw TypeError(\"listener must be a function\");\n  var fired = false;\n  function g() {\n    this.removeListener(type, g);\n    if (!fired) {\n      fired = true;\n      listener.apply(this, arguments);\n    }\n  }\n  g.listener = listener;\n  this.on(type, g);\n  return this;\n};\nEventEmitter.prototype.removeListener = function(type, listener) {\n  var list, position, length, i;\n  if (!isFunction(listener)) throw TypeError(\"listener must be a function\");\n  if (!this._events || !this._events[type]) return this;\n  list = this._events[type];\n  length = list.length;\n  position = -1;\n  if (\n    list === listener ||\n    (isFunction(list.listener) && list.listener === listener)\n  ) {\n    delete this._events[type];\n    if (this._events.removeListener)\n      this.emit(\"removeListener\", type, listener);\n  } else if (isObject(list)) {\n    for (i = length; i-- > 0; ) {\n      if (\n        list[i] === listener ||\n        (list[i].listener && list[i].listener === listener)\n      ) {\n        position = i;\n        break;\n      }\n    }\n    if (position < 0) return this;\n    if (list.length === 1) {\n      list.length = 0;\n      delete this._events[type];\n    } else {\n      list.splice(position, 1);\n    }\n    if (this._events.removeListener)\n      this.emit(\"removeListener\", type, listener);\n  }\n  return this;\n};\nEventEmitter.prototype.removeAllListeners = function(type) {\n  var key, listeners;\n  if (!this._events) return this;\n  if (!this._events.removeListener) {\n    if (arguments.length === 0) this._events = {};\n    else if (this._events[type]) delete this._events[type];\n    return this;\n  }\n  if (arguments.length === 0) {\n    for (key in this._events) {\n      if (key === \"removeListener\") continue;\n      this.removeAllListeners(key);\n    }\n    this.removeAllListeners(\"removeListener\");\n    this._events = {};\n    return this;\n  }\n  listeners = this._events[type];\n  if (isFunction(listeners)) {\n    this.removeListener(type, listeners);\n  } else if (listeners) {\n    while (listeners.length)\n      this.removeListener(type, listeners[listeners.length - 1]);\n  }\n  delete this._events[type];\n  return this;\n};\nEventEmitter.prototype.listeners = function(type) {\n  var ret;\n  if (!this._events || !this._events[type]) ret = [];\n  else if (isFunction(this._events[type])) ret = [this._events[type]];\n  else ret = this._events[type].slice();\n  return ret;\n};\nEventEmitter.prototype.listenerCount = function(type) {\n  if (this._events) {\n    var evlistener = this._events[type];\n    if (isFunction(evlistener)) return 1;\n    else if (evlistener) return evlistener.length;\n  }\n  return 0;\n};\nEventEmitter.listenerCount = function(emitter, type) {\n  return emitter.listenerCount(type);\n};\nfunction isFunction(arg) {\n  return typeof arg === \"function\";\n}\nfunction isNumber(arg) {\n  return typeof arg === \"number\";\n}\nfunction isObject(arg) {\n  return typeof arg === \"object\" && arg !== null;\n}\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\n\nvar UA, browser, mode, platform, ua;\nua = navigator.userAgent.toLowerCase();\nplatform = navigator.platform.toLowerCase();\nUA = ua.match(\n  /(opera|ie|firefox|chrome|version)[\\s\\/:]([\\w\\d\\.]+)?.*?(safari|version[\\s\\/:]([\\w\\d\\.]+)|$)/\n) || [null, \"unknown\", 0];\nmode = UA[1] === \"ie\" && document.documentMode;\nbrowser = {\n  name: UA[1] === \"version\" ? UA[3] : UA[1],\n  version: mode || parseFloat(UA[1] === \"opera\" && UA[4] ? UA[4] : UA[2]),\n  platform: {\n    name: ua.match(/ip(?:ad|od|hone)/)\n      ? \"ios\"\n      : (ua.match(/(?:webos|android)/) ||\n          platform.match(/mac|win|linux/) || [\"other\"])[0]\n  }\n};\nbrowser[browser.name] = true;\nbrowser[browser.name + parseInt(browser.version, 10)] = true;\nbrowser.platform[browser.platform.name] = true;\n\nvar extend = function(child, parent) {\n    for (var key in parent) {\n      if (hasProp.call(parent, key)) child[key] = parent[key];\n    }\n    function ctor() {\n      this.constructor = child;\n    }\n    ctor.prototype = parent.prototype;\n    child.prototype = new ctor();\n    child.__super__ = parent.prototype;\n    return child;\n  },\n  hasProp = {}.hasOwnProperty,\n  indexOf =\n    [].indexOf ||\n    function(item) {\n      for (var i = 0, l = this.length; i < l; i++) {\n        if (i in this && this[i] === item) return i;\n      }\n      return -1;\n    },\n  slice = [].slice;\nvar GIF = (function(superClass) {\n  var defaults, frameDefaults;\n  extend(GIF, superClass);\n  var gifWorker = require(\"./gif.worker.js\");\n\n  defaults = {\n    workerScript: gifWorker,\n    workers: 2,\n    repeat: 0,\n    background: \"#fff\",\n    quality: 10,\n    width: null,\n    height: null,\n    transparent: null,\n    debug: false,\n    dither: false\n  };\n\n  frameDefaults = { delay: 500, copy: false };\n  function GIF(options) {\n    var base, key, value;\n    this.running = false;\n    this.options = {};\n    this.frames = [];\n    this.freeWorkers = [];\n    this.activeWorkers = [];\n    this.setOptions(options);\n    for (key in defaults) {\n      value = defaults[key];\n      if ((base = this.options)[key] == null) {\n        base[key] = value;\n      }\n    }\n  }\n  GIF.prototype.setOption = function(key, value) {\n    this.options[key] = value;\n    if (this._canvas != null && (key === \"width\" || key === \"height\")) {\n      return (this._canvas[key] = value);\n    }\n  };\n  GIF.prototype.setOptions = function(options) {\n    var key, results, value;\n    results = [];\n    for (key in options) {\n      if (!hasProp.call(options, key)) continue;\n      value = options[key];\n      results.push(this.setOption(key, value));\n    }\n    return results;\n  };\n  GIF.prototype.addFrame = function(image, options) {\n    var frame, key;\n    if (options == null) {\n      options = {};\n    }\n    frame = {};\n    frame.transparent = this.options.transparent;\n    for (key in frameDefaults) {\n      frame[key] = options[key] || frameDefaults[key];\n    }\n    if (this.options.width == null) {\n      this.setOption(\"width\", image.width);\n    }\n    if (this.options.height == null) {\n      this.setOption(\"height\", image.height);\n    }\n    if (\n      typeof ImageData !== \"undefined\" &&\n      ImageData !== null &&\n      image instanceof ImageData\n    ) {\n      frame.data = image.data;\n    } else if (\n      (typeof CanvasRenderingContext2D !== \"undefined\" &&\n        CanvasRenderingContext2D !== null &&\n        image instanceof CanvasRenderingContext2D) ||\n      (typeof WebGLRenderingContext !== \"undefined\" &&\n        WebGLRenderingContext !== null &&\n        image instanceof WebGLRenderingContext)\n    ) {\n      if (options.copy) {\n        frame.data = this.getContextData(image);\n      } else {\n        frame.context = image;\n      }\n    } else if (image.childNodes != null) {\n      if (options.copy) {\n        frame.data = this.getImageData(image);\n      } else {\n        frame.image = image;\n      }\n    } else {\n      throw new Error(\"Invalid image\");\n    }\n    return this.frames.push(frame);\n  };\n  GIF.prototype.render = function() {\n    var i, j, numWorkers, ref;\n    if (this.running) {\n      throw new Error(\"Already running\");\n    }\n    if (this.options.width == null || this.options.height == null) {\n      throw new Error(\"Width and height must be set prior to rendering\");\n    }\n    this.running = true;\n    this.nextFrame = 0;\n    this.finishedFrames = 0;\n    this.imageParts = function() {\n      var j, ref, results;\n      results = [];\n      for (\n        i = j = 0, ref = this.frames.length;\n        0 <= ref ? j < ref : j > ref;\n        i = 0 <= ref ? ++j : --j\n      ) {\n        results.push(null);\n      }\n      return results;\n    }.call(this);\n    numWorkers = this.spawnWorkers();\n    if (this.options.globalPalette === true) {\n      this.renderNextFrame();\n    } else {\n      for (\n        i = j = 0, ref = numWorkers;\n        0 <= ref ? j < ref : j > ref;\n        i = 0 <= ref ? ++j : --j\n      ) {\n        this.renderNextFrame();\n      }\n    }\n    this.emit(\"start\");\n    return this.emit(\"progress\", 0);\n  };\n  GIF.prototype.abort = function() {\n    var worker;\n    while (true) {\n      worker = this.activeWorkers.shift();\n      if (worker == null) {\n        break;\n      }\n      this.log(\"killing active worker\");\n      worker.terminate();\n    }\n    this.running = false;\n    return this.emit(\"abort\");\n  };\n  GIF.prototype.spawnWorkers = function() {\n    var j, numWorkers, ref, results;\n    numWorkers = Math.min(this.options.workers, this.frames.length);\n    (function() {\n      results = [];\n      for (\n        var j = (ref = this.freeWorkers.length);\n        ref <= numWorkers ? j < numWorkers : j > numWorkers;\n        ref <= numWorkers ? j++ : j--\n      ) {\n        results.push(j);\n      }\n      return results;\n    }\n      .apply(this)\n      .forEach(\n        (function(_this) {\n          return function(i) {\n            var worker;\n            _this.log(\"spawning worker \" + i);\n            const Worker=require('./gif.worker')\n            worker = new Worker();\n            // worker = new Worker(_this.options.workerScript);\n            worker.onmessage = function(event) {\n              _this.activeWorkers.splice(\n                _this.activeWorkers.indexOf(worker),\n                1\n              );\n              _this.freeWorkers.push(worker);\n              return _this.frameFinished(event.data);\n            };\n            return _this.freeWorkers.push(worker);\n          };\n        })(this)\n      ));\n    return numWorkers;\n  };\n  GIF.prototype.frameFinished = function(frame) {\n    var i, j, ref;\n    this.log(\n      \"frame \" +\n        frame.index +\n        \" finished - \" +\n        this.activeWorkers.length +\n        \" active\"\n    );\n    this.finishedFrames++;\n    this.emit(\"progress\", this.finishedFrames / this.frames.length);\n    this.imageParts[frame.index] = frame;\n    if (this.options.globalPalette === true) {\n      this.options.globalPalette = frame.globalPalette;\n      this.log(\"global palette analyzed\");\n      if (this.frames.length > 2) {\n        for (\n          i = j = 1, ref = this.freeWorkers.length;\n          1 <= ref ? j < ref : j > ref;\n          i = 1 <= ref ? ++j : --j\n        ) {\n          this.renderNextFrame();\n        }\n      }\n    }\n    if (indexOf.call(this.imageParts, null) >= 0) {\n      return this.renderNextFrame();\n    } else {\n      return this.finishRendering();\n    }\n  };\n  GIF.prototype.finishRendering = function() {\n    var data,\n      frame,\n      i,\n      image,\n      j,\n      k,\n      l,\n      len,\n      len1,\n      len2,\n      len3,\n      offset,\n      page,\n      ref,\n      ref1,\n      ref2;\n    len = 0;\n    ref = this.imageParts;\n    for (j = 0, len1 = ref.length; j < len1; j++) {\n      frame = ref[j];\n      len += (frame.data.length - 1) * frame.pageSize + frame.cursor;\n    }\n    len += frame.pageSize - frame.cursor;\n    this.log(\"rendering finished - filesize \" + Math.round(len / 1e3) + \"kb\");\n    data = new Uint8Array(len);\n    offset = 0;\n    ref1 = this.imageParts;\n    for (k = 0, len2 = ref1.length; k < len2; k++) {\n      frame = ref1[k];\n      ref2 = frame.data;\n      for (i = l = 0, len3 = ref2.length; l < len3; i = ++l) {\n        page = ref2[i];\n        data.set(page, offset);\n        if (i === frame.data.length - 1) {\n          offset += frame.cursor;\n        } else {\n          offset += frame.pageSize;\n        }\n      }\n    }\n    image = new Blob([data], { type: \"image/gif\" });\n    return this.emit(\"finished\", image, data);\n  };\n  GIF.prototype.renderNextFrame = function() {\n    var frame, task, worker;\n    if (this.freeWorkers.length === 0) {\n      throw new Error(\"No free workers\");\n    }\n    if (this.nextFrame >= this.frames.length) {\n      return;\n    }\n    frame = this.frames[this.nextFrame++];\n    worker = this.freeWorkers.shift();\n    task = this.getTask(frame);\n    this.log(\n      \"starting frame \" + (task.index + 1) + \" of \" + this.frames.length\n    );\n    this.activeWorkers.push(worker);\n    return worker.postMessage(task);\n  };\n  GIF.prototype.getContextData = function(ctx) {\n    return ctx.getImageData(0, 0, this.options.width, this.options.height).data;\n  };\n  GIF.prototype.getImageData = function(image) {\n    var ctx;\n    if (this._canvas == null) {\n      this._canvas = document.createElement(\"canvas\");\n      this._canvas.width = this.options.width;\n      this._canvas.height = this.options.height;\n    }\n    ctx = this._canvas.getContext(\"2d\");\n    ctx.setFill = this.options.background;\n    ctx.fillRect(0, 0, this.options.width, this.options.height);\n    ctx.drawImage(image, 0, 0);\n    return this.getContextData(ctx);\n  };\n  GIF.prototype.getTask = function(frame) {\n    var index, task;\n    index = this.frames.indexOf(frame);\n    task = {\n      index: index,\n      last: index === this.frames.length - 1,\n      delay: frame.delay,\n      transparent: frame.transparent,\n      width: this.options.width,\n      height: this.options.height,\n      quality: this.options.quality,\n      dither: this.options.dither,\n      globalPalette: this.options.globalPalette,\n      repeat: this.options.repeat,\n      canTransfer: browser.name === \"chrome\"\n    };\n    if (frame.data != null) {\n      task.data = frame.data;\n    } else if (frame.context != null) {\n      task.data = this.getContextData(frame.context);\n    } else if (frame.image != null) {\n      task.data = this.getImageData(frame.image);\n    } else {\n      throw new Error(\"Invalid frame\");\n    }\n    return task;\n  };\n  GIF.prototype.log = function() {\n    var args;\n    args = 1 <= arguments.length ? slice.call(arguments, 0) : [];\n    if (!this.options.debug) {\n      return;\n    }\n    return console.log.apply(console, args);\n  };\n  return GIF;\n})(EventEmitter);\n\nexport default GIF;\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/gifjs.js","'use strict';\n\n// http://stackoverflow.com/questions/10343913/how-to-create-a-web-worker-from-a-string\n\nvar URL = window.URL || window.webkitURL;\n\nmodule.exports = function (content, url) {\n  try {\n    try {\n      var blob;\n\n      try {\n        // BlobBuilder = Deprecated, but widely implemented\n        var BlobBuilder = window.BlobBuilder || window.WebKitBlobBuilder || window.MozBlobBuilder || window.MSBlobBuilder;\n\n        blob = new BlobBuilder();\n\n        blob.append(content);\n\n        blob = blob.getBlob();\n      } catch (e) {\n        // The proposed API\n        blob = new Blob([content]);\n      }\n\n      return new Worker(URL.createObjectURL(blob));\n    } catch (e) {\n      return new Worker('data:application/javascript,' + encodeURIComponent(content));\n    }\n  } catch (e) {\n    if (!url) {\n      throw Error('Inline worker is not supported');\n    }\n\n    return new Worker(url);\n  }\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/worker-loader/dist/workers/InlineWorker.js\n// module id = 12\n// module chunks = 0","function imgLoaded(url) {\n  if(!url){\n    return undefined\n  }\n  return new Promise(function(resolve, reject) {\n    if (url.slice(0, 4) === 'data') {\n      var img = new Image()\n      img.onload = function() {\n        resolve(img)\n      }\n      img.onerror = function() {\n        reject('Image load error')\n      }\n      img.src = url\n      return\n    }\n    var xhr = new XMLHttpRequest()\n    xhr.onload = function() {\n      var newUrl = URL.createObjectURL(this.response)\n      var img = new Image()\n      img.onload = function() {\n        resolve(img)\n        URL.revokeObjectURL(newUrl)\n      }\n      img.onerror = function() {\n        reject('Image load error')\n      }\n      img.src = newUrl\n    }\n    xhr.open('GET', url, true)\n    xhr.responseType = 'blob'\n    xhr.send()\n  })\n}\nexport default imgLoaded\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/imgLoaded.js","function readAsArrayBuffer(url, callback) {\n  return new Promise((resolve, reject) => {\n    var xhr = new XMLHttpRequest();\n    xhr.responseType = \"blob\"; //设定返回数据类型为Blob\n    xhr.onload = function() {\n      var reader = new FileReader();\n      reader.onloadend = function() {\n          resolve(reader.result)\n      };\n      reader.readAsArrayBuffer(xhr.response); //xhr.response就是一个Blob，用FileReader读取\n    };\n    xhr.open(\"GET\", url);\n    xhr.send();\n  });\n}\nexport default readAsArrayBuffer\n\n\n// WEBPACK FOOTER //\n// ./src/lib/readAsArrayBuffer.js"],"sourceRoot":""}